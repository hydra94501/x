import{g as A}from"./index-b24cc282.js";import{t as r,s as B,v as D,x as V,y as $,z as l,A as u,L as c,M as O,N as F,O as g,P as y,G as _,I as H,Q as P}from"./index-e129a366.js";import{_ as Q,a as S,b as j,c as E}from"./Spin-2f5a88f8.js";import{_ as G}from"./DatePicker-3df33e66.js";import"./get-slot-1efb97e5.js";const K={class:"bgd-page"},L={class:"search-box"},ee={__name:"AccountDetails",setup(R){const b=r([{title:"记录编号",key:"id",width:100,resizable:!0},{title:"商户Id",key:"appId",width:100,resizable:!0},{title:"类型",key:"type",width:100,resizable:!0},{title:"场景",key:"sceneInfo",width:100,resizable:!0},{title:"变动前金额",key:"frontMoney",width:100,resizable:!0},{title:"变动金额",key:"money",width:80},{title:"变动后金额",key:"queenMoney",width:100,resizable:!0},{title:"说明",key:"details",width:200,resizable:!0},{title:"备注",key:"notes",width:100,resizable:!0},{title:"商户单号",key:"orderId",width:180,resizable:!0},{title:"创建时间",key:"createTime",width:160,resizable:!0,render:a=>a.createTime?a.createTime:"-"}]),d=r(!0),m=r(0),w=a=>a.id,s=r(null),k=r([{label:"商户充值",value:"1"},{label:"管理员操作",value:"2"},{label:"商户提现",value:"3"},{label:"转赠",value:"4"}]),z=r([{label:"增加",value:"1"},{label:"减少",value:"2"}]),t=B({id:null,appId:null,orderId:null,type:null,sceneInfo:null,money:null,page:1,limit:10,rowIndex:0}),f=r([]),p=async()=>{t.startCreateTime=s.value?s.value[0]:"",t.endCreateTime=s.value?s.value[1]:"",d.value=!0;const a=await A(t);f.value=a.data.map(e=>{var i=e.type;i=i===1?"增加":"减少",e.type=i;var n=e.sceneInfo;return n=n===1?"商户充值":n===2?"管理员操作":n===3?"商户提现":"转赠",e.sceneInfo=n,e.frontMoney=c(e.frontMoney),e.money=c(e.money),e.queenMoney=c(e.queenMoney),e.createTime=O(e.createTime),e}),console.log("账户明细",a),m.value=a.count,d.value=!1},I=a=>{t.page=a,p()},h=a=>{t.limit=a,t.page=1,p()};function x(){for(const a in t)t[a]=null;s.value=null,t.page=1,t.limit=10,t.rowIndex=0,p()}function M(){t.page=1,t.limit=10,t.rowIndex=0,p()}return p(),(a,e)=>{const i=H,n=P,v=S,T=G,U=F,q=j,C=E,N=Q;return D(),V("div",K,[$("div",L,[l(U,{ref:"formRef","label-width":90,model:t,inline:"",class:"search-form",size:"medium","label-placement":"left"},{default:u(()=>[l(n,{label:"记录编号"},{default:u(()=>[l(i,{value:t.id,"onUpdate:value":e[0]||(e[0]=o=>t.id=o),placeholder:"记录编号"},null,8,["value"])]),_:1}),l(n,{label:"商户订单号"},{default:u(()=>[l(i,{value:t.orderId,"onUpdate:value":e[1]||(e[1]=o=>t.orderId=o),placeholder:"商户订单号"},null,8,["value"])]),_:1}),l(n,{label:"类型"},{default:u(()=>[l(v,{value:t.type,"onUpdate:value":e[2]||(e[2]=o=>t.type=o),options:z.value,"value-field":"value","label-field":"label"},null,8,["value","options"])]),_:1}),l(n,{label:"场景"},{default:u(()=>[l(v,{value:t.sceneInfo,"onUpdate:value":e[3]||(e[3]=o=>t.sceneInfo=o),options:k.value,"value-field":"value","label-field":"label"},null,8,["value","options"])]),_:1}),l(n,{label:"金额"},{default:u(()=>[l(i,{value:t.money,"onUpdate:value":e[4]||(e[4]=o=>t.money=o),placeholder:"金额"},null,8,["value"])]),_:1}),l(n,{label:"起止时间"},{default:u(()=>[l(T,{"formatted-value":s.value,"onUpdate:formattedValue":e[5]||(e[5]=o=>s.value=o),type:"datetimerange",clearable:"","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"300px"}},null,8,["formatted-value"])]),_:1}),l(n,{label:""},{default:u(()=>[l(g(y),{size:"medium",style:{"margin-right":"10px"},onClick:x},{default:u(()=>[_("清空")]),_:1}),l(g(y),{size:"medium",type:"info",onClick:M},{default:u(()=>[_("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),l(N,{show:d.value},{description:u(()=>[_("加载中...")]),default:u(()=>[l(q,{columns:b.value,data:f.value,"row-key":w,"single-line":!1,id:"dataTable","scroll-x":1600},null,8,["columns","data"]),l(C,{style:{margin:"18px 0"},"show-size-picker":"","show-quick-jumper":"","page-sizes":[10,20,50,100],page:t.page,"onUpdate:page":[e[6]||(e[6]=o=>t.page=o),I],"page-count":m.value,"onUpdate:pageSize":h},null,8,["page","page-count"])]),_:1},8,["show"])])}}};export{ee as default};
