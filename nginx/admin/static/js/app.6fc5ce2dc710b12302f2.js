webpackJsonp([1],{"+Y00":function(e,t){},"+cgv":function(e,t){},0:function(e,t){},"0TDj":function(e,t){},"0j0q":function(e,t){},"1ei3":function(e,t,a){e.exports=a.p+"static/img/luna.1f2b4bc.jpg"},"2Jx9":function(e,t){},"3f40":function(e,t){},"4k79":function(e,t){},"4qOc":function(e,t){},"5XRo":function(e,t,a){e.exports=a.p+"static/img/sea_sky.29c9de9.png"},"7cQ7":function(e,t){},"7mAk":function(e,t){},ANKT:function(e,t){},"Bn+h":function(e,t){},CQsZ:function(e,t){},Dir5:function(e,t){},Ene1:function(e,t){},EzE5:function(e,t){},FDAq:function(e,t){},FWYN:function(e,t){},J7cY:function(e,t){},K8xC:function(e,t){},MpRT:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%",height:"100%"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"app",components:{}},i,!1,function(e){a("nbWc")},null,null).exports,n=a("zL8q"),o=a.n(n),l=(a("n4oI"),a("x9ll"),a("yb1D"),a("tDCX"),a("tvR6"),"0123456789");function c(e,t,a){var r=2,i=!0;if(null!=t&&"number"==typeof t&&(r=t),null!=a&&"boolean"==typeof a&&(i=a),null!=e&&"number"==typeof e){var s=.01*e,n=(s=s.toFixed(r)).toString();if(""!=n){n.split(",").length,new RegExp("^-?0(\\.\\d+)?$|^-?[1-9]\\d*(\\.\\d+)?$|^-?([1-9][0-9]{0,2},)(\\d{3},)*(\\d{3})(\\.\\d+)?$","g");for(var o=new RegExp("^[0-9.-]*$","g"),c=n.replace(/,/,"");c.indexOf(",")>=0;)c=c.replace(/,/,"");var u="";if(o.test(c)){for(var d,m,p=0,f=0,h=0;p<c.length&&!(l.indexOf(c.substring(p,p+1))>=0);p++)u=u.concat(c.substring(p,p+1));var g=c.indexOf(".");m=((f=g>=0?g:c.length)-p)%3,d=parseInt((f-p)/3);for(var v=0;v<m;v++)u=u.concat(c.substring(p+v,p+v+1));d>0&&m>0&&(u=u.concat(","));for(v=m+p;v<f;v++)u=u.concat(c.substring(v,v+1)),3==++h&&v+1!=f&&(h=0,u=u.concat(","));for(v=f;v<c.length;v++)u=u.concat(c.substring(v,v+1))}else u=n;return i?""+u:u}}return""}function u(e){return isNaN(e)?0:parseFloat((e/100).toFixed(2))}function d(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return t+"-"+a+"-"+r+" "+i+":"+s+":"+(n=n<10?"0"+n:n)}var m=a("/ocq"),p=a("BO1k"),f=a.n(p),h=a("mvHQ"),g=a.n(h),v=a("//Fk"),y=a.n(v),b=a("mtWM"),w=a.n(b),F=void 0;F="test"===Object({NODE_ENV:"production"}).type?"http://13.200.37.118:8080":"/manage",w.a.defaults.timeout=6e4,w.a.defaults.baseURL=F,w.a.defaults.withCredentials=!1,w.a.interceptors.request.use(function(e){return localStorage.getItem("User_Authorization")&&(e.headers.Authorization=localStorage.getItem("User_Authorization")),e},function(e){return y.a.reject(e)}),w.a.interceptors.response.use(function(e){return 444===e.data.code&&da.push("/login"),e});var _=w.a;var x=a("Xxa5"),C=a.n(x),k=a("exGp"),T=a.n(k),I=a("mw3O"),S=a.n(I);function D(e){return _({url:"/cpinfo/addCpInfo",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function L(e){return _({url:"/cpinfo/updateCpInfo",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function N(e){return _({url:"/cpinfo/updateCpInfoAgentId",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function $(e){return _({url:"/cpinfo/updateCpInfoDefaultType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function O(e){return _({url:"/cpinfo/updateCpInfoIp",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function A(e){return _({url:"/cpinfo/changeCpInfoCanOver",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function P(e){return _({url:"/cpinfo/addCpInfoRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function z(e){return _({url:"/cpinfo/subtractCpInfoRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function R(e){return _({url:"/cpinfo/updateCpInfoCredit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function W(e){return _({url:"/cpinfo/changeCpInfoConfirmMin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function B(e){return _({url:"/cpinfo/changeCpInfoCanWithdraw",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function q(e){return _({url:"/cpinfo/changeCpInfoConfirmStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function M(e){return _({url:"/cpinfo/changeCpInfoStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function E(e){return _({url:"/cpinfo/deleteCpInfo",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function V(e){return _({url:"/cpinfo/resetGoogleSecret",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function U(e){return _({url:"/cpinfo/changeWhiteIps",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function H(e){return _({url:"/cpinfo/queryCpInfoSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function j(e){return _({url:"/cpinfo/queryCpInfoByUserName",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function G(e){return _({url:"/dictionary/queryDictionaryPageListByType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function Q(e){return _({url:"/dictionary/queryDictionaryPageListByType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function X(e){return _({url:"/dictionary/queryDictionaryPageListByType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var K=a("XLwt"),Y={name:"Home",created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.countrySelect="IND",t.next=3,e.homeStatistics();case 3:e.fullscreenLoading=!1,e.homeWarningInfo(),e.myChart=K.init(document.getElementById("cpinfoDailyStatistics")),e.myCpinfoHour24Chart=K.init(document.getElementById("cpinfoHour24Statictics")),e.myAmountChart=K.init(document.getElementById("cpinfoDailyAmountStatistics")),e.queryCountryPageList(),e.queryCpInfoByCountrySelectList(),e.cpinfoDailyStatistics(),e.cpinfoHour24Statistics(),e.cpinfoDailyAmountStatistics();case 13:case"end":return t.stop()}},t,e)}))()},data:function(){return{timer:"",value:20,fullscreenLoading:!0,showData:{todayPay:0,todayPayFee:0,todayPayNum:0,todayWithdraw:0,todayWithdrawFee:0,todayWithdrawNum:0,totalPay:0,totalPayFee:0,totalPayNum:0,totalWithdraw:0,totalWithdrawFee:0,totalWithdrawNum:0,yesterdayPay:0,yesterdayPayFee:0,yesterdayPayNum:0,yesterdayWithdraw:0,yesterdayWithdrawFee:0,yesterdayWithdrawNum:0},myChart:{},polar:{title:{text:"今日商户数据展示"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!0,type:"plain",zlevel:1,icon:"circle",top:"5%",right:"5%",width:"auto",height:"auto",orient:"horizontal",align:"auto",padding:5,itemWidth:12,itemGap:20,itemHeight:14,symbolKeepAspect:!0,formatter:function(e){return e},selectedMode:!0,inactiveColor:"#ccc",textStyle:{color:"#556677",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,lineHeight:20,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderRadius:0,padding:0,shadowColor:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"transparent",textBorderWidth:0,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,rich:{a:{color:"red",lineHeight:10},b:{color:"#fff",lineHeight:10}}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"代收",type:"bar",data:[],itemStyle:{normal:{color:"rgb(151,207,124)",label:{show:!0,position:"top",textStyle:{color:"rgb(151,207,124)",fontSize:14},formatter:function(e){return c(100*e.data)}}}}},{name:"代付",type:"bar",data:[],itemStyle:{normal:{color:"#f03e41",label:{show:!0,position:"top",textStyle:{color:"#f03e41",fontSize:14},formatter:function(e){return c(100*e.data)}}}}}],dataZoom:[{type:"inside",disabled:!1,xAxisIndex:0,zoomLock:!0,preventDefaultMouseMove:!1,filterMode:"empty",startValue:0,endValue:4,start:null,end:null}]},myCpinfoHour24Chart:{},cpinfoHour24:{title:{text:"商户24小时数据变化图"},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:{show:!0,type:"plain",zlevel:1,icon:"circle",top:"5%",right:"5%",width:"auto",height:"auto",orient:"horizontal",align:"auto",padding:5,itemWidth:12,itemGap:20,itemHeight:14,symbolKeepAspect:!0,formatter:function(e){return e},selectedMode:!0,inactiveColor:"#ccc",textStyle:{color:"#556677",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,lineHeight:20,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderRadius:0,padding:0,shadowColor:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"transparent",textBorderWidth:0,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,rich:{a:{color:"red",lineHeight:10},b:{color:"#fff",lineHeight:10}}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"代收",type:"line",smooth:!0,data:[],label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{color:"rgb(151,207,124)"}}},{name:"代付",type:"line",smooth:!0,data:[],itemStyle:{normal:{color:"#f03e41"}}}],cpinfo:{country:"",appId:""},dataZoom:[{type:"inside",disabled:!1,xAxisIndex:0,zoomLock:!0,preventDefaultMouseMove:!1,filterMode:"empty",startValue:20,endValue:28,start:null,end:null}]},myAmountChart:{},amountChart:{title:{text:"订单金额分布"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!0,type:"plain",zlevel:1,icon:"circle",top:"5%",right:"5%",width:"auto",height:"auto",orient:"horizontal",align:"auto",padding:1,itemWidth:1,itemGap:2,itemHeight:14,symbolKeepAspect:!0,formatter:function(e){return e},selectedMode:!0,inactiveColor:"#ccc",textStyle:{color:"#556677",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,lineHeight:20,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderRadius:0,padding:0,shadowColor:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"transparent",textBorderWidth:0,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,rich:{a:{color:"red",lineHeight:10},b:{color:"#fff",lineHeight:10}}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"成功",type:"bar",data:[],itemStyle:{normal:{color:"rgb(151,207,124)",label:{show:!0,position:"top",textStyle:{color:"rgb(151,207,124)",fontSize:14},formatter:function(e){return c(100*e.data)}}}}},{name:"失败",type:"bar",data:[],itemStyle:{normal:{color:"#f03e41",label:{show:!0,position:"top",textStyle:{color:"#f03e41",fontSize:14},formatter:function(e){return c(100*e.data)}}}}}],dataZoom:[{type:"inside",disabled:!1,xAxisIndex:0,zoomLock:!0,preventDefaultMouseMove:!1,filterMode:"empty",startValue:0,endValue:10,start:null,end:null}]},warnData:[],options:[],cpInfoOptions:[],countrySelect:"",cpInfoSelect:""}},methods:{homeStatistics:function(){var e,t=this;(e={country:t.countrySelect,appId:t.cpInfoSelect},_({url:"/cpinfo/getHomeStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code&&(t.showData=e.data.data)})},homeWarningInfo:function(){var e=this;return new y.a(function(t){var a;_({url:"/cpinfo/queryCpInfoWarnInfoPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)}).then(function(t){0===t.data.code&&(e.warnData=t.data.data)})})},cpinfoDailyStatistics:function(){var e=this;return new y.a(function(t){var a;(a={country:e.countrySelect,appId:e.cpInfoSelect},_({url:"/cpinfo/getCpInfoDailyStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data,r=[],i=[],s=[],n=!0,o=!1,l=void 0;try{for(var c,u=f()(a);!(n=(c=u.next()).done);n=!0){var d=c.value;r.push(d.appId),i.push(d.payAmount),s.push(d.withdrawAmount)}}catch(e){o=!0,l=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}e.polar.legend.data=t.data.data.legend,e.polar.xAxis[0].data=[],e.polar.series[0].data=[],e.polar.series[1].data=[],e.polar.xAxis[0].data=r,e.polar.series[0].data=i,e.polar.series[1].data=s,e.myCpinfoHour24Chart.setOption(e.polar)}})})},cpinfoHour24Statistics:function(){var e=this;return new y.a(function(t){var a;(a={country:e.countrySelect,appId:e.cpInfoSelect},_({url:"/cpinfo/getCpInfoHour24Statistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data,r=[],i=[],s=[],n=!0,o=!1,l=void 0;try{for(var c,u=f()(a);!(n=(c=u.next()).done);n=!0){var d=c.value;r.push(d.time),i.push(d.payAmount),s.push(d.withdrawAmount)}}catch(e){o=!0,l=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}e.cpinfoHour24.xAxis[0].data=[],e.cpinfoHour24.series[0].data=[],e.cpinfoHour24.series[1].data=[],e.cpinfoHour24.xAxis[0].data=r,e.cpinfoHour24.series[0].data=i,e.cpinfoHour24.series[1].data=s,e.myChart.setOption(e.cpinfoHour24)}})})},cpinfoDailyAmountStatistics:function(){var e=this;return new y.a(function(t){var a;(a={country:e.countrySelect,appId:e.cpInfoSelect},_({url:"/cpinfo/getCpinfoDailyAmountStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;console.log(a),e.amountChart.xAxis[0].data=[],e.amountChart.series[0].data=[],e.amountChart.series[1].data=[];var r=!0,i=!1,s=void 0;try{for(var n,o=f()(a.cpAmountStatVo);!(r=(n=o.next()).done);r=!0){var l=n.value;e.amountChart.xAxis[0].data.push(l.amount_group),e.amountChart.series[0].data.push(l.count),e.amountChart.series[1].data.push(l.failCount)}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}e.myAmountChart.setOption(e.amountChart)}})})},queryCountryPageList:function(){var e=this;return e.options=[],new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.options=[],t.data.data.forEach(function(t,a){e.options.push({label:t.name,value:t.value})}))})})},queryCpInfoByCountrySelectList:function(){var e=this;return new y.a(function(t){H({country:e.countrySelect}).then(function(t){e.cpInfoOptions=[],0===t.data.code&&t.data.data.forEach(function(t,a){e.cpInfoOptions.push({label:t.appId+" "+t.userName,value:t.appId})})})})},changeCountry:function(){this.homeStatistics(),this.cpinfoDailyStatistics(),this.cpinfoHour24Statistics(),this.queryCpInfoByCountrySelectList(),this.cpinfoDailyAmountStatistics()},changeCpInfo:function(){this.homeStatistics(),this.cpinfoDailyStatistics(),this.cpinfoHour24Statistics(),this.cpinfoDailyAmountStatistics()}},mounted:function(){var e=this;this.timer=setInterval(function(){e.homeStatistics(),e.cpinfoDailyStatistics(),e.cpinfoHour24Statistics(),e.cpinfoDailyAmountStatistics},2e4)},beforeDestroy:function(){clearInterval(this.timer)}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[a("div",{staticClass:"header-title"},[e._v("支付管理平台")]),e._v(" "),a("div",{staticClass:"country_select"},[[a("el-select",{staticStyle:{width:"6rem"},attrs:{placeholder:"请选择国家"},on:{change:function(t){return e.changeCountry()}},model:{value:e.countrySelect,callback:function(t){e.countrySelect=t},expression:"countrySelect"}},e._l(this.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"12rem"},attrs:{placeholder:"请选择商户"},on:{change:function(t){return e.changeCpInfo()}},model:{value:e.cpInfoSelect,callback:function(t){e.cpInfoSelect=t},expression:"cpInfoSelect"}},[a("el-option",{attrs:{value:""}},[e._v("请选择商户")]),e._v(" "),e._l(this.cpInfoOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)]],2),e._v(" "),a("el-row",{staticStyle:{"margin-top":"0.5rem"},attrs:{span:24,gutter:12}},[a("div",[a("el-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("div",[a("el-row",[a("el-col",{attrs:{xl:8,lg:8,md:12,sm:12,xs:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("今日")]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收")]),e._v(" "),e.showData.todayPay?a("span",[e._v(e._s(Number(e.showData.todayPay/100).toFixed(2).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收手续费")]),e._v(" "),e.showData.todayPayFee?a("span",[e._v(e._s(Number(e.showData.todayPayFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收订单数")]),e._v(" "),e.showData.todayPayNum?a("span",[e._v(e._s(e.showData.todayPayNum))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付")]),e._v(" "),e.showData.todayWithdraw?a("span",[e._v(e._s(Number(e.showData.todayWithdraw/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付手续费")]),e._v(" "),e.showData.todayWithdrawFee?a("span",[e._v(e._s(Number(e.showData.todayWithdrawFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付订单数")]),e._v(" "),e.showData.todayWithdrawNum?a("span",[e._v(e._s(e.showData.todayWithdrawNum))]):a("span",[e._v("0")])])])],1),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:12,sm:12,xs:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("昨日")]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收")]),e._v(" "),e.showData.yesterdayPay?a("span",[e._v(e._s(Number(e.showData.yesterdayPay/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收手续费")]),e._v(" "),e.showData.yesterdayPayFee?a("span",[e._v(e._s(Number(e.showData.yesterdayPayFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收订单数")]),e._v(" "),e.showData.yesterdayPayNum?a("span",[e._v(e._s(e.showData.yesterdayPayNum))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付")]),e._v(" "),e.showData.yesterdayWithdraw?a("span",[e._v(e._s(Number(e.showData.yesterdayWithdraw/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付手续费")]),e._v(" "),e.showData.yesterdayWithdrawFee?a("span",[e._v(e._s(Number(e.showData.yesterdayWithdrawFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付订单数")]),e._v(" "),e.showData.yesterdayWithdrawNum?a("span",[e._v(e._s(e.showData.yesterdayWithdrawNum))]):a("span",[e._v("0")])])])],1),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:12,sm:12,xs:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("30天")]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收")]),e._v(" "),e.showData.totalPay?a("span",[e._v(e._s(Number(e.showData.totalPay/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收手续费")]),e._v(" "),e.showData.totalPayFee?a("span",[e._v(e._s(Number(e.showData.totalPayFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收订单数")]),e._v(" "),e.showData.totalPayNum?a("span",[e._v(e._s(e.showData.totalPayNum))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付")]),e._v(" "),e.showData.totalWithdraw?a("span",[e._v(e._s(Number(e.showData.totalWithdraw/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付手续费")]),e._v(" "),e.showData.totalWithdrawFee?a("span",[e._v(e._s(Number(e.showData.totalWithdrawFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))]):a("span",[e._v("0")])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付订单数")]),e._v(" "),e.showData.totalWithdrawNum?a("span",[e._v(e._s(e.showData.totalWithdrawNum))]):a("span",[e._v("0")])])])],1)],1)],1)])],1),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:8,sm:8,xs:8}}),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:8,sm:8,xs:8}})],1),e._v(" "),a("el-row",{staticStyle:{"padding-top":"30px"},attrs:{span:24,gutter:12}},[a("div",{staticStyle:{width:"auto",height:"400px"},attrs:{id:"cpinfoDailyStatistics"}})]),e._v(" "),a("el-row",{staticStyle:{"padding-top":"30px"},attrs:{span:24,gutter:12}},[a("div",{staticStyle:{width:"auto",height:"400px"},attrs:{id:"cpinfoHour24Statictics"}})]),e._v(" "),a("el-row",{staticStyle:{"padding-top":"30px"},attrs:{span:24,gutter:12}},[a("div",{staticStyle:{width:"auto",height:"400px"},attrs:{id:"cpinfoDailyAmountStatistics"}})])],1)},staticRenderFns:[]};var J=a("VU/8")(Y,Z,!1,function(e){a("+Y00"),a("mnZh")},"data-v-159895ef",null).exports;function ee(e){return _({url:"/paylog/settlementPayLog",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function te(e){return _({url:"/paylog/queryValidPayLogList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}a("nNlw");function ae(e){return _({url:"/paytype/queryPayTypeSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function re(e){return _({url:"/user/changeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var ie={name:"oneButton",props:{type:{type:String,default:"defalut"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},icon:{type:String,default:""},disabled:{type:Boolean,default:!1},perms:{type:String,default:null},size:{type:String,default:null}},data:function(){return{buttonName:""}},created:function(){},methods:{handleClick:function(e){this.$emit("click",e)},hasPermission:function(e){for(var t=!1,a=JSON.parse(window.sessionStorage.getItem("permissionList")),r=e.split("-"),i=r[0],s=r[1],n=(r[2],0);n<a.length;n++)if(a[n].pValue===i)for(var o=a[n].children,l=0;l<o.length;l++)if(o[l].pValue===s)for(var c=o[l].children,u=0;u<c.length;u++)if(c[u].pValue===e){this.buttonName=c[u].permissName,t=!0;break}return t}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hasPermission(e.perms)?a("button",{staticClass:"one-button ",class:["one-button-"+e.type,{"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle,"is-disabled":e.disabled,"el-button--mini":"mini"===e.size,"el-button--medium":"medium"===e.size}],attrs:{type:"button",disabled:e.disabled},on:{click:e.handleClick}},[e.icon?a("i",{class:""+e.icon}):e._e(),e._v(" "),""!==e.buttonName?a("span",[e._t("default",function(){return[e._v(e._s(e.buttonName))]})],2):e._e()]):e._e()},staticRenderFns:[]};var ne=a("VU/8")(ie,se,!1,function(e){a("4k79")},"data-v-c5548c28",null).exports,oe={name:"payLogList",components:{OneButton:ne},data:function(){return{fullscreenLoading:!1,centerDialogVisible:!1,innerVisible:!1,sendNotifyDrawerVisable:!1,matchUtrDrawerVisible:!1,direction:"rtl",password:"",verifyCode:"",notifyId:"",createTime:[],payTime:[],countryOptions:[],payTypeOptions:[],searchFormOri:{},searchForm:{id:"",appId:"",orderId:"",transactionNum:"",payTypeId:"",type:"",status:"1",status1:"",syncCnt:"",startCreateTime:"",endCreateTime:"",startPayTime:"",endPayTime:"",country:"",clabe:"",rastreo:"",amount:"",page:1,limit:10,rowindex:0},matchUtrForm:{id:"",rastreo:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""}},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}]}},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.searchForm.startCreateTime)var t=new Date(this.searchForm.startCreateTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},pickerOptionsStartPay:{},pickerOptionsEndPay:{disabledDate:function(e){if(this.searchForm.startPayTime)var t=new Date(this.searchForm.startPayTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1,searchStatistics:{needPayAmount:0,payAmount:0,payFee:0,payNum:0},matching:!1}},created:function(){this.searchFormOri=this.searchForm,this.queryAllPayLog(),this.queryCountryPageList(),this.queryAllPaytypeList()},methods:{queryAllPayLog:function(){var e=this;return e.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.createTime?"":this.createTime[0],this.searchForm.endCreateTime=""===this.createTime?"":this.createTime[1],this.searchForm.startPayTime=""===this.payTime?"":this.payTime[0],this.searchForm.endPayTime=""===this.payTime?"":this.payTime[1],new y.a(function(t){var a;(a=e.searchForm,_({url:"/paylog/queryPayLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=[],r=t.data.data.statistics,i=t.data.data.list,s=!0,n=!1,o=void 0;try{for(var l,u=f()(i);!(s=(l=u.next()).done);s=!0){var m=l.value;m.type=(void 0,void 0,C=(x=m).currency,k=x.type,"MXN"===C?1===k?"银行卡":4===k?"Clabe":7===k?"HTML":"":"BRL"===C?1===k?"银行卡":2===k?"电子钱包":4===k?"PIX":"":"INR"===C?1===k?"银行卡":2===k?"电子钱包":3===k?"UPI":"":void 0),m.amount=c(m.amount),m.platformFee=c(m.platformFee),m.thirdFee=c(m.thirdFee);var p=m.status;p=1===p?"成功":0===p?"待处理":"失败",m.status=p;var h=m.status1;h=1===h?"成功":0===h?"待处理":"失败",m.status1=h;var g=m.syncCnt;g=1===g?"同步成功":0===g?"未回调":"同步失败"+-1*g+"次",m.syncCnt=g;var v=m.validStatus;v=1===v?"已结算":"未结算",m.validStatus=v,m.createTime=d(m.createTime),m.payTime=d(m.payTime),a.push(m)}}catch(e){n=!0,o=e}finally{try{!s&&u.return&&u.return()}finally{if(n)throw o}}var y=r.needPayAmount,b=r.payAmount,w=r.payFee,F=r.payNum,_=r.allPayNum;null!==y&&(e.searchStatistics.needPayAmount=c(y)),null!==b&&(e.searchStatistics.payAmount=c(b)),null!==w&&(e.searchStatistics.payFee=c(w)),e.searchStatistics.payNum=F,0!==Number(_)?e.searchStatistics.rate=Math.floor(Number(F)/Number(_)*100).toFixed(2)+"%":e.searchStatistics.rate="总单数为0",e.tableData=a,e.total=_,e.fullscreenLoading=!1}var x,C,k})})},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},queryAllPaytypeList:function(){var e=this;ae().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;e.payTypeOptions.push({label:l.name,value:l.id})}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}})},search:function(){this.queryAllPayLog()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[],this.payTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryAllPayLog()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},changeStatus:function(e){this.centerDialogVisible=!0,this.notifyId=e.row.id},checkPassword:function(){var e,t=this;(e={password:t.password},_({url:"/user/checkPassword",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?t.innerVisible=!0:t.$message("CHECK PSSWORD FAIL")})},checkVerifyCode:function(){var e,t=this;(e={verifyCode:t.verifyCode},_({url:"/user/checkVerifyCode",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){var a;0===e.data.code?(a={id:t.notifyId},_({url:"/paylog/changePayLogStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){console.log(e.data),0===e.data.code&&(t.$message(e.data.msg),t.notifyId="",t.centerDialogVisible=!1,t.innerVisible=!1,t.queryAllPayLog())}):t.$message("VERIFY FAIL")})},handleClose:function(e){e()},handleSizeChange:function(e){this.searchForm.limit=e,this.queryAllPayLog()},openSendNotifyMsgDrawer:function(e){var t,a=this;(t={id:e.id},_({url:"/paylog/sendNotifyMsg",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){a.$message(e.data.msg),0!==e.data.code&&-1!==e.data.code||a.queryAllPayLog(),a.sending=!1})},openMatchUtrDrawer:function(e){"INR"===e.row.currency&&(this.matchUtrForm.id=e.row.id,this.matchUtrDrawerVisible=!0)},closeMatchUtrDrawer:function(){this.matchUtrForm.id="",this.matchUtrForm.utr="",this.matchUtrDrawerVisible=!1},matchUtr:function(){var e,t=this;(e=this.matchUtrForm,_({url:"/paylog/matchUtr",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){var a=e.data;0===a.code&&(t.closeMatchUtrDrawer(),t.queryAllPayLog()),t.$message(a.msg)})}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"系统订单号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户订单号",prop:"orderId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"三方订单号",prop:"transactionNum"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.transactionNum,callback:function(t){e.$set(e.searchForm,"transactionNum",t)},expression:"searchForm.transactionNum"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"实际状态",prop:"status1"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status1,callback:function(t){e.$set(e.searchForm,"status1",t)},expression:"searchForm.status1"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.payTypeId,callback:function(t){e.$set(e.searchForm,"payTypeId",t)},expression:"searchForm.payTypeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"同步状态",prop:"syncCnt"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.syncCnt,callback:function(t){e.$set(e.searchForm,"syncCnt",t)},expression:"searchForm.syncCnt"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"同步成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未回调",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败重试",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"金额",prop:"amount"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.amount,callback:function(t){e.$set(e.searchForm,"amount",t)},expression:"searchForm.amount"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:10,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"支付时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartPay},model:{value:e.payTime,callback:function(t){e.payTime=t},expression:"payTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("one-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary",perms:"log-payLogList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{"margin-left":"30px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statistics-span"},[e._v("\n                            订单总额："+e._s(e.searchStatistics.needPayAmount)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statistics-span"},[e._v("\n                            实收订单总额："+e._s(e.searchStatistics.payAmount)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statistics-span"},[e._v("\n                            实收手续费："+e._s(e.searchStatistics.payFee)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statistics-span"},[e._v("\n                            实收订单数："+e._s(e.searchStatistics.payNum)+"\n                        ")])])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statistics-span"},[e._v("\n                            成功率："+e._s(e.searchStatistics.rate)+"\n                        ")])])])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"结算状态"}},[a("span",[e._v(e._s(t.row.validStatus))])]),e._v(" "),a("el-form-item",{attrs:{label:"结算日期"}},[a("span",[e._v(e._s(t.row.validDay))])]),e._v(" "),a("el-form-item",{attrs:{label:"跳转地址"}},[a("span",[e._v(e._s(t.row.callbackUrl))])]),e._v(" "),a("el-form-item",{attrs:{label:"回调地址"}},[a("span",[e._v(e._s(t.row.notifyUrl))])]),e._v(" "),a("el-form-item",{attrs:{label:"Ip"}},[a("span",[e._v(e._s(t.row.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("span",[e._v(e._s(t.row.description))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"下游订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transactionNum",label:"第三方订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"platformFee",label:"商户手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdFee",label:"第三方手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTypeName",label:"充值通道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"充值类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["成功"===t.row.status?a("span",{staticStyle:{color:"red","font-weight":"bolder"}},[e._v(e._s(t.row.status))]):a("span",{staticStyle:{color:"#606972"}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"实际状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["成功"===t.row.status1?a("span",{staticStyle:{color:"red","font-weight":"bolder"}},[e._v(e._s(t.row.status1))]):a("span",{staticStyle:{color:"#606972"}},[e._v(e._s(t.row.status1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"syncCnt",label:"回调状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTime",label:"支付时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"用户ip"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return["待处理"===t.row.status?a("one-button",{attrs:{type:"danger",round:"",size:"mini",perms:"log-payLogList-receive"},on:{click:function(a){return e.changeStatus(t)}}}):e._e(),e._v(" "),"待处理"!==t.row.status||101!==t.row.payTypeId&&102!==t.row.payTypeId?e._e():a("el-button",{attrs:{type:"danger",round:"",size:"mini"},on:{click:function(a){return e.openMatchUtrDrawer(t)}}},[e._v("人工补单\n            ")]),e._v(" "),a("one-button",{attrs:{disabled:"待处理"===t.row.status,type:"success",round:"",size:"mini",perms:"log-payLogList-notify"},on:{click:function(a){return e.openSendNotifyMsgDrawer(t.row)},change:function(e){}}})]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"请输入密码",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-dialog",{attrs:{width:"30%",title:"请输入验证码",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),a("el-button",{on:{click:function(t){e.innerVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkVerifyCode()}}},[e._v("确 定")])],1),e._v(" "),a("el-input",{attrs:{placeholder:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkPassword()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-drawer",{staticStyle:{"overflow-y":"auto"},attrs:{visible:e.sendNotifyDrawerVisable,direction:e.direction,"before-close":e.handleClose,"close-on-click-modal":!1,"show-close":!1,"custom-class":"demo-drawer",size:"50%"},on:{"update:visible":function(t){e.sendNotifyDrawerVisable=t}}},[a("div",{staticStyle:{padding:"20px"}},[a("el-form",[a("el-form-item",{attrs:{label:"回调单号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.id,callback:function(t){e.$set(e.sendNotifyMsgForm,"id",t)},expression:"sendNotifyMsgForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.url,callback:function(t){e.$set(e.sendNotifyMsgForm,"url",t)},expression:"sendNotifyMsgForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调数据","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyData,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyData",t)},expression:"sendNotifyMsgForm.notifyData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调响应","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:12,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyResp,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyResp",t)},expression:"sendNotifyMsgForm.notifyResp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调分析","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:3,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyAnalyze,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyAnalyze",t)},expression:"sendNotifyMsgForm.notifyAnalyze"}})],1)],1),e._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{attrs:{disable:e.sending,type:"success"},on:{click:function(t){return e.sendNotifyMsg(e.sendNotifyMsgForm.id)}}},[e._v(e._s(e.sending?"发送中...":"发送")+"\n          ")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelNotifyMsgDrawer()}}},[e._v("取 消")])],1)],1)]),e._v(" "),a("el-drawer",{staticStyle:{"overflow-y":"auto"},attrs:{visible:e.matchUtrDrawerVisible,direction:e.direction,"before-close":e.handleClose,"close-on-click-modal":!1,"show-close":!1,"custom-class":"demo-drawer",size:"50%"},on:{"update:visible":function(t){e.matchUtrDrawerVisible=t}}},[a("div",{staticStyle:{padding:"20px"}},[a("el-form",[a("el-form-item",{attrs:{label:"UTR","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchUtrForm.rastreo,callback:function(t){e.$set(e.matchUtrForm,"rastreo",t)},expression:"matchUtrForm.rastreo"}})],1)],1),e._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{attrs:{disable:e.matching,type:"success"},on:{click:function(t){return e.matchUtr()}}},[e._v(e._s(e.matching?"匹配中...":"确认")+"\n          ")]),e._v(" "),a("el-button",{on:{click:function(t){return e.closeMatchUtrDrawer()}}},[e._v("取 消")])],1)],1)])],1)},staticRenderFns:[]};var ce=a("VU/8")(oe,le,!1,function(e){a("Dir5")},null,null).exports,ue=a("c/Tr"),de=a.n(ue);function me(e){return _({url:"/withdrawtype/queryWithdrawTypeSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var pe={name:"withdrawLogList",components:{OneButton:ne},data:function(){return{yesloading:!1,multipleSelection:[],fullscreenLoading:!1,sendNotifyDrawerVisable:!1,direction:"rtl",createTime:[],withdrawTime:[],countryOptions:[],searchForm:{id:"",appId:"",orderId:"",bankCardNo:"",pixKey:"",cpf:"",transactionNum:"",withdrawTypeId:"",type:"",status:"",syncCnt:"",confirmStatus:"",startCreateTime:"",endCreateTime:"",startWithdrawTime:"",endWithdrawTime:"",country:"",page:1,limit:10,rowIndex:0},searchStatictics:{totalWithdrawAmount:0,totalWithdrawNum:0,totalWithdrawSuccessAmount:0,totalWithdrawSuccessFee:0,totalWithdrawSuccessNum:0,totalWithdrawProcessAmount:0,totalWithdrawFailAmount:0},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{appId:0,UserName:"",UserPass:"",checkPass:"",PhoneNo:"",payRange:"",withdrawRange:"",SubRatio:0,RemainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",AgentpayFeeFix:"0",AgentpayFeeRate:"0",AgentwithdrawFeeFix:"0",AgentwithdrawFeeRate:"0",platformId:"",country:""},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""}},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}]}},tableData:[],total:0,dateStart:"",dateEnd:"",pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.searchForm.startCreateTime)var t=new Date(this.searchForm.startCreateTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},pickerOptionsStartPay:{},pickerOptionsEndPay:{disabledDate:function(e){if(this.searchForm.startWithdrawTime)var t=new Date(this.searchForm.startWithdrawTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},withdrawTypeOptions:[],sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1,showCheckBox:!0,showExtra:!1,createAdminWithdrawDrawerVisible:!1,adminWithdrawForm:{country:"COL",type:"1",appId:1e4,amount:0,bankAccountName:"",bankCardNo:"",bankCode:"",branchCode:"",documentId:"",documentType:"CC",accountType:"",verifyCode:""},adminWithdrawRule:{country:[{required:!0,message:"请选择国家",trigger:"change"}],type:[{required:!0,message:"请选择提现方式",trigger:"change"}],appId:[{required:!0,message:"请输入商户id",trigger:"change"}],bankCode:[{required:!0,message:"请输入银行编号",trigger:"blur"}],amount:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("金额不能为空"));setTimeout(function(){/^[0-9]+(.[0-9]{1,2})?$/.test(t)?a():a(new Error("金额格式错误，仅支持最多保留两位小数。"))},1e3)},trigger:"blur"}],bankCardNo:[{required:!0,message:"请输入账号",trigger:"blur"}],documentId:[{required:!0,message:"请输入证号",trigger:"blur"}]},creatingAdminWithdraw:!1,manualUploadCallbackDrawerVisible:!1,uploadCallbackTableKey:999,uploadCallbackFlag:!1,uploadCallbackList:[],yesmanualUploadCallbackDrawerVisible:!1,yesuploadCallbackTableKey:888,yesuploadCallbackFlag:!1,yesuploadCallbackList:[],submitCallbackTableKey:777,submitCallbackFlag:!1,submitCallbackList:[]}},created:function(){this.queryAllWithdrawLog(),this.queryCountryPageList(),this.queryAllWithdrawTypeList()},methods:{submitYesBank:function(){var e=this,t=this;t.multipleSelection.length<1?t.$message({message:"至少选择一条数据提交",type:"warning"}):this.$confirm("确定提交所选数据进行状态修改 ？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;t.yesloading=!0,(a=e.multipleSelection,_({url:"/withdrawlog/yesmanualSubmit",method:"post",headers:{"Content-Type":"application/json"},data:g()(a)})).then(function(e){if(null!==e){var a=e.data.code,r=e.data.msg;t.$message(r),0===a?(t.$message({message:"提交完成，请查看具体信息",type:"success"}),t.submitCallbackFlag=!0,t.submitCallbackList=e.data.data.list):t.$message.error(r)}t.yesloading=!1})}).catch(function(e){})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},queryAllWithdrawLog:function(){var e,t=this;t.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.createTime||null===this.createTime?"":this.createTime[0],this.searchForm.endCreateTime=""===this.createTime||null===this.createTime?"":this.createTime[1],this.searchForm.startWithdrawTime=""===this.withdrawTime||null===this.withdrawTime?"":this.withdrawTime[0],this.searchForm.endWithdrawTime=""===this.withdrawTime||null===this.withdrawTime?"":this.withdrawTime[1],(e=t.searchForm,_({url:"/withdrawlog/queryWithdrawLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=[],r=e.data.data.list,i=e.data.data.statictics,s=!0,n=!1,o=void 0;try{for(var l,u=f()(r);!(s=(l=u.next()).done);s=!0){var m=l.value;m.type=(void 0,void 0,C=(x=m).currency,k=x.type,"MXN"===C?1===k?"银行卡":4===k?"Clabe":"":"BRL"===C?1===k?"银行卡":2===k?"电子钱包":4===k?"PIX":"":"INR"===C?1===k?"银行卡":2===k?"电子钱包":3===k?"UPI":"":void 0),m.amount=c(m.amount),m.platformFee=c(m.platformFee),m.thirdFee=c(m.thirdFee);var p=m.status;p=2===p?"成功":-2===p?"失败":-1===p?"失败重试":0===p?"待处理":"处理中",m.status=p;var h=m.syncCnt;h=1===h?"同步成功":0===h?"未回调":"同步失败"+-1*h+"次",m.syncCnt=h,m.createTime=d(m.createTime),m.withdrawTime=d(m.withdrawTime),a.push(m)}}catch(e){n=!0,o=e}finally{try{!s&&u.return&&u.return()}finally{if(n)throw o}}t.tableData=a;var g=i.totalWithdrawAmount;t.searchStatictics.totalWithdrawAmount=c(g);var v=i.totalWithdrawSuccessAmount;t.searchStatictics.totalWithdrawSuccessAmount=c(v);var y=i.totalWithdrawSuccessFee;t.searchStatictics.totalWithdrawSuccessFee=c(y);var b=i.totalWithdrawSuccessNum;t.searchStatictics.totalWithdrawSuccessNum=b;var w=i.totalWithdrawProcessAmount;t.searchStatictics.totalWithdrawProcessAmount=c(w);var F=i.totalWithdrawFailAmount;t.searchStatictics.totalWithdrawFailAmount=c(F);var _=i.totalWithdrawNum;t.searchStatictics.rate=0!==_?Math.floor(Number(b)/Number(_)*100).toFixed(2)+"%":"总单数为0",t.total=_,t.fullscreenLoading=!1}var x,C,k})},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},search:function(){this.queryAllWithdrawLog()},resetForm:function(e){this.$refs.searchForm.resetFields(),this.createTime=[],this.withdrawTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryAllWithdrawLog()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0},queryAllWithdrawTypeList:function(){var e=this;me().then(function(t){if(0===t.data.code){e.withdrawTypeOptions=[],console.log(t.data.data);var a=t.data.data,r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;e.withdrawTypeOptions.push({label:l.name,value:l.id})}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}})},changeStatus:function(e){var t=this;this.$confirm("回调当前代付订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t;(a={id:e.id},_({url:"/withdrawlog/changeWithdrawLogStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){0===e.data.code&&r.queryAllWithdrawLog()})})},openSendNotifyMsgDrawer:function(e){var t,a=this;(t={id:e.id},_({url:"/withdrawlog/sendNotifyMsg",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){0!==e.data.code&&-1!==e.data.code||a.queryAllWithdrawLog(),a.sending=!1})},sendNotifyMsg:function(e){var t=this;return t.sending=!0,new y.a(function(a){axios({method:"post",url:"../withdrawlog/sendNotifyMsg",data:"id="+e}).then(function(e){if(0===e.data.code||-1===e.data.code){var a=e.data.data;t.sendNotifyMsgForm.notifyData=g()(a.notifyData),t.sendNotifyMsgForm.notifyResp=a.notifyResp,a.notifyResp+""=="SUCCESS"?(t.sendNotifyMsgForm.notifyAnalyze="回调通知发送成功，收到对方处理完回调数据响应，同步成功。",t.queryAllWithdrawLog()):t.sendNotifyMsgForm.notifyAnalyze='回调异常，对方响应错误。错误可能原因：1.对方收到回调数据，对方未处理或处理完数据没有返回大写"SUCCESS"。2.回调地址错误，对方未收到回调数据。解决方法：1.确认商户回调地址是否正确。2.若回调地址无误，和商户确认是否接收到回调数据。3.若商户收到我方的回调请求，却未接收到回调数据，让商户尝试更换适合JSON数据的接收方式。4.若商户需要回调数据进行测试，可复制上方回调数据发送给商户。5.商户确认修改无误后可再次尝试补发回调通知。'}t.sending=!1})})},handleClose:function(e){e()},cancelNotifyMsgDrawer:function(){this.sendNotifyDrawerVisable=!1,this.sendNotifyMsgForm.notifyData="",this.sendNotifyMsgForm.notifyResp="",this.sendNotifyMsgForm.notifyAnalyze=""},batchPassWithdrawLog:function(){var e=[];e=de()(this.$refs.multipleTable.selection,function(e){return e.id}),this.pass(e.toString())},singlePassWithdrawLog:function(e){this.pass(e)},batchRejectWithdrawLog:function(){var e=[];e=de()(this.$refs.multipleTable.selection,function(e){return e.id}),this.reject(e.toString())},singleRejectWithdrawLog:function(e){this.reject(e)},pass:function(e){var t=this;this.$confirm("审核通过代付订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t;t.fullscreenLoading=!0,(a={ids:e},_({url:"/withdrawlog/updateWithdrawLogConfirmStatusPass",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){e.data.code,r.$message(e.data.msg),r.queryAllWithdrawLog()})})},reject:function(e){var t=this;this.$confirm("审核驳回代付订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t;t.fullscreenLoading=!0,(a={ids:e},_({url:"/withdrawlog/updateWithdrawLogConfirmStatusReject",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){e.data.code,r.$message(e.data.msg),r.queryAllWithdrawLog()})})},handleSizeChange:function(e){this.searchForm.limit=e,this.queryAllWithdrawLog()},createAdminWithdrawDrawerHandleClose:function(){this.createAdminWithdrawDrawerVisible=!1},createAdminWithdrawLog:function(){var e=this,t=this;t.$refs.adminWithdrawForm.validate(function(a){if(!a)return!1;e.$confirm("确认创建订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;t.creatingAdminWithdraw=!0,_({url:"/withdrawlog/getWithdrawLogToken",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)}).then(function(e){var a,r;if(0===e.data.code){var i=e.data.data;(a=i,r=t.adminWithdrawForm,_({url:"/withdrawlog/addAdminWithdrawLogColombia",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",withdrawToken:a},data:S.a.stringify(r)})).then(function(e){if(null!==e){var a=e.data.code,r=e.data.msg;t.$message(r),0===a&&(t.queryAllWithdrawLog(),t.adminWithdrawForm.amount=0,t.adminWithdrawForm.bankAccountName="",t.adminWithdrawForm.bankCardNo="",t.adminWithdrawForm.bankCode="",t.adminWithdrawForm.branchCode="",t.adminWithdrawForm.documentId="",t.adminWithdrawForm.documentType=""),t.creatingAdminWithdraw=!1}})}})}).catch(function(){e.$message({type:"info",message:"取消创建"})})})},manualUploadCallbackDrawerOpenHandle:function(){this.manualUploadCallbackDrawerVisible=!0},manualUploadCallbackCloseHandle:function(){return!1},manualUploadCallbackDrawerCloseHandle:function(){this.manualUploadCallbackDrawerVisible=!1;var e=this;this.uploadCallbackFlag=!1,this.uploadCallbackList=[],e.$nextTick(function(){e.$refs.uploadImgs.clearFiles()})},manualUploadHandle:function(e,t){var a=this;this.$confirm("确定要上传文件 "+e.name+" 么？点击确定按钮将会直接上传回调。",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,r=new FormData;r.append("file",e.raw),(t=r,_({url:"/withdrawlog/manualUploadCallback",method:"post",data:t})).then(function(e){if(null!==e){var t=e.data.code,r=e.data.msg;a.$message(r),0===t?(a.$message({message:"上传处理完成，请查看具体信息",type:"success"}),a.uploadCallbackFlag=!0,a.uploadCallbackList=e.data.data.list):a.$message.error("上传失败")}})}).catch(function(e){a.$nextTick(function(){a.$refs.uploadImgs.clearFiles()})})},fileSizeErrorHandle:function(e,t){this.$message({type:"warn",message:"一次只能上传一个文件"})},yesmanualUploadCallbackDrawerOpenHandle:function(){this.yesmanualUploadCallbackDrawerVisible=!0},yesmanualUploadCallbackCloseHandle:function(){return!1},yesmanualUploadCallbackDrawerCloseHandle:function(){this.yesmanualUploadCallbackDrawerVisible=!1;var e=this;e.yesuploadCallbackFlag=!1,e.yesuploadCallbackList=[],e.multipleSelection=[],e.submitCallbackFlag=!1,e.submitCallbackList=[],e.yesloading=!1,e.$nextTick(function(){e.$refs.uploadExcel.clearFiles()})},yesmanualUploadHandle:function(e,t){var a=this;this.$confirm("确定要上传文件 "+e.name+" 么？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.yesloading=!0;var t,r=new FormData;r.append("file",e.raw),(t=r,_({url:"/withdrawlog/yesmanualUploadCallback",method:"post",data:t})).then(function(e){if(null!==e){var t=e.data.code,r=e.data.msg;a.$message(r),0===t?(a.yesuploadCallbackFlag=!0,a.yesuploadCallbackList=e.data.data.list):a.$message.error(r)}a.yesloading=!1})}).catch(function(e){a.$nextTick(function(){a.$refs.uploadExcel.clearFiles()})})},yesfileSizeErrorHandle:function(e,t){this.$message({type:"warn",message:"一次只能上传一个文件"})}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[[a("div",[a("el-row",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"系统订单号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"商户订单号",prop:"orderId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"三方订单号",prop:"transactionNum"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.transactionNum,callback:function(t){e.$set(e.searchForm,"transactionNum",t)},expression:"searchForm.transactionNum"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"成功",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"处理中",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败重试",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"失败",value:"-2"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"商户",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.bankCardNo,callback:function(t){e.$set(e.searchForm,"bankCardNo",t)},expression:"searchForm.bankCardNo"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"CPF",prop:"cpf"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.cpf,callback:function(t){e.$set(e.searchForm,"cpf",t)},expression:"searchForm.cpf"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"Pix账号",prop:"pixKey"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.pixKey,callback:function(t){e.$set(e.searchForm,"pixKey",t)},expression:"searchForm.pixKey"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"通道",prop:"withdrawTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.withdrawTypeId,callback:function(t){e.$set(e.searchForm,"withdrawTypeId",t)},expression:"searchForm.withdrawTypeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.withdrawTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"同步状态",prop:"syncCnt"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.syncCnt,callback:function(t){e.$set(e.searchForm,"syncCnt",t)},expression:"searchForm.syncCnt"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"同步成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未回调",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败重试",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"审核状态",prop:"confirmStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.confirmStatus,callback:function(t){e.$set(e.searchForm,"confirmStatus",t)},expression:"searchForm.confirmStatus"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"通过",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"驳回",value:"-1"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"代付时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartPay},model:{value:e.withdrawTime,callback:function(t){e.withdrawTime=t},expression:"withdrawTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("one-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary",perms:"log-withdrawLogList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置\n              ")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-plus",type:"warning"},on:{click:function(t){e.showExtra=!e.showExtra}}},[e._v("\n                展开\n              ")]),e._v(" "),e.showExtra?a("one-button",{attrs:{size:"medium",icon:"el-icon-check",type:"warning",perms:"log-withdrawLogList-batchPass"},on:{click:e.batchPassWithdrawLog}}):e._e(),e._v(" "),e.showExtra?a("one-button",{attrs:{size:"medium",icon:"el-icon-close",type:"warning",perms:"log-withdrawLogList-batchReject"},on:{click:e.batchRejectWithdrawLog}}):e._e(),e._v(" "),a("one-button",{staticStyle:{float:"right"},attrs:{perms:"log-withdrawLogList-add"},on:{click:function(t){e.createAdminWithdrawDrawerVisible=!0}}}),e._v(" "),a("one-button",{staticStyle:{float:"right"},attrs:{perms:"log-withdrawLogList-operateBatchSuccess"},on:{click:function(t){return e.manualUploadCallbackDrawerOpenHandle()}}}),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:function(t){return e.yesmanualUploadCallbackDrawerOpenHandle()}}},[e._v("YESBANK手动代付-批量回调\n              ")])],1)],1)],1),e._v(" "),a("el-row",[a("div",{staticStyle:{"margin-left":"30px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                            提单总额："+e._s(e.searchStatictics.totalWithdrawAmount)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                            成功总额："+e._s(e.searchStatictics.totalWithdrawSuccessAmount)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                            成功手续费："+e._s(e.searchStatictics.totalWithdrawSuccessFee)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:3,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                            成功订单数："+e._s(e.searchStatictics.totalWithdrawSuccessNum)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statistics-span"},[e._v("\n                            成功率："+e._s(e.searchStatictics.rate)+"\n                        ")])])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                            处理中总额："+e._s(e.searchStatictics.totalWithdrawProcessAmount)+"\n                        ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                            失败总额："+e._s(e.searchStatictics.totalWithdrawFailAmount)+"\n                        ")])])])],1)],1)]),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"},on:{"selection-change":e.handleSelectionChange}},[e.showCheckBox?a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"expand",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"第三方单号"}},[a("span",[e._v(e._s(t.row.transactionNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"第三方手续费"}},[a("span",[e._v(e._s(t.row.thirdFee))])]),e._v(" "),a("el-form-item",{attrs:{label:"代理商"}},[a("span",[e._v(e._s(t.row.agentName))])]),e._v(" "),a("el-form-item",{attrs:{label:"回调地址"}},[a("span",[e._v(e._s(t.row.notifyUrl))])]),e._v(" "),a("el-form-item",{attrs:{label:"ip"}},[a("span",[e._v(e._s(t.row.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("span",[e._v(e._s(t.row.bankAccountName))])]),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("span",[e._v(e._s(t.row.email))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("span",[e._v(e._s(t.row.mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"失败原因"}},[a("span",[e._v(e._s(t.row.failReason))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"订单号",fixed:"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"下游订单号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"platformFee",label:"商户手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"提现通道",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"到账类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankCardNo",label:"银行账号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankCode",label:"银行编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"branchCode",label:"分行编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pixKey",label:"Pix账号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"documentId",label:"Cpf",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"订单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["成功"===t.row.status?a("span",{staticStyle:{color:"red","font-weight":"bolder"}},[e._v(e._s(t.row.status))]):a("span",{staticStyle:{color:"#606972"}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"syncCnt",label:"回调状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"审核状态",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.confirmStatus&&"成功"!==t.row.status&&"失败"!==t.row.status?a("span",{staticClass:"log-confirm-success"},[a("one-button",{staticStyle:{"border-radius":"12px","text-decoration":"none",color:"#21BA45","font-size":"0.88rem","font-weight":"bolder"},attrs:{perms:"log-withdrawLogList-pass"},on:{click:function(a){return e.singlePassWithdrawLog(t.row.id)}}})],1):e._e(),e._v(" "),0===t.row.confirmStatus&&"成功"!==t.row.status&&"失败"!==t.row.status?a("span",{staticClass:"log-confirm-fail"},[a("one-button",{staticStyle:{"border-radius":"12px","text-decoration":"none",color:"#21BA45","font-size":"0.88rem","font-weight":"bolder"},attrs:{perms:"log-withdrawLogList-reject"},on:{click:function(a){return e.singleRejectWithdrawLog(t.row.id)}}})],1):e._e(),e._v(" "),1===t.row.confirmStatus?a("span",{staticClass:"log-confirm-success"},[e._v("\n                                已通过\n                            ")]):e._e(),e._v(" "),-1===t.row.confirmStatus?a("span",{staticClass:"log-confirm-fail"},[e._v("\n                                已驳回\n                            ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawTime",label:"提现时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return["待处理"!==t.row.status&&"处理中"!==t.row.status||0!==t.row.confirmStatus&&1!==t.row.confirmStatus?e._e():a("one-button",{attrs:{type:"danger",round:"",perms:"log-withdrawLogList-withdrawSuccess"},on:{click:function(a){return e.changeStatus(t.row)},change:function(e){}}}),e._v(" "),a("one-button",{attrs:{disabled:"成功"!==t.row.status&&"失败"!==t.row.status,type:"success",round:"",perms:"log-withdrawLogList-notify"},on:{click:function(a){return e.openSendNotifyMsgDrawer(t.row)},change:function(e){}}})]}}])})],1)],1),e._v(" "),a("el-row",[a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":[10,20,50,100,200],"page-size":e.searchForm.limit,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)]),e._v(" "),a("el-row",[a("el-drawer",{staticStyle:{"overflow-y":"auto"},attrs:{visible:e.sendNotifyDrawerVisable,direction:e.direction,"before-close":e.handleClose,"close-on-click-modal":!1,"show-close":!1,"custom-class":"demo-drawer",size:"50%"},on:{"update:visible":function(t){e.sendNotifyDrawerVisable=t}}},[a("div",{staticStyle:{padding:"20px"}},[a("el-form",[a("el-form-item",{attrs:{label:"回调单号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.id,callback:function(t){e.$set(e.sendNotifyMsgForm,"id",t)},expression:"sendNotifyMsgForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.url,callback:function(t){e.$set(e.sendNotifyMsgForm,"url",t)},expression:"sendNotifyMsgForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调数据","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyData,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyData",t)},expression:"sendNotifyMsgForm.notifyData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调响应","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:12,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyResp,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyResp",t)},expression:"sendNotifyMsgForm.notifyResp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调分析","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:3,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyAnalyze,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyAnalyze",t)},expression:"sendNotifyMsgForm.notifyAnalyze"}})],1)],1),e._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{attrs:{disable:e.sending,type:"success"},on:{click:function(t){return e.sendNotifyMsg(e.sendNotifyMsgForm.id)}}},[e._v("\n                  "+e._s(e.sending?"发送中...":"发送")+"\n                ")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelNotifyMsgDrawer()}}},[e._v("取 消")])],1)],1)]),e._v(" "),a("el-drawer",{attrs:{title:"创建提现订单",visible:e.createAdminWithdrawDrawerVisible,direction:"rtl",size:"40%","before-close":e.createAdminWithdrawDrawerHandleClose},on:{"update:visible":function(t){e.createAdminWithdrawDrawerVisible=t}}},[a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px"}},[a("el-form",{ref:"adminWithdrawForm",staticStyle:{width:"100%"},attrs:{rules:e.adminWithdrawRule,model:e.adminWithdrawForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adminWithdrawForm.country,callback:function(t){e.$set(e.adminWithdrawForm,"country",t)},expression:"adminWithdrawForm.country"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adminWithdrawForm.type,callback:function(t){e.$set(e.adminWithdrawForm,"type",t)},expression:"adminWithdrawForm.type"}},["COL"===e.adminWithdrawForm.country?a("el-option",{attrs:{label:"银行账号",value:"1"}}):e._e(),e._v(" "),"COL"===e.adminWithdrawForm.country?a("el-option",{attrs:{label:"Powwi",value:"2"}}):e._e(),e._v(" "),"MEX"===e.adminWithdrawForm.country?a("el-option",{attrs:{label:"银行卡",value:"1"}}):e._e(),e._v(" "),"MEX"===e.adminWithdrawForm.country?a("el-option",{attrs:{label:"clabe",value:"2"}}):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商户",prop:"appId"}},[a("el-input",{model:{value:e.adminWithdrawForm.appId,callback:function(t){e.$set(e.adminWithdrawForm,"appId",t)},expression:"adminWithdrawForm.appId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"金额",prop:"amount"}},[a("el-input",{model:{value:e.adminWithdrawForm.amount,callback:function(t){e.$set(e.adminWithdrawForm,"amount",t)},expression:"adminWithdrawForm.amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.adminWithdrawForm.bankAccountName,callback:function(t){e.$set(e.adminWithdrawForm,"bankAccountName",t)},expression:"adminWithdrawForm.bankAccountName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.adminWithdrawForm.email,callback:function(t){e.$set(e.adminWithdrawForm,"email",t)},expression:"adminWithdrawForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:e.adminWithdrawForm.mobile,callback:function(t){e.$set(e.adminWithdrawForm,"mobile",t)},expression:"adminWithdrawForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款账号",prop:"bankCardNo"}},[a("el-input",{model:{value:e.adminWithdrawForm.bankCardNo,callback:function(t){e.$set(e.adminWithdrawForm,"bankCardNo",t)},expression:"adminWithdrawForm.bankCardNo"}})],1),e._v(" "),"2"!==e.adminWithdrawForm.type||"COL"!==e.adminWithdrawForm.country?a("el-form-item",{attrs:{label:"收款银行",prop:"bankCode"}},[a("el-input",{model:{value:e.adminWithdrawForm.bankCode,callback:function(t){e.$set(e.adminWithdrawForm,"bankCode",t)},expression:"adminWithdrawForm.bankCode"}})],1):e._e(),e._v(" "),"IND"===e.adminWithdrawForm.country?a("el-form-item",{attrs:{label:"支行"}},[a("el-input",{model:{value:e.adminWithdrawForm.branchCode,callback:function(t){e.$set(e.adminWithdrawForm,"branchCode",t)},expression:"adminWithdrawForm.branchCode"}})],1):e._e(),e._v(" "),"COL"===e.adminWithdrawForm.country&&"1"===e.adminWithdrawForm.type?a("el-form-item",{attrs:{label:"证件类型"}},[a("el-select",{attrs:{placeholder:"证件类型"},model:{value:e.adminWithdrawForm.documentType,callback:function(t){e.$set(e.adminWithdrawForm,"documentType",t)},expression:"adminWithdrawForm.documentType"}},[a("el-option",{attrs:{label:"CC",value:"CC"}}),e._v(" "),a("el-option",{attrs:{label:"CE",value:"CE"}}),e._v(" "),a("el-option",{attrs:{label:"NIT",value:"NIT"}})],1)],1):e._e(),e._v(" "),"COL"===e.adminWithdrawForm.country&&"1"===e.adminWithdrawForm.type?a("el-form-item",{attrs:{label:"证件号",prop:"documentId"}},[a("el-input",{model:{value:e.adminWithdrawForm.documentId,callback:function(t){e.$set(e.adminWithdrawForm,"documentId",t)},expression:"adminWithdrawForm.documentId"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{model:{value:e.adminWithdrawForm.verifyCode,callback:function(t){e.$set(e.adminWithdrawForm,"verifyCode",t)},expression:"adminWithdrawForm.verifyCode"}})],1),e._v(" "),a("el-form-item",[e.creatingAdminWithdraw?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.createAdminWithdrawLog}},[e._v("立即创建\n                  ")]),e._v(" "),e.creatingAdminWithdraw?a("el-button",{attrs:{type:"primary",disabled:""}},[a("i",{staticClass:"el-icon-loading"}),e._v("创建中\n                  ")]):e._e(),e._v(" "),a("el-button",{on:{click:e.createAdminWithdrawDrawerHandleClose}},[e._v("取消")])],1)],1)],1)]),e._v(" "),a("el-drawer",{attrs:{title:"手动代付-批量回调","show-close":!1,visible:e.manualUploadCallbackDrawerVisible,direction:"rtl",size:"40%","before-close":e.manualUploadCallbackCloseHandle},on:{"update:visible":function(t){e.manualUploadCallbackDrawerVisible=t}}},[a("div",{staticStyle:{width:"100%",padding:"20px","margin-bottom":"60px"}},[a("el-upload",{ref:"uploadImgs",staticClass:"upload-callback",attrs:{action:"#",limit:1,"show-file-list":!0,"auto-upload":!1,accept:".txt","on-change":e.manualUploadHandle,"on-exceed":e.fileSizeErrorHandle}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传txt文件，且不超过500kb")])],1),e._v(" "),e.uploadCallbackFlag?a("div",{staticStyle:{padding:"10px 0",color:"#72767b"}},[e._v("手动代付-文件上传回调 结果展示：")]):e._e(),e._v(" "),e.uploadCallbackFlag?a("el-table",{key:e.uploadCallbackTableKey,staticStyle:{width:"100%"},attrs:{data:e.uploadCallbackList,"row-key":"id",border:"",fit:"","highlight-current-row":"","header-cell-style":{background:"#F3F4F7",color:"#555"}}},[a("el-table-column",{attrs:{label:"上传状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["success"===t.row.status?a("span",{staticClass:"settlement-status settlement-status-success",attrs:{"data-v-3d7c3fb9":""}},[e._v("回调成功")]):a("span",{staticClass:"settlement-status settlement-status-initial",attrs:{"data-v-3d7c3fb9":""}},[e._v("回调失败")])]}}],null,!1,1595425680)}),e._v(" "),a("el-table-column",{attrs:{label:"上传结果描述",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.msg))])]}}],null,!1,2029294943)}),e._v(" "),a("el-table-column",{attrs:{label:"原文内容",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cell"},[e._v(e._s(t.row.content))])]}}],null,!1,1961302264)})],1):e._e()],1),e._v(" "),a("section",{staticClass:"form-footer"},[a("el-button",{on:{click:e.manualUploadCallbackDrawerCloseHandle}},[e._v("关 闭")])],1)]),e._v(" "),a("el-drawer",{attrs:{title:"YESBANK手动代付-批量回调","show-close":!1,visible:e.yesmanualUploadCallbackDrawerVisible,direction:"rtl",size:"70%","before-close":e.yesmanualUploadCallbackCloseHandle},on:{"update:visible":function(t){e.yesmanualUploadCallbackDrawerVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.yesloading,expression:"yesloading"}],staticStyle:{width:"100%","padding-left":"10px","padding-right":"10px","margin-bottom":"60px"}},[a("el-upload",{ref:"uploadExcel",staticClass:"upload-callback",attrs:{action:"#",limit:1,"show-file-list":!0,"auto-upload":!1,"on-change":e.yesmanualUploadHandle,"on-exceed":e.yesfileSizeErrorHandle}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"只能上传excel文件",placement:"right-start"}},[a("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),e.yesuploadCallbackFlag?a("div",{staticStyle:{padding:"10px 0",color:"green","font-size":"14px","font-weight":"bold"}},[e._v("\n                YESBANK文件上传,匹配数据结果展示：\n                "),e.yesuploadCallbackFlag?a("el-button",{staticStyle:{float:"right","margin-right":"30px","margin-bottom":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.submitYesBank}},[e._v("提交")]):e._e()],1):e._e(),e._v(" "),e.yesuploadCallbackFlag?a("el-table",{key:e.yesuploadCallbackTableKey,staticStyle:{width:"100%"},attrs:{data:e.yesuploadCallbackList,"row-key":"id",border:"",fit:"","highlight-current-row":"","max-height":"350px","header-cell-style":{background:"#F3F4F7",color:"#555"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"Reference No",width:"120px",prop:"referenceNo"}}),e._v(" "),a("el-table-column",{attrs:{label:"Transaction Date",width:"170px",prop:"transactionDate",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"Debited Amount",width:"130px",prop:"debitedAmount"}}),e._v(" "),a("el-table-column",{attrs:{label:"Description",prop:"description"}})],1):e._e(),e._v(" "),e.submitCallbackFlag?a("div",{staticStyle:{padding:"10px 0",color:"green","font-size":"14px","font-weight":"bold"}},[e._v("YESBANK数据修改结果：")]):e._e(),e._v(" "),e.submitCallbackFlag?a("el-table",{key:e.submitCallbackTableKey,staticStyle:{width:"100%"},attrs:{data:e.submitCallbackList,"row-key":"id",border:"",fit:"","highlight-current-row":"","max-height":"350px","header-cell-style":{background:"#F3F4F7",color:"#555"}}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"上传状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium",type:"success"==t.row.status?"success":"error"}},[e._v(e._s("success"==t.row.status?"回调成功":"回调失败")+"\n                      ")])],1)]}}],null,!1,353474791)}),e._v(" "),a("el-table-column",{attrs:{label:"上传结果描述",align:"center",width:"180",prop:"msg"}}),e._v(" "),a("el-table-column",{attrs:{label:"原文内容",align:"left",prop:"content"}})],1):e._e()],1),e._v(" "),a("section",{staticClass:"form-footer"},[a("el-button",{on:{click:e.yesmanualUploadCallbackDrawerCloseHandle}},[e._v("关 闭")])],1)])],1)],1)]],2)},staticRenderFns:[]};var he=a("VU/8")(pe,fe,!1,function(e){a("FWYN")},"data-v-4892a6fa",null).exports;var ge={name:"operaLogList",components:{OneButton:ne},data:function(){return{fullscreenLoading:!1,createTime:[],searchForm:{id:null,userName:"",operation:"",module:"",function:"",method:"",startCreateTime:"",endCreateTime:"",page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",formLabelWidth:120,sending:!1}},created:function(){this.queryOperateLogPageList()},methods:{queryOperateLogPageList:function(){var e=this;return this.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.createTime?"":this.createTime[0],this.searchForm.endCreateTime=""===this.createTime?"":this.createTime[1],new y.a(function(t){var a;(a=e.searchForm,_({url:"/operatelog/queryOperateLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],i=!0,s=!1,n=void 0;try{for(var o,l=f()(a);!(i=(o=l.next()).done);i=!0){var c=o.value;r.push(c)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.tableData=r,e.fullscreenLoading=!1}})})},search:function(){this.searchForm.page=1,this.queryOperateLogPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryOperateLogPageList()}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"记录编号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"用户",prop:"userName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"操作关键词",prop:"operation"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.operation,callback:function(t){e.$set(e.searchForm,"operation",t)},expression:"searchForm.operation"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:8,md:8,sm:12,xs:24}},[a("el-form-item",{attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("one-button",{attrs:{icon:"el-icon-search",type:"primary",perms:"log-operaLogList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"记录编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户账号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"functions",label:"功能名称","min-width":"200",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作","min-width":"500",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"结果",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"useTime",label:"处理时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var ye=a("VU/8")(ge,ve,!1,function(e){a("SzPP")},"data-v-5fa81330",null).exports;var be={name:"moneyLogList",components:{OneButton:ne},data:function(){return{fullscreenLoading:!1,centerDialogVisible:!1,innerVisible:!1,sendNotifyDrawerVisable:!1,direction:"rtl",password:"",verifyCode:"",notifyId:"",early:[],countryOptions:[],payTypeOptions:[],searchFormOri:{},searchForm:{id:null,appId:"",orderId:"",type:"",sceneInfo:"",money:"",startCreateTime:"",endCreateTime:"",page:1,limit:10,rowIndex:0},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""}},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}]}},tableData:[],total:0,dateStart:"",dateEnd:"",pickerOptionsStart:{},pickerOptionsEnd:{disabledDate:function(e){if(this.dateStart)var t=new Date(this.dateStart).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1}},created:function(){this.queryMoneyLogPageList()},methods:{queryMoneyLogPageList:function(){var e=this;return this.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.early?"":this.early[0],this.searchForm.endCreateTime=""===this.early?"":this.early[1],new y.a(function(t){var a;(a=e.searchForm,_({url:"/moneylog/queryMoneyLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],i=!0,s=!1,n=void 0;try{for(var o,l=f()(a);!(i=(o=l.next()).done);i=!0){var c=o.value,m=c.type;m=1===m?"增加":"减少",c.type=m;var p=c.sceneInfo;p=1===p?"商户充值":2===p?"管理员操作":3===p?"商户提现":"转赠",c.sceneInfo=p,c.frontMoney=u(c.frontMoney),c.money=u(c.money),c.queenMoney=u(c.queenMoney),c.createTime=d(c.createTime),r.push(c)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.tableData=r,e.fullscreenLoading=!1}})})},search:function(){this.searchForm.page=1,this.searchForm.limit=10,this.queryMoneyLogPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.dateStart="",this.dateEnd=""},pageChange:function(e){this.searchForm.page=e,this.queryMoneyLogPageList()}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"记录编号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户订单号",prop:"orderId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"增加",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"减少",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"场景",prop:"sceneInfo"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.sceneInfo,callback:function(t){e.$set(e.searchForm,"sceneInfo",t)},expression:"searchForm.sceneInfo"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"商户充值",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"管理员操作",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"商户提现",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"转赠",value:"4"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"金额",prop:"money"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.money,callback:function(t){e.$set(e.searchForm,"money",t)},expression:"searchForm.money"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:8,md:8,sm:12,xs:24}},[a("el-form-item",{attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStart},model:{value:e.early,callback:function(t){e.early=t},expression:"early"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("one-button",{attrs:{icon:"el-icon-search",type:"primary",perms:"log-moneyLogList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"记录编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sceneInfo",label:"场景"}}),e._v(" "),a("el-table-column",{attrs:{prop:"frontMoney",label:"变动前金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"变动金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queenMoney",label:"变动后金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"details",label:"说明"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"商户单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var Fe=a("VU/8")(be,we,!1,function(e){a("Vls3")},"data-v-7a83b3af",null).exports,_e=a("pFYg"),xe=a.n(_e),Ce=a("fZjL"),ke=a.n(Ce);function Te(e){return _({url:"/agent/queryAgentSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var Ie={name:"oneSwitch",props:{value:{type:Number},perms:{type:String,default:null},switchData:{type:Number},activeValue:{type:Number},inactiveValue:{type:Number}},data:function(){return{switchValue:this.value}},created:function(){},methods:{handleChange:function(){this.$emit("changeSwitch")},hasPermission:function(e){for(var t=!1,a=JSON.parse(window.sessionStorage.getItem("permissionList")),r=e.split("-"),i=r[0],s=r[1],n=(r[2],0);n<a.length;n++)if(a[n].pValue===i)for(var o=a[n].children,l=0;l<o.length;l++)if(o[l].pValue===s)for(var c=o[l].children,u=0;u<c.length;u++)if(c[u].pValue===e){this.buttonName=c[u].permissName,t=!0;break}return t}}},Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hasPermission(e.perms)?a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":e.activeValue,"inactive-value":e.inactiveValue},on:{change:function(t){return e.handleChange()}},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}}):e._e()},staticRenderFns:[]};var De=a("VU/8")(Ie,Se,!1,function(e){a("ZfIx")},"data-v-3bcec076",null).exports,Le={name:"cpInfoList",components:{OneSwitch:De,OneButton:ne},data:function(){var e=this,t=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fullscreenLoading:!0,searchForm:{userName:"",agentId:"",status:"",canOver:"",agentOptions:[],platformOptions:[],country:"",type:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{appId:0,userName:"",userPass:"",checkPass:"",payRange:"",withdrawRange:"",subRatio:0,remainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",agentPayFeeFix:"0",agentPayFeeRate:"0",agentWithdrawFeeFix:"0",agentWithdrawFeeRate:"0",country:"",type:""},rules:{userName:[{validator:function(t,a,r){if(!a)return r(new Error("用户名不能为空"));e.dialog.isInsert?j({userName:a}).then(function(e){0===e.data.code?r():r(new Error("用户名已被使用。"))}):r()},trigger:"blur"}],userPass:[{required:!0,message:"请输入账号密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.dialog.form.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.dialog.form.userPass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],subRatio:[{required:!0,message:"请输入",trigger:"blur"}],remainDelayDay:[{required:!0,message:"请输入",trigger:"blur"}],agentPayFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],agentPayFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],agentWithdrawFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],agentWithdrawFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{appId:0,password:"",verifyCode:"",remain:0,notes:""},creditForm:{password:"",verifyCode:"",remain:"0"},agentForm:{agentId:""},confirmForm:{confirmStatus:"",confirmMin:"",confirmMax:""},typeForm:{defaultPayTypeId:[],defaultWithdrawTypeId:[]},ipForm:{ip:""},dailyAmountForm:{payAmount:"",withdrawAmount:""},frozenForm:{appId:0,password:"",verifyCode:"",remain:0},rules:{userName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:t,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:t,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],page:{pageSize:10,total:0,cur:1},userTypeOptions:[],countryOptions:[],agentOptions:[],filterList:[],whiteIps:"",confirmRangeShow:"",settleRemainDrawer:!1,direction:"rtl",validDayList:[],settlementDialogVisible:!1,settlementForm:{},settling:!1,sumRemain:"",sumActualRemain:"",sumToBeSettleRemain:"",resetDialogForm:{}}},created:function(){this.refresh(),this.findType(),this.findAgent(),this.queryCountryPageList(),this.queryUserTypeOptions(),this.resetDialogForm=JSON.parse(g()(this.dialog.form))},watch:{settings:{handler:function(e,t){var a=this.settings.confirmForm.confirmMin,r=this.settings.confirmForm.confirmMax;this.confirmRangeShow=""!==a&&""!==r?"min"===a&&"max"===r?"所有订单全部进入审核":a>r?"所有订单不会进入审核":a+" < 金额<"+r+"的订单进入审核":""!==a&&""===r?a+" < 金额的订单进入审核":""===a&&""!==r?"金额 < "+r+"的订单进入审核":"所有订单不会进入审核"},deep:!0}},methods:{getUserTypeLabel:function(e){for(var t="",a=0;a<this.userTypeOptions.length;a++)e==this.userTypeOptions[a].value&&(t=this.userTypeOptions[a].label);return t},findType:function(){var e=this;ae().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.payTypeOptions=a}}),me().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.withdrawTypeOptions=a}})},findAgent:function(){var e=this;Te().then(function(t){0===t.data.code&&(e.searchForm.agentOptions=t.data.data)})},refresh:function(){var e=this;e.fileList=[];var t=[],a=/^,|，| $/,r=String(e.searchForm.userName);""!==r?a.test(r)?t=r.split(a):(t=[]).push(r):t=null;var i,s={page:this.page.cur,limit:this.page.pageSize,userNames:t,agentId:this.searchForm.agentId,status:this.searchForm.status,canOver:this.searchForm.canOver,country:this.searchForm.country,type:this.searchForm.type};(i=s,_({url:"/cpinfo/queryCpInfoStats",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(i)})).then(function(t){var a=t.data.data;if(0===t.data.code){var r=a.remain?a.remain:0,i=a.remain?a.actualRemain:0,s=a.remain?r-i:0;e.sumRemain=c(r),e.sumActualRemain=c(i),e.sumToBeSettleRemain=c(s)}}),function(e){return _({url:"/cpinfo/queryCpInfoPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(s).then(function(t){e.fullscreenLoading=!1;var a=t.data.data;if(0===t.data.code){var r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value,u=l.remain,d=l.actualRemain,m=l.frozenActualRemain,p=l.frozenRemain,h=u-d-m;l.remain=c(u),l.actualRemain=c(d),l.frozenActualRemain=c(m),l.toBeSettleRemain=c(h),l.frozenRemain=c(p),-1!=l.payDailyLimit&&(l.payDailyLimitDecimal=c(l.payDailyLimit)),-1!=l.withdrawDailyLimit&&(l.withdrawDailyLimitDecimal=c(l.withdrawDailyLimit))}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}e.tableData=a,e.page.total=t.data.count;var g=!0,v=!1,y=void 0;try{for(var b,w=f()(a);!(g=(b=w.next()).done);g=!0){var F=b.value;e.filterList.push({text:F.appId,value:F.appId})}}catch(e){v=!0,y=e}finally{try{!g&&w.return&&w.return()}finally{if(v)throw y}}}})},pageChange:function(e){this.page.cur=e,this.refresh()},search:function(){var e=this;this.page.cur=1,this.$nextTick(function(){e.refresh()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e?t.saveCpInfo():"balanceForm"===e?t.saveBalance():"creditForm"===e?t.saveCredit():"agentForm"===e?t.saveAgent():"typeForm"===e?t.saveType():"confirmForm"===e?t.saveConfirmMin():"ipForm"===e?t.saveIp():"dailyAmountForm"===e?t.saveDailyAmount():"frozenForm"===e&&t.saveFrozen()})},saveCpInfo:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(t.dialog.isInsert?D(t.dialog.form):L(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.refresh(),t.closeDialog()})})},saveBalance:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={appId:0,password:"",verifyCode:"",remain:0,notes:""};t.appId=e.settings.appId,t.password=e.settings.balanceForm.password,t.verifyCode=e.settings.balanceForm.verifyCode,t.remain=e.settings.balanceForm.remain,t.notes=e.settings.balanceForm.notes,t.remain<0&&(t.remain=Math.abs(t.remain)),(e.settings.balanceForm.remain>=0?P(t):z(t)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveFrozen:function(){var e=this;this.$confirm("确定冻结/解冻"+this.settings.userName+"可用余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a={appId:0,password:"",verifyCode:"",remain:0};a.appId=e.settings.appId,a.password=e.settings.frozenForm.password,a.verifyCode=e.settings.frozenForm.verifyCode,a.remain=e.settings.frozenForm.remain,a.remain<0&&(a.remain=Math.abs(a.remain)),(e.settings.frozenForm.remain>=0?(t=a,_({url:"/cpinfo/frozenActual",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})):function(e){return _({url:"/cpinfo/unFrozenActual",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(a)).then(function(t){0===t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.refresh(),e.closeSettingsDialog()):e.$message.error(t.data.msg)})})},saveCredit:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户信用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.creditForm;t.appId=e.settings.appId,R(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveConfirmMin:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"审核范围吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=JSON.parse(g()(e.settings.confirmForm));t.appId=e.settings.appId,W(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveAgent:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户绑定代理商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.agentForm;t.appId=e.settings.appId,N(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveType:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户指定通道吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.typeForm;t.appId=e.settings.appId,t.defaultPayTypeId=e.settings.typeForm.defaultPayTypeId.toString(),t.defaultWithdrawTypeId=e.settings.typeForm.defaultWithdrawTypeId.toString(),$(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveIp:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的ip地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.ipForm;t.appId=e.settings.appId,O(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveDailyAmount:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的每日限额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.dailyAmountForm;a.appId=e.settings.appId,(t=a,_({url:"/cpinfo/updateDailyAmount",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},preventClose:function(){return!1},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.userName=t.userName,this.dialog.form.checkPass=t.userPass,this.dialog.form.payFeeFix=t.payFeeFix/100,this.dialog.form.withdrawFeeFix=t.withdrawFeeFix/100,this.dialog.form.agentPayFeeFix=t.agentPayFeeFix/100,this.dialog.form.agentWithdrawFeeFix=t.agentWithdrawFeeFix/100,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){E({appId:t.appId}).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t=this;M({appId:e.appId,status:1===e.status?-1:1}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmStatus:function(e){var t=this;q({appId:e.appId,confirmStatus:e.confirmStatus}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmMin:function(e){var t=this;W({appId:e.appId,confirmMin:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanWithdraw:function(e){var t=this;B({appId:e.appId,canWithdraw:1===e.canWithdraw?-1:1}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanOver:function(e){var t=this;A({appId:e.appId,canOver:1===e.canOver?0:1}).then(function(e){0===e.data.code?t.$message({message:e.data.msg,type:"success"}):t.$message.error(e.data.msg),t.refresh()})},changeSettings:function(e){var t=this;if(this.settings.visible=!0,-1===e.payDailyLimit?this.settings.dailyAmountForm.payAmount=-1:this.settings.dailyAmountForm.payAmount=e.payDailyLimit/100,-1===e.withdrawDailyLimit?this.settings.dailyAmountForm.withdrawAmount=-1:this.settings.dailyAmountForm.withdrawAmount=e.withdrawDailyLimit/100,e.defaultPayTypeId.length>0&&0!==e.defaultPayTypeId){for(var a=e.defaultPayTypeId.split(","),r=[],i=0;i<a.length;i++)r.push(a[i]+"");this.settings.typeForm.defaultPayTypeId=r}else this.settings.typeForm.defaultPayTypeId=[];if(e.defaultWithdrawTypeId.length>0&&0!==e.defaultWithdrawTypeId){for(var s=e.defaultWithdrawTypeId.split(","),n=[],o=0;o<s.length;o++)n.push(s[o]+"");this.settings.typeForm.defaultWithdrawTypeId=n}else this.settings.typeForm.defaultWithdrawTypeId=[];this.$nextTick(function(){t.settings.userName=e.userName,t.settings.payFeeFix=e.payFeeFix,t.settings.payFeeRate=e.payFeeRate,t.settings.withdrawFeeFix=e.withdrawFeeFix,t.settings.withdrawFeeRate=e.withdrawFeeRate,t.settings.agentForm.agentId=e.agentId,t.settings.appId=e.appId,t.settings.confirmForm.confirmStatus=e.confirmStatus,t.settings.confirmForm.confirmMin=e.confirmMin,t.settings.confirmForm.confirmMax=e.confirmMax,t.settings.ipForm.ip=e.whiteIps}),this.settings.frozenForm={}},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},queryUserTypeOptions:function(){var e=this;return new y.a(function(t){X({type:"user_type"}).then(function(t){0===t.data.code&&(e.userTypeOptions=[],t.data.data.forEach(function(t,a){e.userTypeOptions.push({label:t.name,value:t.value})}))})})},addCpinfo:function(){this.dialog.form=JSON.parse(g()(this.resetDialogForm)),this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()},filterHandler:function(e,t,a){var r=a.property;return String(t[r])===String(e)},resetGoogleSecret:function(e){var t=this;V({appId:e.appId}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},changeWhiteIps:function(e){var t=this;U({appId:e.appId,whiteIps:e.whiteIps}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},setConfirmMin:function(){this.settings.confirmForm.confirmMin="min"},setConfirmMax:function(){this.settings.confirmForm.confirmMax="max"},statisticsCpInfo:function(){},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(t<5||t>7)return"";var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]=r[t])}),r},exportCpInfo:function(){this.fileList=[];var e=[],t=/^,|，| $/,a=String(this.searchForm.userName);""!==a&&(t.test(a)?e=a.split(t):(e=[]).push(a)),window.location.href=encodeURI("/cpinfo/exportCpInfo?userNames="+e+"&agentId="+this.searchForm.agentId+"&status="+this.searchForm.status+"&canOver="+this.searchForm.canOver+"&country="+this.searchForm.country)},queryValidPayLogList:function(){var e=this;te({appId:e.settlementForm.appId}).then(function(t){var a=t.data.code,r=(t.data.msg,t.data.data);if(0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r);!(i=(o=l.next()).done);i=!0){var u=o.value;u.amount=c(u.amount);var d=!0,m=!1,p=void 0;try{for(var h,g=f()(u.list);!(d=(h=g.next()).done);d=!0){var v=h.value;v.amount=c(v.amount)}}catch(e){m=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(m)throw p}}}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.validDayList=r}})},openSettlementRemainDrawer:function(e,t){this.validDayList.appId=t.appId,this.settlementForm.appId=t.appId,this.queryValidPayLogList(),this.settleRemainDrawer=!0},closeSettlementRemainDrawer:function(){this.settleRemainDrawer=!1},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},openSettlementDialog:function(e){this.settlementDialogVisible=!0,this.settlementForm.payDay=e.payDay,void 0!==e.payTypeId&&(this.settlementForm.payTypeId=e.payTypeId,this.settlementForm.payTypeName=e.payTypeName),this.settlementForm.amount=e.amount},closeSettlementDialog:function(){this.settlementForm={},this.settlementDialogVisible=!1},settlementPayLog:function(){this.settling=!0;var e=this;ee(this.settlementForm).then(function(t){var a=t.data.code,r=t.data.msg;t.data.data;0===a&&(e.$message(r),e.queryValidPayLogList(),e.settlementDialogVisible=!1),e.$message(r),e.settling=!1})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()},changeList:function(e){this.country=e.value},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})}}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-tabs",{on:{"tab-click":e.handleClick}},e._l(e.countryOptions,function(t,r){return a("el-tab-pane",{key:t.value,attrs:{label:t.label,name:t.label},on:{click:function(a){return e.changeList(t)}}},[e._v(e._s(t.name)+"\n        ")])}),1)],e._v(" "),a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"商户",prop:"userName"}},[a("el-input",{attrs:{placeholder:"商户ID或名称"},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理商",prop:"agentId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.agentId,callback:function(t){e.$set(e.searchForm,"agentId",t)},expression:"searchForm.agentId"}},e._l(e.searchForm.agentOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"超额状态",prop:"canOver"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.canOver,callback:function(t){e.$set(e.searchForm,"canOver",t)},expression:"searchForm.canOver"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(this.userTypeOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",[a("one-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary",perms:"user-cpInfoList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{xl:4,lg:4,md:4,sm:6,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("one-button",{attrs:{plain:"",perms:"user-cpInfoList-add"},on:{click:function(t){return e.addCpinfo()}}})],1)]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticStyle:{color:"#909399","font-size":"15px","font-weight":"bold"}},[e._v("\n            余额："+e._s(e.sumRemain)+"\n          ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticStyle:{color:"#909399","font-size":"15px","font-weight":"bold"}},[e._v("\n            可用余额："+e._s(e.sumActualRemain)+"\n          ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticStyle:{color:"#909399","font-size":"15px","font-weight":"bold"}},[e._v("\n            待结算："+e._s(e.sumToBeSettleRemain)+"\n          ")])])])],1),e._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"密匙"}},[a("span",[e._v(e._s(t.row.key))])]),e._v(" "),a("el-form-item",{attrs:{label:"谷歌秘钥"}},[a("span",[e._v(e._s(t.row.googleSecret))]),e._v(" "),a("el-link",{attrs:{disabled:""===t.row.googleSecret,underline:!1},on:{click:function(a){return e.resetGoogleSecret(t.row)}}},[e._v("重置\n              ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("span",[e._v(e._s(t.row.userPass))])]),e._v(" "),a("el-form-item",{attrs:{label:"信用额度"}},[a("span",[a("i",{staticClass:"el-icon-s-finance"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(Number(t.row.creditRemain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])])]),e._v(" "),a("el-form-item",{attrs:{label:"冻结"}},[a("span",[a("i",{staticClass:"el-icon-ice-cream-square"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(t.row.frozenRemain))])])]),e._v(" "),a("el-form-item",{attrs:{label:"绑定Ip："}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{model:{value:t.row.whiteIps,callback:function(a){e.$set(t.row,"whiteIps",a)},expression:"props.row.whiteIps"}}),e._v(" "),a("el-link",{attrs:{underline:!1},on:{click:function(a){return e.changeWhiteIps(t.row)}}},[e._v("保存\n                  ")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审核额度"}},[a("span",[a("i",{staticClass:"el-icon-ice-cream-square"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(t.row.confirmMin)+"-"+e._s(t.row.confirmMax))])])]),e._v(" "),a("el-form-item",{attrs:{label:"扣减率"}},[a("span",[e._v(e._s(t.row.subRatio)+"%")])]),e._v(" "),a("el-form-item",{attrs:{label:"T+n"}},[a("span",[e._v(e._s(t.row.remainDelayDay))])]),e._v(" "),a("el-form-item",{attrs:{label:"代理商"}},[a("span",[e._v("\n                                "+e._s(t.row.agentUserName)+"\n                            ")])]),e._v(" "),a("el-form-item",{attrs:{label:"代理手续费"}},[a("span",[a("el-tag",{staticStyle:{"margin-bottom":"2px"},attrs:{type:"success",size:"small"}},[e._v(e._s(Number(t.row.agentPayFeeFix/100).toFixed(2))+"+"+e._s(t.row.agentPayFeeRate)+"%")]),e._v(" "),a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(Number(t.row.agentWithdrawFeeFix/100).toFixed(2))+"+"+e._s(t.row.agentWithdrawFeeRate)+"%")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"单笔范围"}},[a("span",[t.row.payRange&&""!=t.row.payRange?a("el-tag",{staticStyle:{"margin-bottom":"2px"},attrs:{type:"success",size:"small"}},[e._v(e._s(t.row.payRange))]):e._e(),e._v(" "),t.row.withdrawRange&&""!=t.row.withdrawRange?a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(t.row.withdrawRange))]):e._e()],1)])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户ID",sortable:"","column-key":"appId",filters:e.filterList,"filter-method":e.filterHandler,"min-width":"100"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家-类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.country+"-"+e.getUserTypeLabel(t.row.type))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"余额",prop:"remain"}}),e._v(" "),a("el-table-column",{attrs:{label:"可用余额",prop:"actualRemain"}}),e._v(" "),a("el-table-column",{attrs:{label:"冻结可用余额",prop:"frozenActualRemain"}}),e._v(" "),a("el-table-column",{attrs:{label:"待结算",prop:"toBeSettleRemain"}}),e._v(" "),a("el-table-column",{attrs:{label:"充值/提现手续费","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{"margin-bottom":"2px"},attrs:{type:"success",size:"small"}},[e._v("\n            "+e._s(Number(t.row.payFeeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.payFeeRate).toFixed(1))+"%\n          ")]),e._v(" "),a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(Number(t.row.withdrawFeeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.withdrawFeeRate).toFixed(1))+"%\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.DefaultPayTypeId?a("span",[e._v("默认")]):[a("span",{staticStyle:{display:"block"}},[e._v("通道 "+e._s(t.row.defaultPayTypeId))]),e._v(" "),a("span",[e._v(e._s(t.row.payTypeName))])]]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"提现通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.defaultWithdrawTypeId?a("span",[e._v("默认")]):[a("span",{staticStyle:{display:"block"}},[e._v("通道 "+e._s(t.row.defaultWithdrawTypeId))]),e._v(" "),a("span",[e._v(e._s(t.row.withdrawTypeName))])]]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"代收日限"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.payDailyLimit?a("span",[e._v("不限额")]):a("span",[e._v(e._s(t.row.payDailyLimitDecimal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"代付日限"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.withdrawDailyLimit?a("span",[e._v("不限额")]):a("span",[e._v(e._s(t.row.withdrawDailyLimitDecimal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1===t.row.status?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.status,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1,perms:"user-cpInfoList-on/off"},on:{changeSwitch:function(a){return e.changeStatus(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用提现"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1===t.row.canWithdraw?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.canWithdraw,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1,perms:"user-cpInfoList-canWithdraw"},on:{changeSwitch:function(a){return e.changeCanWithdraw(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用超额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.canOver?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.canOver,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,perms:"user-cpInfoList-canOver"},on:{changeSwitch:function(a){return e.changeCanOver(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{attrs:{size:"mini",perms:"user-cpInfoList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"user-cpInfoList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",perms:"user-cpInfoList-setting"},on:{click:function(a){return e.changeSettings(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page.cur,"page-sizes":[10,20,50,100,200],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.page,"cur",t)},"update:current-page":function(t){return e.$set(e.page,"cur",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"cpInfoAddWin",attrs:{title:this.dialog.isInsert?"添加商户":"编辑商户",modal:!1,visible:e.dialog.visible,width:"40%","before-close":e.preventClose,"show-close":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini","label-position":"top"}},[a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"商户名称","label-width":e.dialog.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{autocomplete:"new-password"},model:{value:e.dialog.form.userName,callback:function(t){e.$set(e.dialog.form,"userName",t)},expression:"dialog.form.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}})],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"密码","label-width":e.dialog.formLabelWidth,prop:"userPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"new-password"},model:{value:e.dialog.form.userPass,callback:function(t){e.$set(e.dialog.form,"userPass",t)},expression:"dialog.form.userPass"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"确认密码","label-width":e.dialog.formLabelWidth,prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.checkPass,callback:function(t){e.$set(e.dialog.form,"checkPass",t)},expression:"dialog.form.checkPass"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[this.dialog.isInsert?a("el-form-item",{attrs:{label:"所属国家","label-width":e.dialog.formLabelWidth,prop:"checkCountry"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.country,callback:function(t){e.$set(e.dialog.form,"country",t)},expression:"dialog.form.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"类型","label-width":e.dialog.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.type,callback:function(t){e.$set(e.dialog.form,"type",t)},expression:"dialog.form.type"}},e._l(this.userTypeOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"充值范围","label-width":e.dialog.formLabelWidth,prop:"payRange"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.payRange,callback:function(t){e.$set(e.dialog.form,"payRange",t)},expression:"dialog.form.payRange"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"提现范围","label-width":e.dialog.formLabelWidth,prop:"withdrawRange"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.withdrawRange,callback:function(t){e.$set(e.dialog.form,"withdrawRange",t)},expression:"dialog.form.withdrawRange"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"扣减率","label-width":e.dialog.formLabelWidth,prop:"subRatio"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.subRatio,callback:function(t){e.$set(e.dialog.form,"subRatio",e._n(t))},expression:"dialog.form.subRatio"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"T+n","label-width":e.dialog.formLabelWidth,prop:"remainDelayDay"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.remainDelayDay,callback:function(t){e.$set(e.dialog.form,"remainDelayDay",e._n(t))},expression:"dialog.form.remainDelayDay"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"支付固定手续费","label-width":e.dialog.formLabelWidth,prop:"payFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.payFeeFix,callback:function(t){e.$set(e.dialog.form,"payFeeFix",t)},expression:"dialog.form.payFeeFix"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"支付手续费费率","label-width":e.dialog.formLabelWidth,prop:"payFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.payFeeRate,callback:function(t){e.$set(e.dialog.form,"payFeeRate",t)},expression:"dialog.form.payFeeRate"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"提现固定手续费","label-width":e.dialog.formLabelWidth,prop:"withdrawFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.withdrawFeeFix,callback:function(t){e.$set(e.dialog.form,"withdrawFeeFix",t)},expression:"dialog.form.withdrawFeeFix"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"提现手续费费率","label-width":e.dialog.formLabelWidth,prop:"withdrawFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.withdrawFeeRate,callback:function(t){e.$set(e.dialog.form,"withdrawFeeRate",t)},expression:"dialog.form.withdrawFeeRate"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"代理支付固定手续费","label-width":e.dialog.formLabelWidth,prop:"agentPayFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentPayFeeFix,callback:function(t){e.$set(e.dialog.form,"agentPayFeeFix",t)},expression:"dialog.form.agentPayFeeFix"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"代理支付手续费费率","label-width":e.dialog.formLabelWidth,prop:"agentPayFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentPayFeeRate,callback:function(t){e.$set(e.dialog.form,"agentPayFeeRate",t)},expression:"dialog.form.agentPayFeeRate"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"代理提现固定手续费","label-width":e.dialog.formLabelWidth,prop:"agentWithdrawFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentWithdrawFeeFix,callback:function(t){e.$set(e.dialog.form,"agentWithdrawFeeFix",t)},expression:"dialog.form.agentWithdrawFeeFix"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"代理提现手续费费率","label-width":e.dialog.formLabelWidth,prop:"agentWithdrawFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentWithdrawFeeRate,callback:function(t){e.$set(e.dialog.form,"agentWithdrawFeeRate",t)},expression:"dialog.form.agentWithdrawFeeRate"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置",modal:!1,visible:e.settings.visible,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.settings,"visible",t)},closed:e.closeSettingsDialog}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(e){}},model:{value:e.settings.activeName,callback:function(t){e.$set(e.settings,"activeName",t)},expression:"settings.activeName"}},[a("el-tab-pane",{attrs:{label:"余额调整",name:"first"}},[a("el-form",{ref:"balanceForm",attrs:{model:e.settings.balanceForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.password,callback:function(t){e.$set(e.settings.balanceForm,"password",t)},expression:"settings.balanceForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.verifyCode,callback:function(t){e.$set(e.settings.balanceForm,"verifyCode",t)},expression:"settings.balanceForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余额(-/+)",prop:"remain"}},[a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.settings.balanceForm.remain,callback:function(t){e.$set(e.settings.balanceForm,"remain",t)},expression:"settings.balanceForm.remain"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{span:13}},[a("el-tag",{attrs:{type:"success"}},[e._v("\n                  "+e._s(Number(e.settings.payFeeFix/100).toFixed(2))+"+"+e._s(e.settings.payFeeRate)+"%\n                ")]),e._v(" "),a("el-tag",{attrs:{type:"danger"}},[e._v("\n                  "+e._s(Number(e.settings.withdrawFeeFix/100).toFixed(2))+"+"+e._s(e.settings.withdrawFeeRate)+"%\n                ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"修改说明",prop:"notes"}},[a("el-input",{model:{value:e.settings.balanceForm.notes,callback:function(t){e.$set(e.settings.balanceForm,"notes",t)},expression:"settings.balanceForm.notes"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("balanceForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("balanceForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"信用设置",name:"second"}},[a("el-form",{ref:"creditForm",attrs:{model:e.settings.creditForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.creditForm.password,callback:function(t){e.$set(e.settings.creditForm,"password",t)},expression:"settings.creditForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.creditForm.verifyCode,callback:function(t){e.$set(e.settings.creditForm,"verifyCode",t)},expression:"settings.creditForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"信用额度",prop:"remain"}},[a("el-input",{model:{value:e.settings.creditForm.remain,callback:function(t){e.$set(e.settings.creditForm,"remain",t)},expression:"settings.creditForm.remain"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("creditForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("creditForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"人工审核",name:"third"}},[a("el-form",{ref:"confirmForm",attrs:{model:e.settings.confirmForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"重复提现审核"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.settings.confirmForm.confirmStatus,callback:function(t){e.$set(e.settings.confirmForm,"confirmStatus",t)},expression:"settings.confirmForm.confirmStatus"}},[a("el-option",{attrs:{label:"开启",value:1}}),e._v(" "),a("el-option",{attrs:{label:"关闭",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审核范围",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"单位/元"},model:{value:e.settings.confirmForm.confirmMin,callback:function(t){e.$set(e.settings.confirmForm,"confirmMin",t)},expression:"settings.confirmForm.confirmMin"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.setConfirmMin()}},slot:"append"},[e._v("Min")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"单位/元"},model:{value:e.settings.confirmForm.confirmMax,callback:function(t){e.$set(e.settings.confirmForm,"confirmMax",t)},expression:"settings.confirmForm.confirmMax"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.setConfirmMax()}},slot:"append"},[e._v("Max")])],1)],1)],1)],1),e._v(" "),a("el-form-item",[e._v("\n              作用范围：\n              "+e._s(e.confirmRangeShow)+"\n            ")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("confirmForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("confirmForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"代理商配置",name:"fourth"}},[a("el-form",{ref:"agentForm",attrs:{model:e.settings.agentForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"代理商",prop:"agentId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.settings.agentForm.agentId,callback:function(t){e.$set(e.settings.agentForm,"agentId",t)},expression:"settings.agentForm.agentId"}},e._l(e.searchForm.agentOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("agentForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("agentForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"通道指定",name:"fifth"}},[a("el-form",{ref:"typeForm",attrs:{model:e.settings.typeForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"支付通道"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"",filterable:""},model:{value:e.settings.typeForm.defaultPayTypeId,callback:function(t){e.$set(e.settings.typeForm,"defaultPayTypeId",t)},expression:"settings.typeForm.defaultPayTypeId"}},[a("el-option",{attrs:{label:"请选择",value:"0"}}),e._v(" "),e._l(e.settings.payTypeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:0==t.status}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name))])])})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现通道"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"",filterable:""},model:{value:e.settings.typeForm.defaultWithdrawTypeId,callback:function(t){e.$set(e.settings.typeForm,"defaultWithdrawTypeId",t)},expression:"settings.typeForm.defaultWithdrawTypeId"}},[a("el-option",{attrs:{label:"请选择",value:"0"}}),e._v(" "),e._l(e.settings.withdrawTypeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:0==t.status}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name))])])})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("typeForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("typeForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"绑定IP",name:"sixth"}},[a("el-form",{ref:"ipForm",attrs:{model:e.settings.ipForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Ip地址"}},[a("el-input",{model:{value:e.settings.ipForm.ip,callback:function(t){e.$set(e.settings.ipForm,"ip",t)},expression:"settings.ipForm.ip"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ipForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ipForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"每日限额",name:"seventh"}},[a("el-form",{ref:"dailyAmountForm",attrs:{model:e.settings.dailyAmountForm,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"代收日限额(元); -1为不限额，其他为限额额度"}},[a("el-input",{model:{value:e.settings.dailyAmountForm.payAmount,callback:function(t){e.$set(e.settings.dailyAmountForm,"payAmount",t)},expression:"settings.dailyAmountForm.payAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代付日限额(元); -1为不限额，其他为限额额度"}},[a("el-input",{model:{value:e.settings.dailyAmountForm.withdrawAmount,callback:function(t){e.$set(e.settings.dailyAmountForm,"withdrawAmount",t)},expression:"settings.dailyAmountForm.withdrawAmount"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("dailyAmountForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("dailyAmountForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"冻结可用金额",name:"eighth"}},[a("el-form",{ref:"frozenForm",attrs:{model:e.settings.frozenForm,rules:e.settings.rules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.frozenForm.password,callback:function(t){e.$set(e.settings.frozenForm,"password",t)},expression:"settings.frozenForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.frozenForm.verifyCode,callback:function(t){e.$set(e.settings.frozenForm,"verifyCode",t)},expression:"settings.frozenForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"冻结金额(-/+)",prop:"remain"}},[a("template",{slot:"label"},[e._v("\n                冻结金额(-/+)\n                "),a("span",{staticStyle:{color:"#e9994b","font-size":"10px"}},[e._v("（ 如果金额为正数，则进行冻结可用余额操作；负数则进行解冻可用余额操作 ）")])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.settings.frozenForm.remain,callback:function(t){e.$set(e.settings.frozenForm,"remain",t)},expression:"settings.frozenForm.remain"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}},[e._v(" ")])],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("frozenForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("frozenForm")}}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("el-drawer",{attrs:{title:"结算余额",size:"40%",visible:e.settleRemainDrawer,direction:e.direction},on:{"update:visible":function(t){e.settleRemainDrawer=t}}},[[a("div",{staticStyle:{padding:"20px"}},[a("span",[e._v("结算余额")]),e._v(" "),a("p",[a("span",[e._v("商户:"+e._s(e.settlementForm.appId))])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.validDayList,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"padding-left":"50px"}},[a("el-table",{attrs:{data:t.row.list,size:"mini"}},[a("el-table-column",{attrs:{label:"通道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.payTypeId)+"\n                        "),a("p",[e._v("\n                          "+e._s(t.row.payTypeName)+"\n                        ")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payLogNums",label:"订单数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(a){return e.openSettlementDialog(t.row)}}},[e._v("结算\n                        ")])]}}],null,!0)})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付日期",prop:"payDay",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"金额",prop:"amount",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单数",prop:"payLogNums",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",round:"",size:"mini",loading:e.settling},on:{click:function(a){return e.openSettlementDialog(t.row)}}},[e._v("结算\n                ")])]}}])})],1)],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:"请认真审核结算信息",visible:e.settlementDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.settlementDialogVisible=t}}},[a("table",[a("tr",[a("td",{staticStyle:{width:"120px",height:"30px"}},[e._v("商户:")]),e._v(" "),a("td",[e._v(e._s(e.settlementForm.appId))])]),e._v(" "),a("tr",[a("td",{staticStyle:{width:"120px",height:"30px"}},[e._v("支付日期:")]),e._v(" "),a("td",[e._v(e._s(e.settlementForm.payDay))])]),e._v(" "),""!==e.settlementForm.payTypeId&&void 0!==e.settlementForm.payTypeId?a("tr",[a("td",{staticStyle:{width:"120px",height:"30px"}},[e._v("通道:")]),e._v(" "),a("td",[e._v(e._s(e.settlementForm.payTypeName))])]):e._e(),e._v(" "),a("tr",[a("td",{staticStyle:{width:"120px",height:"30px"}},[e._v("结算金额:")]),e._v(" "),a("td",[e._v(e._s(e.settlementForm.amount))])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeSettlementDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.settlementPayLog}},[e._v("确 定")])],1)])],2)},staticRenderFns:[]};var $e=a("VU/8")(Le,Ne,!1,function(e){a("Zjol")},null,null).exports,Oe={name:"agentList",components:{OneSwitch:De,OneButton:ne},data:function(){return{fullscreenLoading:!0,searchForm:{userName:"",status:"",canOver:"",country:"",page:0,limit:10},tableData:[],dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",userName:"",password:"",passwordNew:"",country:""}},page:{pageSize:10,total:0,cur:1},countryOptions:[],agentOptions:[],settings:{visible:!1,activeName:"first",userName:"",id:0,balanceForm:{id:0,password:"",verifyCode:"",remain:0,notes:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()},trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]}}},created:function(){this.refresh(),this.queryCountryPageList()},methods:{refresh:function(){var e,t=this;(e=t.searchForm,_({url:"/agent/queryAgentPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},pageChange:function(e){this.page.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e?t.saveAgent():"balanceForm"===e?t.saveBalance():"creditForm"===e?t.saveCredit():"agentForm"===e?t.saveAgent():"typeForm"===e?t.saveType():"confirmForm"===e&&t.saveConfirmMin()})},saveAgent:function(){var e=this,t=this.dialog.isInsert?"添加":"编辑",a=this;this.$confirm("确定"+t+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(e.dialog.isInsert?(r=a.dialog.form,_({url:"/agent/addAgent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(r)})):function(e){return _({url:"/agent/updateAgent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(a.dialog.form)).then(function(e){0===e.data.code?a.$message({message:t+"成功",type:"success"}):(t=t+"失败，"+e.data.msg,a.$message.error(t)),a.refresh(),a.closeDialog()})})},saveBalance:function(){var e=this;e.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.balanceForm,r=!0;a.remain<0&&(r=!1,console.log(a.remain),a.remain=Math.abs(a.remain)),a.id=e.settings.id,console.log(r),(r?(t=a,_({url:"/agent/addAgentRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})):function(e){return _({url:"/agent/subtractAgentRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(a)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")})},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.id=t.id,this.dialog.form.userName=t.userName,this.dialog.form.password=t.password,this.dialog.form.passwordNew=t.passwordNew,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},_({url:"/agent/deleteAgent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t,a=this;(t={id:e.id,status:e.status},_({url:"/agent/changeAgentStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeSettings:function(e){this.settings.visible=!0,this.settings.userName=e.userName,this.settings.id=e.id},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm")},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()}}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"代理商ID或账户名",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",[a("one-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary",perms:"user-agentList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("one-button",{attrs:{plain:"",perms:"user-agentList-add"},on:{click:function(t){return e.addCpinfo()}}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"密码"}},[a("span",[e._v(e._s(t.row.userPass))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"代理商ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{label:"余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-rs"}),e._v(" "),a("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(Number(t.row.remain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.status,switchData:JSON.stringify(t.row),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1,perms:"user-agentList-on/off"},on:{changeSwitch:function(a){return e.changeStatus(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{attrs:{size:"mini",perms:"user-agentList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"user-agentList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",perms:"user-agentList-setting"},on:{click:function(a){return e.changeSettings(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加代理商",modal:!1,visible:e.dialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"代理商名称","label-width":e.dialog.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{autocomplete:"new-password"},model:{value:e.dialog.form.userName,callback:function(t){e.$set(e.dialog.form,"userName",t)},expression:"dialog.form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.dialog.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"new-password"},model:{value:e.dialog.form.password,callback:function(t){e.$set(e.dialog.form,"password",t)},expression:"dialog.form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.dialog.formLabelWidth,prop:"passwordNew"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.passwordNew,callback:function(t){e.$set(e.dialog.form,"passwordNew",t)},expression:"dialog.form.passwordNew"}})],1),e._v(" "),this.dialog.isInsert?a("el-form-item",{attrs:{label:"所属国家","label-width":e.dialog.formLabelWidth,prop:"checkCountry"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.country,callback:function(t){e.$set(e.dialog.form,"country",t)},expression:"dialog.form.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置",modal:!1,visible:e.settings.visible,width:"27rem"},on:{"update:visible":function(t){return e.$set(e.settings,"visible",t)},closed:e.closeSettingsDialog}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(e){}},model:{value:e.settings.activeName,callback:function(t){e.$set(e.settings,"activeName",t)},expression:"settings.activeName"}},[a("el-tab-pane",{attrs:{label:"余额调整",name:"first"}},[a("el-form",{ref:"balanceForm",attrs:{model:e.settings.balanceForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.password,callback:function(t){e.$set(e.settings.balanceForm,"password",t)},expression:"settings.balanceForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.verifyCode,callback:function(t){e.$set(e.settings.balanceForm,"verifyCode",t)},expression:"settings.balanceForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余额(-/+)",prop:"remain"}},[a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.settings.balanceForm.remain,callback:function(t){e.$set(e.settings.balanceForm,"remain",t)},expression:"settings.balanceForm.remain"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"修改说明",prop:"notes"}},[a("el-input",{model:{value:e.settings.balanceForm.notes,callback:function(t){e.$set(e.settings.balanceForm,"notes",t)},expression:"settings.balanceForm.notes"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("balanceForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("balanceForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Pe=a("VU/8")(Oe,Ae,!1,function(e){a("7mAk")},"data-v-7b60ee63",null).exports,ze={name:"payTypeList",components:{OneSwitch:De,OneButton:ne},data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1===t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{active:"印度",country:"",fullscreenLoading:!0,tableData:[],types:[],testPayVisible:!1,Successdialog:!1,isDisabled:!1,Sencond:10,testPayUrl:"",testPayNumber:"",page:{pageSize:10,total:0,cur:1},type:[],dialog:{isInsert:!0,visible:!1,form:{name:"",outName:"",params:"",feeFix:"",feeRate:"",sort:"",typesArr:[],types:"",workTime:"",range:"",currency:"",thirdRange:""}},dialogTest:{isInsert:!0,visible:!1,form:{appId:"",amount:"",type:"",payTypeId:""}},searchForm:{name:"",stauts:"",type:[],types:"",country:""},rulesTest:{Name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],Params:[{required:!0,message:"请输入接口参数",trigger:"blur"}],FeeFix:[{validator:e,trigger:"blur"}],FeeRate:[{validator:e,trigger:"blur"}],Type:[{type:"array",required:!0,message:"请至少选择一种方式",trigger:"change"}],Currency:[{required:!0,message:"请选择货币种类",trigger:"change"}],Range:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],ThirdRange:[{required:!0,message:"请输入上游单笔限额",trigger:"blur"}]},rules:{name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],outName:[{required:!0,message:"请输入通道别名",trigger:"blur"}],params:[{required:!0,message:"请输入接口参数",trigger:"blur"}],feeFix:[{validator:e,trigger:"blur"}],feeRate:[{validator:e,trigger:"blur"}],currency:[{required:!0,message:"请选择货币种类",trigger:"change"}],range:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],thirdRange:[{required:!0,message:"请输入上游单笔限额",trigger:"blur"}]},countryOptions:[],currencyOptions:[]}},created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searchForm.country="IND",e.queryCountryPageList(),e.queryCurrencyPageList(),t.next=5,e.refresh();case 5:case"end":return t.stop()}},t,e)}))()},methods:{refresh:function(){var e,t=this;this.searchForm.types=this.dialog.form.typesArr.sort(function(e,t){return e-t}).join(","),(e={page:this.page.cur,limit:this.page.pageSize,status:this.searchForm.status,name:this.searchForm.name,types:this.searchForm.types,country:this.searchForm.country},_({url:"/paytype/queryPayTypePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":d(a)},pageChange:function(e){this.page.cur=e,this.refresh()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.status?"success-row":"warning-row"},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.name=t.name,this.dialog.form.outName=t.outName,this.dialog.form.params=t.params,this.dialog.form.feeRate=t.feeRate,this.dialog.form.sort=t.sort,this.dialog.form.workTime=t.workTime,this.dialog.form.range=t.range,this.dialog.form.currency=t.currency,this.dialog.form.thirdRange=t.thirdRange,this.dialog.form.types=t.types,this.dialog.form.typesArr=String(t.types).split(","),this.dialog.form.feeFix=Number(t.feeFix/100).toFixed(2),this.dialog.visible=!0,this.dialog.isInsert=!1},handlePayTest:function(e,t){1===t.status?(this.dialogTest.form.payTypeId=t.id,console.log("handlePayTest:"+t.id),this.dialogTest.visible=!0):this.$message({message:"该商户未启用！",type:"warning"})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除通道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},_({url:"/paytype/deletePayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;r.dialog.form.types=String(r.dialog.form.typesArr).replace("[","").replace("]",""),(r.dialog.isInsert?(e=r.dialog.form,_({url:"/paytype/addPayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})):function(e){return _({url:"/paytype/updatePayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(r.dialog.form)).then(function(e){0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.dialog.form.typesArr=[],r.refresh(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},beforeCloseDialog:function(){console.log(1),this.$refs.ruleForm.clearValidate(),this.$refs.ruleForm.resetFields()},closeDialog:function(){var e=this.dialog.form;ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),e.stauts=-1,this.dialog.visible=!1,this.dialog.isInsert=!0,this.$refs.ruleForm.clearValidate()},search:function(){this.page.cur=1,this.refresh()},testPay:function(){var e=this;e.testPayUrl="",e.testPayNumber="";var t,a={appId:this.dialogTest.form.appId,amount:100*this.dialogTest.form.amount,type:this.dialogTest.form.type,payTypeId:this.dialogTest.form.payTypeId};(t=a,console.log(S.a.stringify(t)),_({url:"https://tmpay.shop/appclient/testPay.do?"+S.a.stringify(t)})).then(function(t){var a=t.data;if(a.url){var r=a.url;String(r).startsWith("http")||String(r).startsWith("https")?(e.$message("获得支付链接成功"),e.testPayUrl=r,e.Successdialog=!0):(e.testPayNumber=r,e.Successdialog=!0)}else e.$message("此通道请求失败")}).catch(function(e){})},getSencond:function(e){var t=this,a=window.setInterval(function(){--t.Sencond,0===t.Sencond&&(window.clearInterval(a),window.open(e))},1e3)},sendMsg:function(){window.close()},returnPayUrl:function(){window.open(this.testPayUrl)},changeStatus:function(e){var t=this;this.$confirm("改变当前通道状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t;(a={id:e.id,status:1===e.status?-1:1},_({url:"/paytype/changePayTypeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){0===e.data.code?r.$message({message:"修改成功",type:"success"}):r.$message.error("修改失败"),this.refresh()})}).catch(function(){t.refresh(),t.$message({type:"info",message:"已取消"})})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()},changeList:function(e){this.country=e.value},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.countryOptions,function(t,r){return a("el-tab-pane",{key:t.value,attrs:{label:t.label,name:t.label},on:{click:function(a){return e.changeList(t)}}},[e._v(e._s(t.name)+"\n      ")])}),1)],e._v(" "),a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"通道",prop:"name"}},[a("el-input",{attrs:{placeholder:"通道ID或名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"银行卡",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电子钱包",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"UPI",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"PIX",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"CLABE",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"HTML",value:"7"}})],1)],1),e._v(" "),a("el-form-item",[a("one-button",{attrs:{type:"primary",perms:"type-payTypeList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("one-button",{attrs:{plain:"",perms:"type-payTypeList-add"},on:{click:function(t){e.dialog.visible=!0}}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"配置参数"}},[a("span",[e._v(e._s(t.row.params))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"通道ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outName",label:"别名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"手续费",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("\n          "+e._s(Number(t.row.feeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.feeRate).toFixed(2))+"%\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"权重",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"充值方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.types&&-1!==t.row.types.indexOf("1")?a("el-tag",{attrs:{size:"mini"}},[e._v("银行卡")]):e._e(),e._v(" "),t.row.types&&-1!==t.row.types.indexOf("2")?a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("电子钱包")]):e._e(),e._v(" "),t.row.types&&-1!==t.row.types.indexOf("3")?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("UPI\n        ")]):e._e(),e._v(" "),t.row.types&&-1!==t.row.types.indexOf("7")?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("HTML\n        ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单笔限额",prop:"range",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"货币",prop:"currency",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",formatter:e.dateFormat,align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用通道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.status,switchData:JSON.stringify(t.row),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1,perms:"type-payTypeList-on/off"},on:{changeSwitch:function(a){return e.changeStatus(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{attrs:{size:"mini",perms:"type-payTypeList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"type-payTypeList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",perms:"type-payTypeList-test"},on:{click:function(a){return e.handlePayTest(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:this.dialog.isInsert?"新增通道":"修改通道",visible:e.dialog.visible},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-dialog",{attrs:{title:"提示",visible:e.Successdialog,"show-close":!1,"close-on-click-modal":!0,"close-on-press-escape":!1,width:"30%",center:""},on:{"update:visible":function(t){e.Successdialog=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Successdialog=!1}}},[e._v("立即关闭")])],1)]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.dialog.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"通道名称",prop:"name"}},[a("el-input",{model:{value:e.dialog.form.name,callback:function(t){e.$set(e.dialog.form,"name",t)},expression:"dialog.form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通道别名",prop:"outName"}},[a("el-input",{model:{value:e.dialog.form.outName,callback:function(t){e.$set(e.dialog.form,"outName",t)},expression:"dialog.form.outName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口参数",prop:"params"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.dialog.form.params,callback:function(t){e.$set(e.dialog.form,"params",t)},expression:"dialog.form.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（固定）",prop:"feeFix"}},[a("el-input",{model:{value:e.dialog.form.feeFix,callback:function(t){e.$set(e.dialog.form,"feeFix",t)},expression:"dialog.form.feeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（费率）",prop:"feeRate"}},[a("el-input",{model:{value:e.dialog.form.feeRate,callback:function(t){e.$set(e.dialog.form,"feeRate",t)},expression:"dialog.form.feeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权重",prop:"sort"}},[a("el-input-number",{attrs:{min:0},model:{value:e.dialog.form.sort,callback:function(t){e.$set(e.dialog.form,"sort",t)},expression:"dialog.form.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"充值方式",prop:"type"}},[a("el-checkbox-group",{model:{value:e.dialog.form.typesArr,callback:function(t){e.$set(e.dialog.form,"typesArr",t)},expression:"dialog.form.typesArr"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("银行卡")]),e._v(" "),a("el-checkbox",{attrs:{label:"2",name:"type"}},[e._v("电子钱包")]),e._v(" "),a("el-checkbox",{attrs:{label:"3",name:"type"}},[e._v("UPI")]),e._v(" "),a("el-checkbox",{attrs:{label:"7",name:"type"}},[e._v("HTML")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工作时间",prop:"workTime"}},[a("el-input",{model:{value:e.dialog.form.workTime,callback:function(t){e.$set(e.dialog.form,"workTime",t)},expression:"dialog.form.workTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单笔限额",prop:"range"}},[e.dialog.isInsert?e._e():a("el-tag",{attrs:{type:"info"}},[e._v("上游："+e._s(e.dialog.form.thirdRange))]),e._v(" "),a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.range,callback:function(t){e.$set(e.dialog.form,"range",t)},expression:"dialog.form.range"}})],1),e._v(" "),e.dialog.isInsert?a("el-form-item",{attrs:{label:"上游限额",prop:"thirdRange"}},[a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.thirdRange,callback:function(t){e.$set(e.dialog.form,"thirdRange",t)},expression:"dialog.form.thirdRange"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"货币类型",prop:"currency"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialog.form.currency,callback:function(t){e.$set(e.dialog.form,"currency",t)},expression:"dialog.form.currency"}},e._l(this.currencyOptions,function(t,r){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}},[e._v(e._s(t.value)+"\n          ")])}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),this.dialog.isInsert?a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置\n        ")]):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"通道信息",visible:e.dialogTest.visible},on:{"update:visible":function(t){return e.$set(e.dialogTest,"visible",t)}}},[a("el-dialog",{attrs:{title:"提示",visible:e.Successdialog,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,modal:!1,width:"30%",center:""},on:{"update:visible":function(t){e.Successdialog=t}}},[e.testPayUrl?a("span",{staticStyle:{"font-size":"16px"}},[e._v("获取到支付链接："),a("span",{staticStyle:{color:"#01AAED"}},[e._v(e._s(e.testPayUrl))])]):e._e(),e._v(" "),e.testPayNumber?a("span",{staticStyle:{"font-size":"16px"}},[e._v("获取到转账账号:"+e._s(e.testPayNumber))]):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Successdialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.returnPayUrl()}}},[e._v("立即跳转")])],1)]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.dialogTest.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"测试商户Id"}},[a("el-input",{model:{value:e.dialogTest.form.appId,callback:function(t){e.$set(e.dialogTest.form,"appId",t)},expression:"dialogTest.form.appId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"金额"}},[a("el-input",{model:{value:e.dialogTest.form.amount,callback:function(t){e.$set(e.dialogTest.form,"amount",t)},expression:"dialogTest.form.amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.dialogTest.form.type,callback:function(t){e.$set(e.dialogTest.form,"type",t)},expression:"dialogTest.form.type"}},[a("el-option",{attrs:{label:"银行卡",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电子钱包",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"UPI",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"TRC20",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"HTML",value:"7"}})],1)],1)],1),e._v(" "),a("el-button",{on:{click:function(t){e.dialogTest.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.testPay()}}},[e._v("确 定")])],1)],2)},staticRenderFns:[]};var We=a("VU/8")(ze,Re,!1,function(e){a("UcMm")},"data-v-8e08c2f6",null).exports,Be={name:"withdrawTypeList",components:{OneSwitch:De,OneButton:ne},data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1===t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{active:"印度",fullscreenLoading:!0,tableData:[],page:{pageSize:10,total:0,cur:1},dialog:{isInsert:!0,visible:!1,form:{name:"",outName:"",params:"",feeFix:"",feeRate:"",sort:"",types:"",workTime:"",range:"",currency:"",thirdRange:""}},type:[],searchForm:{name:"",stauts:"",type:[],types:"",country:""},rules:{name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],outName:[{required:!0,message:"请输入通道别名",trigger:"blur"}],params:[{required:!0,message:"请输入接口参数",trigger:"blur"}],feeFix:[{validator:e,trigger:"blur"}],feeRate:[{validator:e,trigger:"blur"}],currency:[{required:!0,message:"请选择货币种类",trigger:"change"}],range:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],thirdRange:[{required:!0,message:"请输入上游单笔限额",trigger:"blur"}]},countryOptions:[],currencyOptions:[]}},created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searchForm.country="IND",e.queryCurrencyPageList(),e.queryCountryPageList(),t.next=5,e.refresh();case 5:case"end":return t.stop()}},t,e)}))()},methods:{refresh:function(){var e,t=this;this.searchForm.types=this.searchForm.type.sort(function(e,t){return e-t}).join(","),(e={page:this.page.cur,limit:this.page.pageSize,status:this.searchForm.status,name:this.searchForm.name,types:this.searchForm.types,country:this.searchForm.country},_({url:"/withdrawtype/queryWithdrawTypePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":d(a)},pageChange:function(e){this.page.cur=e,this.refresh()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.status?"success-row":"warning-row"},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.name=t.name,this.dialog.form.outName=t.outName,this.dialog.form.params=t.params,this.dialog.form.status=t.status,this.dialog.form.feeRate=t.feeRate,this.dialog.form.sort=t.sort,this.dialog.form.workTime=t.workTime,this.dialog.form.range=t.range,this.dialog.form.currency=t.currency,this.dialog.form.thirdRange=t.thirdRange,this.dialog.form.types=t.types,this.type=t.types.replace("1","银行卡").replace("2","电子钱包").replace("3","UPI").split(","),this.dialog.form.feeFix=Number(t.feeFix/100).toFixed(2),this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除通道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},_({url:"/withdrawtype/deleteWithdrawType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;r.dialog.form.types=r.type.toString().replace("银行卡","1").replace("电子钱包","2").replace("UPI","3"),(t.dialog.isInsert?(e=r.dialog.form,_({url:"/withdrawtype/addWithdrawType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})):function(e){return _({url:"/withdrawtype/updateWithdrawType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(r.dialog.form)).then(function(e){0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.refresh(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields(),this.type=[]},closeDialog:function(){var e=this.dialog.form;ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),e.stauts=-1,this.dialog.visible=!1,this.dialog.isInsert=!0,this.$refs.ruleForm.clearValidate()},search:function(){this.page.cur=1,this.refresh()},changeStatus:function(e){var t=this;this.$confirm("改变当前通道状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t;(a={id:e.id,status:1===e.status?-1:1},_({url:"/withdrawtype/changeWithdrawTypeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){0===e.data.code?r.$message({message:"修改成功",type:"success"}):r.$message.error("修改失败"),r.refresh()})}).catch(function(){t.refresh(),t.$message({type:"info",message:"已取消"})})},queryCountryPageList:function(){console.log("currency");var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()}}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.countryOptions,function(t,r){return a("el-tab-pane",{key:t.value,attrs:{label:t.label,name:t.label}},[e._v(e._s(t.name)+"\n      ")])}),1)],e._v(" "),a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"通道",prop:"name"}},[a("el-input",{attrs:{placeholder:"通道ID或名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"银行卡",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电子钱包",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"UPI",value:"3"}})],1)],1),e._v(" "),a("el-form-item",[a("one-button",{attrs:{type:"primary",perms:"type-withdrawTypeList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("one-button",{attrs:{plain:"",perms:"type-withdrawTypeList-add"},on:{click:function(t){e.dialog.visible=!0}}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"配置参数"}},[a("span",[e._v(e._s(t.row.params))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"通道ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outName",label:"通道别名"}}),e._v(" "),a("el-table-column",{attrs:{label:"手续费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(Number(t.row.feeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.feeRate).toFixed(2))+"%\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{label:"提现方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=t.row.types.indexOf("1")?a("el-tag",{attrs:{size:"mini"}},[e._v("银行卡")]):e._e(),e._v(" "),-1!=t.row.types.indexOf("2")?a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("电子钱包")]):e._e(),e._v(" "),-1!=t.row.types.indexOf("3")?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("UPI")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单笔限额",prop:"range"}}),e._v(" "),a("el-table-column",{attrs:{label:"工作时间",prop:"worktime"}}),e._v(" "),a("el-table-column",{attrs:{label:"货币类型",prop:"currency"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.status,switchData:JSON.stringify(t.row),"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1,perms:"type-withdrawTypeList-on/off"},on:{changeSwitch:function(a){return e.changeStatus(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{attrs:{size:"mini",perms:"type-withdrawTypeList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"type-withdrawTypeList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"通道信息",visible:e.dialog.visible},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.dialog.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"通道名称",prop:"name"}},[a("el-input",{model:{value:e.dialog.form.name,callback:function(t){e.$set(e.dialog.form,"name",t)},expression:"dialog.form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通道别名",prop:"outName"}},[a("el-input",{model:{value:e.dialog.form.outName,callback:function(t){e.$set(e.dialog.form,"outName",t)},expression:"dialog.form.outName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口参数",prop:"params"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.dialog.form.params,callback:function(t){e.$set(e.dialog.form,"params",t)},expression:"dialog.form.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（固定）",prop:"feeFix"}},[a("el-input",{model:{value:e.dialog.form.feeFix,callback:function(t){e.$set(e.dialog.form,"feeFix",t)},expression:"dialog.form.feeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（费率）",prop:"feeRate"}},[a("el-input",{model:{value:e.dialog.form.feeRate,callback:function(t){e.$set(e.dialog.form,"feeRate",t)},expression:"dialog.form.feeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权重",prop:"sort"}},[a("el-input-number",{attrs:{min:0},model:{value:e.dialog.form.sort,callback:function(t){e.$set(e.dialog.form,"sort",t)},expression:"dialog.form.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-checkbox-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-checkbox",{attrs:{label:"银行卡",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"电子钱包",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"UPI",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工作时间",prop:"workTime"}},[a("el-input",{model:{value:e.dialog.form.workTime,callback:function(t){e.$set(e.dialog.form,"workTime",t)},expression:"dialog.form.workTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单笔限额",prop:"range"}},[e.dialog.isInsert?e._e():a("el-tag",{attrs:{type:"info"}},[e._v("上游："+e._s(e.dialog.form.thirdRange))]),e._v(" "),a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.range,callback:function(t){e.$set(e.dialog.form,"range",t)},expression:"dialog.form.range"}})],1),e._v(" "),e.dialog.isInsert?a("el-form-item",{attrs:{label:"上游限额",prop:"thirdRange"}},[a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.thirdRange,callback:function(t){e.$set(e.dialog.form,"thirdRange",t)},expression:"dialog.form.thirdRange"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"货币类型",prop:"currency"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialog.form.currency,callback:function(t){e.$set(e.dialog.form,"currency",t)},expression:"dialog.form.currency"}},e._l(this.currencyOptions,function(t,r){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}},[e._v(e._s(t.value)+"\n          ")])}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],2)},staticRenderFns:[]};var Me=a("VU/8")(Be,qe,!1,function(e){a("2Jx9")},"data-v-18135ad2",null).exports,Ee={name:"cpInfoTotalStatistics",data:function(){return{fullscreenLoading:!1,createTime:[],searchForm:{id:null,appId:"",statDay:"",page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){var t=void 0;return t=this.pickerOptionsStartCreate?new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1:Date.now()-864e5,e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",formLabelWidth:120,sending:!1}},created:function(){this.queryCpInfoStatisticsPageList()},methods:{queryCpInfoStatisticsPageList:function(){var e=this;return this.fullscreenLoading=!0,new y.a(function(t){var a;(a=e.searchForm,_({url:"/cpinfo/queryCpInfoStatisticsPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],i=!0,s=!1,n=void 0;try{for(var o,l=f()(a);!(i=(o=l.next()).done);i=!0){var c=o.value;c.totalPay=u(c.totalPay),c.totalPayFee=u(c.totalPayFee),c.totalWithdraw=u(c.totalWithdraw),c.totalWithdrawFee=u(c.totalWithdrawFee),r.push(c)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.tableData=r,e.fullscreenLoading=!1}})})},search:function(){this.searchForm.page=1,this.queryCpInfoStatisticsPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryCpInfoStatisticsPageList()}}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPay",label:"总代收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPayFee",label:"代收手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPayNum",label:"代收笔数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalWithdraw",label:"总代付",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalWithdrawFee",label:"代付手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalWithdrawNum",label:"代付笔数",align:"center"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var Ue=a("VU/8")(Ee,Ve,!1,function(e){a("Z+Ma")},"data-v-8247e2f0",null).exports;var He={name:"cpInfoDailyStatistics",data:function(){return{fullscreenLoading:!1,createTime:[],appIdsStr:"",searchForm:{id:null,appIds:[],statDays:[],page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",formLabelWidth:120,sending:!1}},watch:{tableData:{handler:function(e,t){this.$nextTick(function(){var e=document.getElementsByClassName("el-table__footer-wrapper")[0];e.setAttribute("style",""),e.getElementsByTagName("tr")[0].childNodes.forEach(function(e){e.setAttribute("style",";font-size:0.8rem;font-weight: bold")})})},immediate:!0,deep:!0}},created:function(){this.queryCpStatPageList()},methods:{queryCpStatPageList:function(){var e=this;this.fullscreenLoading=!0;var t=/^,|，| $/,a=String(e.appIdsStr);return""!==a?t.test(a)?e.searchForm.appIds=a.split(t):(e.searchForm.appIds=[],e.searchForm.appIds.push(a)):e.searchForm.appIds=null,new y.a(function(t){var a;(a=e.searchForm,_({url:"/cpstat/queryCpStatPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],i=!0,s=!1,n=void 0;try{for(var o,l=f()(a);!(i=(o=l.next()).done);i=!0){var c=o.value;c.payAmount=u(c.payAmount),c.payFee=u(c.payFee),c.withdrawAmount=u(c.withdrawAmount),c.withdrawFee=u(c.withdrawFee),r.push(c)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.tableData=r,e.fullscreenLoading=!1}})})},handleSizeChange:function(e){this.searchForm.limit=e,this.queryCpStatPageList()},search:function(){this.searchForm.page=1,this.queryCpStatPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[],"searchForm"===e&&(this.appIdsStr="",this.searchForm.appIds=[],this.searchForm.statDays=[])},pageChange:function(e){this.searchForm.page=e,this.queryCpStatPageList()},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(0!==t){if(1!==t){var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]+=" ")}}else r[t]="合计"}),r[2]=Number(r[2]).toFixed(2),r[3]=Number(r[3]).toFixed(2),r[5]=Number(r[5]).toFixed(2),r[6]=Number(r[6]).toFixed(2),r[8]=Number(r[2]-r[3]-r[5]-r[6]).toFixed(2),r}}},je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appIds"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.appIdsStr,callback:function(t){e.appIdsStr=t},expression:"appIdsStr"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"日期",prop:"statDay"}},[a("el-date-picker",{attrs:{type:"dates",placeholder:"选择日期","value-format":"yyyyMMdd",multiple:""},model:{value:e.searchForm.statDays,callback:function(t){e.$set(e.searchForm,"statDays",t)},expression:"searchForm.statDays"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini","show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statDay",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payAmount",label:"总代收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payFee",label:"代收手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"代收笔数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"总代付",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawFee",label:"代付手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawNum",label:"代付笔数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"核算",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Number(t.row.payAmount-t.row.payFee-t.row.withdrawAmount-t.row.withdrawFee).toFixed(2))+"\n          ")]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)]],2)},staticRenderFns:[]};var Ge=a("VU/8")(He,je,!1,function(e){a("MpRT")},"data-v-23b8da96",null).exports;function Qe(e){return _({url:"/role/queryRoleSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var Xe={name:"userList",components:{OneSwitch:De,OneButton:ne,cButton:ne},data:function(){var e=this,t=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fullscreenLoading:!0,searchForm:{userName:"",page:1,limit:10},total:0,dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",userName:"",password:"",passwordNew:"",role:"",roles:[]},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],UserPass:[{required:!0,message:"请输入账号密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.dialog.form.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.dialog.form.UserPass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],SubRatio:[{required:!0,message:"请输入",trigger:"blur"}],RemainDelayDay:[{required:!0,message:"请输入",trigger:"blur"}],AgentpayFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],AgentpayFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],AgentwithdrawFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],AgentwithdrawFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""},creditForm:{password:"",Verifycode:"",remain:"0"},agentForm:{UserName:""},typeForm:{payType:0,withdrawType:0},rules:{UserName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],Verifycode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:t,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:t,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],roleOptions:[],addFormTitle:"添加用户"}},created:function(){this.queryUserPageList(),this.queryRoleSelectList()},methods:{queryUserPageList:function(){var e,t=this;(e=t.searchForm,_({url:"/user/queryUserPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.total=e.data.count)})},refresh:function(){},pageChange:function(e){this.searchForm.page=e,this.queryUserPageList()},search:function(){this.searchForm.page=1,this.queryUserPageList()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;"ruleForm"===e&&t.saveUser()})},saveUser:function(){var e=this.dialog.isInsert?"添加":"编辑";this.addFormTitle=e+"用户";var t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r={id:t.dialog.form.id,userName:t.dialog.form.userName,password:t.dialog.form.password,passwordNew:t.dialog.form.passwordNew,role:t.dialog.form.role,roles:t.dialog.form.roles.join(",")};(t.dialog.isInsert?(a=r,_({url:"/user/addUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})):function(e){return _({url:"/user/updateUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(r)).then(function(a){0===a.data.code?(t.$message({message:e+"成功",type:"success"}),t.queryUserPageList()):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.closeDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.dialog.form.roles=""},beforeClose:function(){this.dialog.form.roles=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId="",this.dialog.form.roles=[]},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.id=t.userId,this.dialog.form.userName=t.username,this.dialog.form.password=t.password,this.dialog.form.passwordNew=t.password,this.dialog.form.roles=t.roles.split(","),this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.userId},_({url:"/user/deleteUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.queryUserPageList()})})},changeStatus:function(e){var t=this;re({id:e.userId,status:0===e.status?1:0}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeSettings:function(e){if(this.settings.visible=!0,e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var t=e.DefaultPayTypeId.split("、"),a=[],r=0;r<t.length;r++)a.push(t[r]+"");this.settings.typeForm.payType=a}else this.settings.typeForm.payType=[];if(e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var i=e.DefaultWithdrawTypeId.split("、"),s=[],n=0;n<i.length;n++)s.push(i[n]+"");this.settings.typeForm.withdrawType=s}else this.settings.typeForm.withdrawType=[];this.settings.userName=e.UserName,this.settings.appId=e.appId,this.settings.payFeeFix=e.payFeeFix,this.settings.payFeeRate=e.payFeeRate,this.settings.withdrawFeeFix=e.withdrawFeeFix,this.settings.withdrawFeeRate=e.withdrawFeeRate},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryRoleSelectList:function(){var e=this;return new y.a(function(t){Qe().then(function(t){0===t.data.code&&(e.roleOptions=[],t.data.data.forEach(function(t,a){e.roleOptions.push({label:t.rolename,value:t.id+""})}))})})},addUser:function(){this.dialog.isInsert=!0;this.dialog.isInsert;this.dialog.visible=!0}}},Ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"用户",prop:"userName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),e._v(" "),a("el-form-item",[a("one-button",{attrs:{type:"primary",perms:"user-userList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("c-button",{attrs:{plain:"",perms:"user-userList-add"},on:{click:function(t){return e.addUser()}}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"密码"}},[a("span",[e._v(e._s(t.row.password))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleNames",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"上次登陆时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:t.row.status,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,perms:"user-userList-on/off"},on:{changeSwitch:function(a){return e.changeStatus(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("c-button",{attrs:{size:"mini",perms:"user-userList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"user-userList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:this.dialog.isInsert?"添加用户":"编辑用户",visible:e.dialog.visible,width:"24rem"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"用户账号","label-width":e.dialog.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.userName,callback:function(t){e.$set(e.dialog.form,"userName",t)},expression:"dialog.form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.dialog.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.password,callback:function(t){e.$set(e.dialog.form,"password",t)},expression:"dialog.form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.dialog.formLabelWidth,prop:"passwordNew"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.passwordNew,callback:function(t){e.$set(e.dialog.form,"passwordNew",t)},expression:"dialog.form.passwordNew"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属角色","label-width":e.dialog.formLabelWidth,prop:"roles"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择",filterable:""},model:{value:e.dialog.form.roles,callback:function(t){e.$set(e.dialog.form,"roles",t)},expression:"dialog.form.roles"}},[a("el-option",{staticStyle:{color:"#8492a6","font-size":"13px"},attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.roleOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Ye=a("VU/8")(Xe,Ke,!1,function(e){a("xkJd")},"data-v-aa285a4e",null).exports;function Ze(e){return _({url:"/permission/queryPermissionTreeList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var Je={name:"roleList",components:{OneButton:ne},data:function(){return{fullscreenLoading:!1,direction:"rtl",searchForm:{id:null,roleNo:"",roleName:"",page:1,limit:10,rowIndex:0},dialog:{isInsert:!0,visible:!1,form:{id:null,roleNo:"",roleName:"",details:""}},showRoleMenuDrawer:!1,roleMenuDrawerData:{roleId:""},selectedMenu:[],successDialog:!1,tableData:[],total:0,dateStart:"",dateEnd:"",pickerOptionsStart:{},pickerOptionsEnd:{disabledDate:function(e){if(this.dateStart)var t=new Date(this.dateStart).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1,rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleNo:[{required:!0,message:"请输入角色Level",trigger:"blur"}]},roleMenuData:[],defaultProps:{children:"children",label:"label"},roleMenuRoleNo:"",roleLevel:""}},created:function(){this.queryRolePageList(),this.queryRoleMenuTreeList()},methods:{queryRolePageList:function(){var e=this;return this.fullscreenLoading=!0,new y.a(function(t){var a;(a=e.searchForm,_({url:"/role/queryRolePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],i=!0,s=!1,n=void 0;try{for(var o,l=f()(a);!(i=(o=l.next()).done);i=!0){var c=o.value;r.push(c)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.tableData=r,e.fullscreenLoading=!1}})})},queryRoleMenuTreeList:function(){var e=this;return this.fullscreenLoading=!0,new y.a(function(t){Ze().then(function(t){if(0===t.data.code){var a=t.data.data;e.$nextTick(function(){e.roleMenuData=a})}})})},search:function(){this.searchForm.page=1,this.searchForm.limit=10,this.queryRolePageList()},pageChange:function(e){this.searchForm.page=e,this.queryRolePageList()},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.roleNo=t.roleNo,this.dialog.form.roleName=t.roleName,this.dialog.form.details=t.details,this.dialog.visible=!0,this.dialog.isInsert=!1},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert;this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(t.dialog.isInsert?(e=r.dialog.form,_({url:"/role/addRole",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})):function(e){return _({url:"/role/updateRole",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(r.dialog.form)).then(function(e){0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.type=[],r.queryRolePageList(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){var e=this.dialog.form;ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.visible=!1,this.dialog.isInsert=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除通道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},_({url:"/role/deleteRole",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.queryRolePageList()})})},openRoleMenuDrawer:function(e,t){this.roleMenuRoleNo=t.roleNo,this.selectedMenu=[],this.queryRoleMenuSelectByRoleId(t.roleNo),this.showRoleMenuDrawer=!0},closeRoleMenuDrawer:function(){this.showRoleMenuDrawer=!1},queryRoleMenuSelectByRoleId:function(){var e,t=this;(e={role:t.roleMenuRoleNo},_({url:"/permission/getMenuListSelectByRoleId",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=[],r=e.data.data;t.$nextTick(function(){var e=!0,i=!1,s=void 0;try{for(var n,o=f()(r);!(e=(n=o.next()).done);e=!0){var l=n.value;a.push({id:l})}}catch(e){i=!0,s=e}finally{try{!e&&o.return&&o.return()}finally{if(i)throw s}}t.$refs.tree.setCheckedNodes(a)})}})},updateRoleMenu:function(){var e,t=this.$refs.tree.getCheckedKeys(),a=this;(e={roleNo:a.roleMenuRoleNo,permissionIds:t.join(",")},_({url:"/rolepermission/updateRolePermission",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code&&a.closeRoleMenuDrawer()})}}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.roleName,callback:function(t){e.$set(e.searchForm,"roleName",t)},expression:"searchForm.roleName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"Level",prop:"roleNo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.roleNo,callback:function(t){e.$set(e.searchForm,"roleNo",t)},expression:"searchForm.roleNo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",[a("one-button",{attrs:{type:"primary",perms:"system-roleList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",[a("el-row",[a("one-button",{attrs:{plain:"",perms:"system-roleList-add"},on:{click:function(t){e.dialog.visible=!0}}})],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleNo",label:"Level"}}),e._v(" "),a("el-table-column",{attrs:{prop:"details",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{attrs:{size:"mini",perms:"system-roleList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"system-roleList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",perms:"system-roleList-roleMenu"},on:{click:function(a){return e.openRoleMenuDrawer(t.$index,t.row)}}})]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"角色信息",visible:e.dialog.visible},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-dialog",{attrs:{title:"提示",visible:e.successDialog,"show-close":!1,"close-on-click-modal":!0,"close-on-press-escape":!1,width:"30%",center:""},on:{"update:visible":function(t){e.successDialog=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.successDialog=!1}}},[e._v("立即关闭")])],1)]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,rules:e.rules,width:"24rem","label-width":"6rem"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{model:{value:e.dialog.form.roleName,callback:function(t){e.$set(e.dialog.form,"roleName",t)},expression:"dialog.form.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Level",prop:"roleNo"}},[a("el-input",{model:{value:e.dialog.form.roleNo,callback:function(t){e.$set(e.dialog.form,"roleNo",t)},expression:"dialog.form.roleNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"details"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.dialog.form.details,callback:function(t){e.$set(e.dialog.form,"details",t)},expression:"dialog.form.details"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n              立即创建\n            ")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置\n            ")])],1)],1)],1)],1),e._v(" "),a("div",[a("el-drawer",{attrs:{title:"菜单分配",visible:e.showRoleMenuDrawer,direction:e.direction,size:"40%"},on:{"update:visible":function(t){e.showRoleMenuDrawer=t}}},[a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px"}},[[a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-tree",{ref:"tree",attrs:{data:e.roleMenuData,"show-checkbox":"","node-key":"id",props:e.defaultProps,"default-expand-all":!0,"check-strictly":!0}}),e._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.updateRoleMenu}},[e._v("提交")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)]],2)])],1)]],2)},staticRenderFns:[]};var tt=a("VU/8")(Je,et,!1,function(e){a("Qz60")},"data-v-5c9b34e3",null).exports,at={name:"channelTotalStatistics",data:function(){return{fullscreenLoading:!0,searchForm:{payTypeId:"",page:1,limit:10},payTypeStaticticsTableData:[],total:0,payTypeOptions:[]}},created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.queryPayLogStaticticsByPayType(),e.queryAllPaytypeList();case 2:case"end":return t.stop()}},t,e)}))()},methods:{queryPayLogStaticticsByPayType:function(){var e,t=this;(e=t.searchForm,_({url:"/paylog/payTypeStatictics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=e.data.data;t.total=e.data.count,t.payTypeStaticticsTableData=[];var r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;l.payAmount=u(l.payAmount),l.payFee=u(l.payFee),l.withdrawAmount=u(l.withdrawAmount),l.withdrawFee=u(l.withdrawFee),l.remain=u(l.remain),t.payTypeStaticticsTableData.push(l)}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}})},pageChange:function(e){this.searchForm.page=e,this.queryPayLogStaticticsByPayType()},queryAllPaytypeList:function(){var e=this;ae().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;e.payTypeOptions.push({label:l.name,value:l.id})}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}})},search:function(){this.queryPayLogStaticticsByPayType()},resetForm:function(e){this.$refs[e].resetFields()}}},rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{span:4}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.payTypeId,callback:function(t){e.$set(e.searchForm,"payTypeId",t)},expression:"searchForm.payTypeId"}},e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.payTypeStaticticsTableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"payTypeId",label:"通道id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payAmount",label:"代收总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payFee",label:"代收总手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"代收单数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"代付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawFee",label:"代付手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawNum",label:"代付单数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remain",label:"通道余额"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var it=a("VU/8")(at,rt,!1,function(e){a("EzE5")},"data-v-9d2d9fc0",null).exports,st={name:"channelDailyStatistics",data:function(){return{fullscreenLoading:!0,searchForm:{payTypeIds:[],statDays:[],page:1,limit:10},payTypeStaticticsTableData:[],total:0,payTypeOptions:[]}},watch:{tableData:{handler:function(e,t){this.$nextTick(function(){var e=document.getElementsByClassName("el-table__footer-wrapper")[0];e.setAttribute("style",""),e.getElementsByTagName("tr")[0].childNodes.forEach(function(e){e.setAttribute("style",";font-size:0.8rem;font-weight: bold")})})},immediate:!0,deep:!0}},created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getChannelDailyStatistics(),e.queryAllPaytypeList();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getChannelDailyStatistics:function(){var e,t=this;(e=t.searchForm,_({url:"/paytype/getChannelDailyStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=e.data.data;t.total=e.data.count,t.payTypeStaticticsTableData=[];var r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;l.payAmount=Number(.01*l.payAmount).toFixed(2),l.payFee=Number(.01*l.payFee).toFixed(2),l.withdrawAmount=Number(.01*l.withdrawAmount).toFixed(2),l.withdrawFee=Number(.01*l.withdrawFee).toFixed(2)}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}t.payTypeStaticticsTableData=a}})},pageChange:function(e){this.searchForm.page=e,this.getChannelDailyStatistics()},queryAllPaytypeList:function(){var e=this;ae().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;e.payTypeOptions.push({label:l.name,value:l.id})}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}})},tableStatistics:function(e){return e.payAmount-e.payFee-e.withdrawAmount-e.withdrawFee},search:function(){this.getChannelDailyStatistics()},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.payTypeIds=[],this.searchForm.statDays=[]},handleSizeChange:function(e){this.searchForm.limit=e,this.getChannelDailyStatistics()},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(0!==t){if(1!==t&&2!==t){var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]+=" ")}}else r[t]="合计"}),r[3]=Number(r[3]).toFixed(2),r[4]=Number(r[4]).toFixed(2),r[5]=Number(r[5]).toFixed(2),r[6]=Number(r[6]).toFixed(2),r[7]=Number(r[3]-r[4]-r[5]-r[6]).toFixed(2),r}}},nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeIds"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",multiple:""},model:{value:e.searchForm.payTypeIds,callback:function(t){e.$set(e.searchForm,"payTypeIds",t)},expression:"searchForm.payTypeIds"}},e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"日期",prop:"statDay"}},[a("el-date-picker",{attrs:{type:"dates",placeholder:"选择日期","value-format":"yyyyMMdd",multiple:""},model:{value:e.searchForm.statDays,callback:function(t){e.$set(e.searchForm,"statDays",t)},expression:"searchForm.statDays"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.payTypeStaticticsTableData,size:"mini","show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"channelId",label:"通道id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statDay",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payAmount",label:"代收总金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payFee",label:"代收总手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"代付金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawFee",label:"代付手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"核算",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Number(t.row.payAmount-t.row.payFee-t.row.withdrawAmount-t.row.withdrawFee).toFixed(2))+"\n          ")]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)]],2)},staticRenderFns:[]};var ot=a("VU/8")(st,nt,!1,function(e){a("CQsZ")},"data-v-f4a8a30e",null).exports;var lt={name:"BankRecordList",data:function(){return{fullscreenLoading:!1,centerDialogVisible:!1,innerVisible:!1,direction:"rtl",grabTime:[],payTypeOptions:[],searchForm:{id:null,type:null,payTypeId:null,transaction_id:"",payment_type:"",sync_status:null,bank_type:null,startGrabTime:"",endGrabTime:"",page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.searchForm.startGrabTime)var t=new Date(this.searchForm.startGrabTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},formLabelWidth:120,matching:!1,searchStatistics:{needPayAmount:0,payAmount:0,payFee:0,payNum:0}}},created:function(){this.queryBankRecordPageList(),this.searchFormOri=this.searchForm,this.queryAllPaytypeList()},methods:{queryBankRecordPageList:function(){this.searchForm.startGrabTime=""===this.grabTime?"":this.grabTime[0],this.searchForm.endGrabTime=""===this.grabTime?"":this.grabTime[1];var e=this;return e.fullscreenLoading=!0,new y.a(function(t){var a;(a=e.searchForm,_({url:"/bankRecord/queryBankRecordPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=[],r=t.data.data.statistics,i=t.data.data.list,s=!0,n=!1,o=void 0;try{for(var l,u=f()(i);!(s=(l=u.next()).done);s=!0){var d=l.value;d.sync_status=1===d.sync_status?"匹配成功":"未匹配",d.amount=c(100*Number(d.amount)),d.balance=c(100*Number(d.balance)),a.push(d)}}catch(e){n=!0,o=e}finally{try{!s&&u.return&&u.return()}finally{if(n)throw o}}e.tableData=a,e.total=r.count,e.fullscreenLoading=!1}})})},search:function(){this.queryBankRecordPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.grabTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryBankRecordPageList()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},handleClose:function(e){e()},handleSizeChange:function(e){this.searchForm.limit=e,this.queryAllPayLog()},queryAllPaytypeList:function(){var e=this;ae().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;e.payTypeOptions.push({label:l.name,value:l.id})}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}})}}},ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"UTR",prop:"transaction_id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.transaction_id,callback:function(t){e.$set(e.searchForm,"transaction_id",t)},expression:"searchForm.transaction_id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"转入/转出",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"转入",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"转出",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"匹配状态",prop:"sync_status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.sync_status,callback:function(t){e.$set(e.searchForm,"sync_status",t)},expression:"searchForm.sync_status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"匹配成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未匹配",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.payTypeId,callback:function(t){e.$set(e.searchForm,"payTypeId",t)},expression:"searchForm.payTypeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"抓取时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.grabTime,callback:function(t){e.grabTime=t},expression:"grabTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{label:"抓取时间",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grab_time.split(" ")[0]))]),e._v(" "),a("p",[a("span",[e._v(e._s(t.row.grab_time.split(" ")[1]))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTypeName",label:"通道",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"转账类型",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?a("span",{staticClass:"settlement-status settlement-status-success"},[e._v("转入")]):e._e(),e._v(" "),0===t.row.type?a("span",{staticClass:"settlement-status settlement-status-reject"},[e._v("转出")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.amount)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"transaction_id",label:"UTR",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"详情",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"到账日期",align:"center",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{label:"匹配状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["匹配成功"===t.row.sync_status?a("span",{staticClass:"settlement-status settlement-status-success"},[e._v(e._s(t.row.sync_status))]):a("span",{staticClass:"settlement-status settlement-status-initial"},[e._v(e._s(t.row.sync_status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"账户余额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"转出通知",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return 0===t.row.type?[0===t.row.notify_flag?a("span",{staticClass:"settlement-status settlement-status-initial"},[e._v("未通知")]):e._e(),e._v(" "),1===t.row.notify_flag?a("span",{staticClass:"settlement-status settlement-status-success"},[e._v("已通知")]):e._e()]:void 0}}],null,!0)})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)],1)},staticRenderFns:[]};var ut=a("VU/8")(lt,ct,!1,function(e){a("Ene1")},"data-v-2aa6fa8e",null).exports;var dt={name:"channelList",data:function(){return{fullscreenLoading:!0,tableData:[],types:[],testPayVisible:!1,successDialog:!1,isDisabled:!1,testPayUrl:"",testPayNumber:"",page:{pageSize:10,total:0,cur:1},type:[],dialog:{isInsert:!0,visible:!1,form:{channelNo:"",sort:1,country:""}},dialogTest:{isInsert:!0,visible:!1,form:{appId:"",amount:"",type:"",payTypeId:""}},searchForm:{channelNo:"",status:""},rules:{out_trade_no:[{required:!0,message:"",trigger:"blur"}],payUrl:[{required:!0,message:"",trigger:"blur"}]},countryOptions:[],channelPayTypeVisible:!1,channelPayTypeForm:{channelId:0,channelNo:"",payTypeIds:[]}}},created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.refresh(),e.queryCountryPageList();case 2:case"end":return t.stop()}},t,e)}))()},methods:{refresh:function(){var e,t=this;(e={page:this.page.cur,limit:this.page.pageSize,status:this.searchForm.status,channelNo:this.searchForm.channelNo},_({url:"/channel/queryChannelPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":d(a)},pageChange:function(e){this.page.cur=e,this.refresh()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.status?"success-row":"warning-row"},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.channelNo=t.channelNo,this.dialog.form.sort=t.sort,this.dialog.form.country=t.country,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除渠道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id,isShow:-1},_({url:"/channel/updateChannelIsShow",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(r.dialog.isInsert?(e=r.dialog.form,_({url:"/channel/addChannel",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})):function(e){return _({url:"/channel/updateChannel",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(r.dialog.form)).then(function(e){console.log(e),0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.type=[],r.refresh(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){var e=this.dialog.form;ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),e.stauts=-1,this.type=[],this.dialog.visible=!1,this.dialog.isInsert=!0},search:function(){this.refresh()},sendMsg:function(){window.close()},returnPayUrl:function(){window.open(this.testPayUrl)},changeStatus:function(e){var t,a=this;console.log(e.status),(t={id:e.id,status:e.status},_({url:"/channel/updateChannelStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeSort:function(e){var t,a=this;(t={id:e.id,sort:e.sort},_({url:"/channel/updateChannelSort",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},openAddChannelPayTypeDrawer:function(e,t){this.channelPayTypeForm.channelId=t.id,this.channelPayTypeForm.channelNo=t.channelNo,this.channelPayTypeForm.payTypeIds=[1,2,3],this.channelPayTypeVisible=!0},addChannelPayType:function(e){var t;(t=this.channelPayTypeForm,_({url:"/channelPayType/addChannelPayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){})}}},mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"渠道编号",prop:"channelNo"}},[a("el-input",{attrs:{placeholder:"渠道编号"},model:{value:e.searchForm.channelNo,callback:function(t){e.$set(e.searchForm,"channelNo",t)},expression:"searchForm.channelNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialog.visible=!0}}},[e._v("添加通道")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"配置参数"}},[a("span",[e._v(e._s(t.row.params))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",label:"渠道编号",align:"center"}}),e._v(" "),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"权重",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.sort,expression:"scope.row.sort"}],staticStyle:{border:"1px solid rgb(141,141,141)",width:"40px",height:"30px","line-height":"30px","border-radius":"8px","text-align":"center"},domProps:{value:t.row.sort},on:{change:function(a){return e.changeSort(t.row)},input:function(a){a.target.composing||e.$set(t.row,"sort",a.target.value)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",formatter:e.dateFormat,align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用渠道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1===t.row.status?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.openAddChannelPayTypeDrawer(t.$index,t.row)}}},[e._v("绑定通道")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-drawer",{attrs:{title:e.dialog.isInsert?"新增渠道":"修改渠道",visible:e.dialog.visible,direction:"rtl"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}}),e._v(" "),a("el-drawer",{attrs:{visible:e.channelPayTypeVisible,direction:"rtl"},on:{"update:visible":function(t){e.channelPayTypeVisible=t}}},[a("el-form",{ref:"channelPayTypeForm",staticClass:"demo-ruleForm",attrs:{model:e.channelPayTypeForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"渠道编号"}},[a("el-input",{attrs:{readonly:""},model:{value:e.channelPayTypeForm.channelNo,callback:function(t){e.$set(e.channelPayTypeForm,"channelNo",t)},expression:"channelPayTypeForm.channelNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.addChannelPayType("channelPayTypeForm")}}},[e._v("立即创建")])],1)],1)],1)],1)},staticRenderFns:[]};var pt=a("VU/8")(dt,mt,!1,function(e){a("OPo5")},"data-v-9456d2aa",null).exports;var ft={name:"settlementSetting",components:{OneSwitch:De,OneButton:ne},data:function(){return{tableData:[],settlementVisible:!1,settlementForm:{checkedCpInfo:[]},settlementFormRules:{settlementTime:[{required:!0,message:"请选择结算时间",trigger:"blur"}]},pickerBeginHandle:{disabledDate:function(e){return e.getTime()>Date.now()-216e5}},cpInfoOptions:[]}},created:function(){var e=this;return T()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.queryAllList();case 1:case"end":return t.stop()}},t,e)}))()},methods:{queryAllList:function(){var e=this;_({url:"/settlementSetting/queryAllList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e.fullscreenLoading=!1,0===t.data.code&&(t.data.data.forEach(function(e){e.autoFlag=1==e.autoFlag?1:0}),e.tableData=t.data.data)})},changeStatus:function(e){var t=this,a=this;this.$confirm("确定要将"+e.countryName+"设置为"+(1==e.autoFlag?"手动":"自动")+"结算？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t;(a={id:e.id,status:1!==e.autoFlag},_({url:"/settlementSetting/changeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){0===e.data.code?r.$message({message:"修改成功",type:"success"}):r.$message.error("修改失败"),r.queryAllList()})}).catch(function(){a.queryAllList(),t.$message({type:"info",message:"已取消"})})},openSettlement:function(e){this.settlementForm={},this.settlementForm.id=e.id,this.settlementForm.autoFlag=e.autoFlag,this.settlementVisible=!0,this.queryCpInfoByCountrySelectList(e.country)},handleSettlement:function(){var e=this;if(0===this.settlementForm.autoFlag){var t=this;this.$refs.settlementForm.validate(function(a){var r;a&&(e.settlementForm.checkedCpInfo=[],e.cpInfoOptions.map(function(t){t.checked&&e.settlementForm.checkedCpInfo.push(t.value)}),(r=e.settlementForm,_({url:"/settlementSetting/settlement",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(r)})).then(function(e){0===e.data.code?(t.$message({message:"结算成功",type:"success"}),t.settlementVisible=!1):t.$message.error("结算失败"),t.queryAllList()}))})}else that.queryAllList(),this.$message({message:row.countryName+"由系统自动结算，结算失败！",type:"warning"})},queryCpInfoByCountrySelectList:function(e){var t=this;H({country:e,status:1}).then(function(e){t.cpInfoOptions=[],0===e.data.code&&e.data.data.forEach(function(e,a){t.cpInfoOptions.push({label:e.appId+" "+e.userName,value:e.appId,checked:!1})})})}}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"countryName",label:"国家",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"自动/手动结算",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.autoFlag?"自动":"手动",placement:"top"}},[a("one-switch",{key:(new Date).getTime(),attrs:{value:1==t.row.autoFlag?1:0,switchData:1,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,perms:"type-settlementSettingList-on/off"},on:{changeSwitch:function(a){return e.changeStatus(t.row)}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最近结算时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.autoFlag&&t.row.settlementTime?a("span",[e._v(e._s(t.row.settlementTime))]):a("span",[e._v("---")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.autoFlag?a("one-button",{attrs:{size:"mini",perms:"type-settlementSettingList-settlement"},on:{click:function(a){return e.openSettlement(t.row)}}}):a("span",[e._v("---")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"手动结算",visible:e.settlementVisible,width:"68%"},on:{"update:visible":function(t){e.settlementVisible=t}}},[a("el-form",{ref:"settlementForm",staticClass:"manual-settle-cls",attrs:{model:e.settlementForm,rules:e.settlementFormRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{prop:"settlementTime"}},[a("template",{slot:"label"},[e._v("\n          结算时间\n          "),a("span",{staticStyle:{color:"#e9994b","font-size":"10px"}},[e._v("（ 结算时间只能是六小时前的时间 ）")])]),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerBeginHandle,type:"datetime",placeholder:"选择结算时间"},model:{value:e.settlementForm.settlementTime,callback:function(t){e.$set(e.settlementForm,"settlementTime",t)},expression:"settlementForm.settlementTime"}})],2),e._v(" "),a("el-form-item",{attrs:{label:"商户"}},e._l(e.cpInfoOptions,function(t){return a("el-checkbox",{key:t.appId,model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.settlementVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSettlement}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var gt=a("VU/8")(ft,ht,!1,function(e){a("XRBa")},null,null).exports;var vt={name:"blackList",components:{OneSwitch:De,OneButton:ne},data:function(){return{fullscreenLoading:!0,searchForm:{country:"",txt:"",type:"",page:0,limit:10},tableData:[],dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",type:"",txt:"",country:""}},page:{pageSize:10,total:0,cur:1},countryOptions:[],typeOptions:[{label:"银行账户",value:0},{label:"手机",value:1},{label:"邮箱",value:2},{label:"IP",value:3},{label:"IFSC",value:4}],agentOptions:[],settings:{visible:!1,activeName:"first",userName:"",id:0,balanceForm:{id:0,password:"",verifyCode:"",remain:0,notes:""},rules:{txt:[{required:!0,message:"请输入黑名单内容",trigger:"blur"}],country:[{required:!0,message:"请选择国家",trigger:"change"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]},payTypeOptions:[],withdrawTypeOptions:[]}}},created:function(){this.refresh(),this.queryCountryPageList()},methods:{refresh:function(){var e,t=this;t.searchForm.page=this.page.cur,(e=t.searchForm,_({url:"/black/queryPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},pageChange:function(e){this.page.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.saveBlack()})},saveBlack:function(){var e="编辑",t=!1;this.dialog.form.id||(t=!0,e="添加");var a=this;this.$confirm("确定"+e+"黑名单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(t?(r=a.dialog.form,_({url:"/black/add",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(r)})):function(e){return _({url:"/black/update",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(a.dialog.form)).then(function(t){0===t.data.code?a.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+t.data.msg,a.$message.error(e)),a.refresh(),a.closeDialog()})})},saveBalance:function(){var e=this;e.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.balanceForm,r=!0;a.remain<0&&(r=!1,console.log(a.remain),a.remain=Math.abs(a.remain)),a.id=e.settings.id,console.log(r),(r?(t=a,_({url:"/agent/addAgentRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})):function(e){return _({url:"/agent/subtractAgentRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(a)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.txt=""},closeDialog:function(){this.dialog.visible=!1,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")})},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.country=t.country,this.dialog.form.type=t.type,this.dialog.form.txt=t.txt,this.dialog.visible=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除黑名单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},_({url:"/black/delete",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t,a=this;(t={id:e.id,status:e.status},_({url:"/agent/changeAgentStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},addBlack:function(){this.dialog.visible=!0,this.dialog.form.id=void 0,this.dialog.form.country="",this.dialog.form.type=void 0,this.dialog.form.txt=""},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},blockCloseHandler:function(){return!1}}},yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"黑名单类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(this.typeOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"黑名单内容"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.txt,callback:function(t){e.$set(e.searchForm,"txt",t)},expression:"searchForm.txt"}})],1),e._v(" "),a("el-form-item",[a("one-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary",perms:"user-agentList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("one-button",{attrs:{plain:"",perms:"type-blackList-add"},on:{click:function(t){return e.addBlack()}}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"countryName",label:"国家"}}),e._v(" "),a("el-table-column",{attrs:{label:"黑名单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?a("span",{staticClass:"black_type"},[e._v("银行账户")]):e._e(),e._v(" "),1===t.row.type?a("span",{staticClass:"black_type"},[e._v("手机")]):e._e(),e._v(" "),2===t.row.type?a("span",{staticClass:"black_type"},[e._v("邮箱")]):e._e(),e._v(" "),3===t.row.type?a("span",{staticClass:"black_type"},[e._v("IP")]):e._e(),e._v(" "),4===t.row.type?a("span",{staticClass:"black_type"},[e._v("IFSC")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"txt",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{attrs:{size:"mini",type:"danger",perms:"user-agentList-del"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-drawer",{ref:"drawer",attrs:{"before-close":e.blockCloseHandler,visible:e.dialog.visible,"show-close":!1,direction:"rtl","custom-class":"black-drawer",size:"50%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("template",{slot:"title"},[a("p",[e._v("黑名单")])]),e._v(" "),a("div",{staticClass:"drawer-container"},[a("div",{staticStyle:{height:"100%",padding:"20px"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.settings.rules,"label-position":"top","label-width":"80px"}},[a("el-row",[a("el-col",{staticStyle:{padding:"0 10px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.country,callback:function(t){e.$set(e.dialog.form,"country",t)},expression:"dialog.form.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{padding:"0 10px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dialog.form.type,callback:function(t){e.$set(e.dialog.form,"type",t)},expression:"dialog.form.type"}},e._l(this.typeOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{padding:"0 10px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"内容(一条一行，最多100行)",prop:"txt"}},[a("el-input",{attrs:{type:"textarea",rows:20},model:{value:e.dialog.form.txt,callback:function(t){e.$set(e.dialog.form,"txt",t)},expression:"dialog.form.txt"}})],1)],1)],1)],1)],1)]),e._v(" "),a("section",{staticClass:"drawer-footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n        确 定\n      ")])],1)],2)],1)},staticRenderFns:[]};var bt=a("VU/8")(vt,yt,!1,function(e){a("Qd8e"),a("ANKT")},"data-v-145bf045",null).exports;var wt={name:"AlquimiaPayLog",created:function(){this.queryAlquimiaPayLog()},data:function(){return{tableData:[]}},methods:{queryAlquimiaPayLog:function(){var e=this;_({url:"/alquimiaPay/queryAlquimiaPayLogList",method:"get"}).then(function(t){console.log(t.data);var a=t.data,r=!0,i=!1,s=void 0;try{for(var n,o=f()(a);!(r=(n=o.next()).done);r=!0){var l=n.value;l.Amount=c(l.Amount)}}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}e.tableData=t.data})},resetDateFilter:function(){this.$refs.filterTable.clearFilter("date")},clearFilter:function(){this.$refs.filterTable.clearFilter()},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.tag===e},filterHandler:function(e,t,a){return t[a.property]===e}}},Ft={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"id",label:"id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tranId",label:"tranId",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountId",label:"accountId",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"operator",align:"center",filters:[{text:"1",value:1},{text:"-1",value:-1},{}],"filter-method":e.filterHandler}}),e._v(" "),a("el-table-column",{attrs:{prop:"Amount",label:"Amount",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail0",label:"detail0",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail1",label:"detail1",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail2",label:"detail2",align:"center"}})],1)],1)])},staticRenderFns:[]};var _t=a("VU/8")(wt,Ft,!1,function(e){a("e2xi")},"data-v-b8a8ebc6",null).exports,xt={name:"settlementLogList",components:{OneButton:ne},data:function(){return{fullscreenLoading:!1,early:[],searchForm:{appId:"",status:"",account:"",startCreateTime:"",endCreateTime:"",startFinishTime:"",endFinishTime:"",country:"",page:0,limit:10},tableData:[],total:0,settlementLogDialogVisiable:!1,cpInfoRemain:{remain:0,frozenRemain:0,actualRemain:0,country:""},settlementForm:{id:"",appId:"",status:null,settlementAmount:"",actualAmount:"",rate:"",uAmount:"",account:"",comment:"",country:""},settlementFormRules:{},formLabelWidth:"140px",pickerOptionsStart:{},pickerOptionsEnd:{disabledDate:function(e){var t=null;return t=this.dateStart?new Date(this.dateStart).valueOf()-864e5+1:Date.now()-864e5,e&&e.valueOf()<t}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],countryOptions:[],active:""}},computed:{uSDTLabel:function(e){var t=this.settlementForm.actualAmount,a=this.settlementForm.rate;return""===t||""===a?(this.settlementForm.uAmount=0,"USDT"):""!==t&&""!==a?(t=t.replaceAll(",",""),this.settlementForm.actualAmount.replaceAll(",",""),this.settlementForm.uAmount=Math.floor(t/a),"USDT ( ⌊"+this.settlementForm.actualAmount+" / "+this.settlementForm.rate+"⌋ = "+Math.floor(t/a)+")"):void 0}},created:function(){this.queryCountryPageList(),this.pageList()},methods:{pageList:function(){var e,t=this;(e=this.searchForm,console.log(e),_({url:"/settlementLog/pageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){var a=e.data.code,r=(e.data.msg,e.data.data);if(console.log(r.list),0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r.list);!(i=(o=l.next()).done);i=!0){var u=o.value;u.faitAmount=c(u.faitAmount)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}t.tableData=r.list,t.total=r.statistics.totalAllNum}})},resetForm:function(e){this.$refs[e].resetFields()},search:function(){this.pageList()},pageChange:function(e){this.searchForm.page=e,this.pageList()},openSettlementLogDialog:function(e,t){this.settlementForm.id=e.id,this.settlementForm.status=t,this.settlementForm.appId=e.appId,this.settlementForm.country=e.country,1===t?(this.settlementForm.settlementAmount=e.faitAmount,this.settlementForm.actualAmount=e.faitAmount,this.settlementForm.account=e.account,this.settlementFormRules={settlementAmount:[{required:!0,message:"请输入结算金额",trigger:"blur"}],actualAmount:[{required:!0,message:"请输入实际结算金额",trigger:"blur"}],rate:[{required:!0,message:"请输入结算汇率",trigger:"blur"}],account:[{required:!0,message:"账号不能为空",trigger:"blur"}]}):this.settlementFormRules={},this.settlementLogDialogVisiable=!0},changeUSDTLabel:function(){},closeSettlementLogDialog:function(){this.$refs.settlementForm.resetFields(),this.settlementLogDialogVisiable=!1},confirmSettle:function(){var e=this;this.$refs.settlementForm.validate(function(t){if(t){var a=e;-1!=e.settlementForm.appId.indexOf("agent")?(r=e.settlementForm,console.log(r),_({url:"/settlementLog/confirmAgentSettle",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(r)})).then(function(e){var t=e.data.code;e.data.msg,e.data.data;0===t&&(a.closeSettlementLogDialog(),a.pageList())}):function(e){return console.log(e),_({url:"/settlementLog/confirmSettle",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(e.settlementForm).then(function(e){var t=e.data.code;e.data.msg,e.data.data;0===t&&(a.closeSettlementLogDialog(),a.pageList())})}var r})},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},upload:function(e){e.files},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.pageList()},changeList:function(e){this.country=e.value},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},confirmFinanceStatus:function(e){var t=this;this.$confirm("审核当前商户结算订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a={id:e.id},console.log(a),_({url:"/settlementLog/financeSuccess",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){var a=e.data.code,r=e.data.msg;e.data.data;0===a&&(t.$message(r),t.pageList())})})}}},Ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.countryOptions,function(t,r){return a("el-tab-pane",{key:t.value,attrs:{label:t.label,name:t.label},on:{click:function(a){return e.changeList(t)}}},[e._v(e._s(t.name)+"\n        ")])}),1)],e._v(" "),a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appId"}},[a("el-input",{model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"账户号",prop:"account"}},[a("el-input",{model:{value:e.searchForm.account,callback:function(t){e.$set(e.searchForm,"account",t)},expression:"searchForm.account"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"结算完成",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"驳回",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"财务状态",prop:"financeStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.financeStatus,callback:function(t){e.$set(e.searchForm,"financeStatus",t)},expression:"searchForm.financeStatus"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"审核完成",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:8,md:8,sm:12,xs:24}},[a("el-form-item",{attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStart},model:{value:e.early,callback:function(t){e.early=t},expression:"early"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("one-button",{attrs:{type:"primary",perms:"log-settlementLogList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"订单号",align:"center","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"faitAmount",label:"结算金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rate",label:"结算汇率",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uAmount",label:"usdt金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"账户号",align:"center","min-width":"300px"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("span",{staticClass:"settlement-status settlement-status-success"},[e._v("结算完成")]):e._e(),e._v(" "),0===t.row.status?a("span",{staticClass:"settlement-status settlement-status-initial"},[e._v("待处理")]):e._e(),e._v(" "),-1===t.row.status?a("span",{staticClass:"settlement-status settlement-status-reject"},[e._v("驳回")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"财务状态",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.financeStatus?a("span",{staticClass:"settlement-status settlement-financeStatus-success"},[e._v("审核通过")]):e._e(),e._v(" "),0===t.row.financeStatus?a("span",{staticClass:"settlement-status settlement-financeStatus-initial"},[e._v("待审核")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"finishTime",label:"完成时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"360px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.status,expression:"scope.row.status === 0"}],attrs:{type:"primary",size:"mini",perms:"log-settlementLogList-settlement"},on:{click:function(a){return e.openSettlementLogDialog(t.row,1)}}}),e._v(" "),a("one-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.status,expression:"scope.row.status === 0"}],attrs:{type:"primary",size:"mini",perms:"log-settlementLogList-reject"},on:{click:function(a){return e.openSettlementLogDialog(t.row,-1)}}}),e._v(" "),a("one-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.financeStatus&&1===t.row.status,expression:"scope.row.financeStatus === 0 && scope.row.status === 1"}],attrs:{type:"primary",size:"mini",perms:"log-settlementLogList-financialConfirm"},on:{click:function(a){return e.confirmFinanceStatus(t.row)}}})]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{staticClass:"settlementLogDialog",attrs:{width:"68%",visible:e.settlementLogDialogVisiable,title:"结算余额"},on:{close:e.closeSettlementLogDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:e.closeSettlementLogDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmSettle(1)}}},[e._v("结算")])],1)]},proxy:!0}])},[a("div",{staticStyle:{padding:"10px"}},[a("el-form",{ref:"settlementForm",attrs:{model:e.settlementForm,rules:e.settlementFormRules,size:"small"}},[a("el-row",[a("el-col",{staticStyle:{width:"40%"}},[a("el-form-item",{staticClass:"no-boder-input",attrs:{label:"商户ID:"}},[a("el-input",{attrs:{readonly:""},model:{value:e.settlementForm.appId,callback:function(t){e.$set(e.settlementForm,"appId",t)},expression:"settlementForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"40%"},attrs:{offset:1}},[a("el-form-item",{staticClass:"no-boder-input",attrs:{label:"所属国家:"}},[a("el-input",{attrs:{readonly:""},model:{value:e.settlementForm.country,callback:function(t){e.$set(e.settlementForm,"country",t)},expression:"settlementForm.country"}})],1)],1)],1),e._v(" "),1===e.settlementForm.status?a("el-form-item",{attrs:{label:"申请金额",prop:"settlementAmount"}},[a("el-input",{attrs:{disabled:""},model:{value:e.settlementForm.settlementAmount,callback:function(t){e.$set(e.settlementForm,"settlementAmount",t)},expression:"settlementForm.settlementAmount"}})],1):e._e(),e._v(" "),1===e.settlementForm.status?a("el-form-item",{attrs:{label:"实际结算金额",prop:"actualAmount"}},[a("el-input",{model:{value:e.settlementForm.actualAmount,callback:function(t){e.$set(e.settlementForm,"actualAmount",t)},expression:"settlementForm.actualAmount"}})],1):e._e(),e._v(" "),1===e.settlementForm.status?a("el-form-item",{attrs:{label:"结算汇率",prop:"rate"}},[a("el-input",{on:{change:e.changeUSDTLabel},model:{value:e.settlementForm.rate,callback:function(t){e.$set(e.settlementForm,"rate",t)},expression:"settlementForm.rate"}})],1):e._e(),e._v(" "),1===e.settlementForm.status?a("el-form-item",{attrs:{label:e.uSDTLabel,prop:"uAmount"}},[a("el-input",{attrs:{readonly:""},model:{value:e.settlementForm.uAmount,callback:function(t){e.$set(e.settlementForm,"uAmount",t)},expression:"settlementForm.uAmount"}})],1):e._e(),e._v(" "),1===e.settlementForm.status?a("el-form-item",{attrs:{label:"收款地址",prop:"account"}},[a("el-input",{model:{value:e.settlementForm.account,callback:function(t){e.$set(e.settlementForm,"account",t)},expression:"settlementForm.account"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:e.settlementForm.comment,callback:function(t){e.$set(e.settlementForm,"comment",t)},expression:"settlementForm.comment"}})],1),e._v(" "),e._e()],1)],1)])],2)},staticRenderFns:[]};var kt=a("VU/8")(xt,Ct,!1,function(e){a("0TDj")},"data-v-5b9bb8a7",null).exports;var Tt={name:"settlementLogList",components:{OneButton:ne},data:function(){return{fullscreenLoading:!1,early:[],searchForm:{status:"",startCreateTime:"",endCreateTime:"",startFinishTime:"",endFinishTime:"",country:"",page:0,limit:10},tableData:[],total:0,rechargeDialogVisiable:!1,cpInfoRemain:{remain:0,frozenRemain:0,actualRemain:0,country:""},rechargeForm:{id:"",appId:"",status:null,rechargeAmount:"",actualAmount:"",rate:"",uAmount:"",comment:"",country:""},rechargeFormRules:{},formLabelWidth:"140px",pickerOptionsStart:{},pickerOptionsEnd:{disabledDate:function(e){var t=null;return t=this.dateStart?new Date(this.dateStart).valueOf()-864e5+1:Date.now()-864e5,e&&e.valueOf()<t}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],countryOptions:[],country:"",active:""}},computed:{actualAmountLabel:function(){return""===this.rechargeForm.rate||""===this.rechargeForm.uAmount?"实际充值金额":(this.rechargeForm.actualAmount=Math.floor(this.rechargeForm.rate*this.rechargeForm.uAmount),"实际充值金额("+this.rechargeForm.uAmount+"*"+this.rechargeForm.rate+"="+this.rechargeForm.actualAmount+")")}},watch:{},created:function(){this.queryCountryPageList(),this.pageList()},methods:{pageList:function(){var e,t=this;(e=this.searchForm,console.log(e),_({url:"/recharge/pageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){var a=e.data.code,r=(e.data.msg,e.data.data);if(0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r.list);!(i=(o=l.next()).done);i=!0){var u=o.value;u.faitAmount=c(u.faitAmount)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}t.tableData=r.list,t.total=r.statistics.totalAllNum}})},resetForm:function(e){this.$refs[e].resetFields()},search:function(){this.pageList()},pageChange:function(e){this.searchForm.page=e,this.pageList()},openRechargeLogDialog:function(e,t){var a=this;this.rechargeForm.id=e.id,this.rechargeForm.status=t,this.rechargeForm.appId=e.appId,this.rechargeForm.country=e.country,1===t?(this.rechargeForm.rechargeAmount=e.faitAmount,this.rechargeFormRules={rechargeAmount:[{required:!0,message:"请输入充值金额",trigger:"blur"}],actualAmount:[{required:!0,message:"请输入实际充值金额",trigger:"blur"}],uAmount:[{required:!0,message:"请输入USDT",trigger:"blur"}],rate:[{required:!0,message:"请输入充值汇率",trigger:"blur"}]}):this.rechargeFormRules={},this.$nextTick(function(){a.$refs.rechargeForm.clearValidate()}),this.rechargeDialogVisiable=!0},changeUSDTLabel:function(){},closeRechargeLogDialog:function(){var e=this;this.$refs.rechargeForm.resetFields(),this.$nextTick(function(){e.$refs.rechargeForm.clearValidate()}),this.rechargeDialogVisiable=!1},confirmRecharge:function(){var e=this;this.$refs.rechargeForm.validate(function(t){if(t){var a=e;(r=e.rechargeForm,console.log(r),_({url:"/recharge/confirmRecharge",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(r)})).then(function(e){var t=e.data.code;e.data.msg,e.data.data;0===t&&(a.closeRechargeLogDialog(),a.pageList())})}var r})},handleRemove:function(e,t){},handlePreview:function(e){},upload:function(e){e.files},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.pageList()},changeList:function(e){this.country=e.value},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},confirmFinanceStatus:function(e){var t=this;this.$confirm("审核当前商户充值订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a={id:e.id},console.log(a),_({url:"/recharge/financeSuccess",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(e){var a=e.data.code,r=e.data.msg;e.data.data;0===a&&(t.$message(r),t.pageList())})})}}},It={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.countryOptions,function(t,r){return a("el-tab-pane",{key:t.value,attrs:{label:t.label,name:t.label},on:{click:function(a){return e.changeList(t)}}},[e._v(e._s(t.name)+"\n      ")])}),1)],e._v(" "),a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appId"}},[a("el-input",{model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"结算完成",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"驳回",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"财务状态",prop:"financeStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.financeStatus,callback:function(t){e.$set(e.searchForm,"financeStatus",t)},expression:"searchForm.financeStatus"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"审核完成",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:8,md:8,sm:12,xs:24}},[a("el-form-item",{attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStart},model:{value:e.early,callback:function(t){e.early=t},expression:"early"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("one-button",{attrs:{type:"primary",perms:"log-rechargeList-search"},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"订单号",align:"center","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"faitAmount",label:"充值金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rate",label:"充值汇率",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uAmount",label:"USDT",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("span",{staticClass:"settlement-status settlement-status-success"},[e._v("充值完成")]):e._e(),e._v(" "),0===t.row.status?a("span",{staticClass:"settlement-status settlement-status-initial"},[e._v("待处理")]):e._e(),e._v(" "),-1===t.row.status?a("span",{staticClass:"settlement-status settlement-status-reject"},[e._v("驳回")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"财务状态",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.financeStatus?a("span",{staticClass:"settlement-status settlement-financeStatus-success"},[e._v("审核通过")]):e._e(),e._v(" "),0===t.row.financeStatus?a("span",{staticClass:"settlement-status settlement-financeStatus-initial"},[e._v("待审核")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"finishTime",label:"完成时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"360px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("one-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.status,expression:"scope.row.status === 0"}],attrs:{type:"primary",size:"mini",perms:"log-rechargeList-receive"},on:{click:function(a){return e.openRechargeLogDialog(t.row,1)}}},[e._v("确认到账\n          ")]),e._v(" "),a("one-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.status,expression:"scope.row.status === 0"}],attrs:{type:"primary",size:"mini",perms:"log-rechargeList-reject"},on:{click:function(a){return e.openRechargeLogDialog(t.row,-1)}}},[e._v("驳回\n          ")]),e._v(" "),a("one-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.financeStatus&&1===t.row.status,expression:"scope.row.financeStatus === 0 && scope.row.status === 1"}],attrs:{type:"Warning",size:"mini",perms:"log-rechargeList-financialConfirm"},on:{click:function(a){return e.confirmFinanceStatus(t.row)}}},[e._v("财务审核\n          ")])]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{staticClass:"settlementLogDialog",attrs:{width:"68%",visible:e.rechargeDialogVisiable,title:"商户充值"},on:{close:e.closeRechargeLogDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:e.closeRechargeLogDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmRecharge(1)}}},[e._v("确认")])],1)]},proxy:!0}])},[a("div",{staticStyle:{padding:"10px"}},[a("el-form",{ref:"rechargeForm",attrs:{model:e.rechargeForm,rules:e.rechargeFormRules,size:"small"}},[a("el-row",[a("el-col",{staticStyle:{width:"40%"}},[a("el-form-item",{staticClass:"no-boder-input",attrs:{label:"商户ID:"}},[a("el-input",{attrs:{readonly:""},model:{value:e.rechargeForm.appId,callback:function(t){e.$set(e.rechargeForm,"appId",t)},expression:"rechargeForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"40%"},attrs:{offset:1}},[a("el-form-item",{staticClass:"no-boder-input",attrs:{label:"所属国家:"}},[a("el-input",{attrs:{readonly:""},model:{value:e.rechargeForm.country,callback:function(t){e.$set(e.rechargeForm,"country",t)},expression:"rechargeForm.country"}})],1)],1)],1),e._v(" "),1===e.rechargeForm.status?a("el-form-item",{attrs:{label:"申请金额",prop:"rechargeAmount"}},[a("el-input",{attrs:{disabled:""},model:{value:e.rechargeForm.rechargeAmount,callback:function(t){e.$set(e.rechargeForm,"rechargeAmount",t)},expression:"rechargeForm.rechargeAmount"}})],1):e._e(),e._v(" "),1===e.rechargeForm.status?a("el-form-item",{attrs:{label:"充值汇率",prop:"rate"}},[a("el-input",{on:{change:e.changeUSDTLabel},model:{value:e.rechargeForm.rate,callback:function(t){e.$set(e.rechargeForm,"rate",t)},expression:"rechargeForm.rate"}})],1):e._e(),e._v(" "),1===e.rechargeForm.status?a("el-form-item",{attrs:{label:"USDT",prop:"uAmount"}},[a("el-input",{attrs:{type:"number"},model:{value:e.rechargeForm.uAmount,callback:function(t){e.$set(e.rechargeForm,"uAmount",t)},expression:"rechargeForm.uAmount"}})],1):e._e(),e._v(" "),1===e.rechargeForm.status?a("el-form-item",{attrs:{label:e.actualAmountLabel,prop:"actualAmount"}},[a("el-input",{attrs:{readonly:""},model:{value:e.rechargeForm.actualAmount,callback:function(t){e.$set(e.rechargeForm,"actualAmount",t)},expression:"rechargeForm.actualAmount"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:e.rechargeForm.comment,callback:function(t){e.$set(e.rechargeForm,"comment",t)},expression:"rechargeForm.comment"}})],1),e._v(" "),e._e()],1)],1)])],2)},staticRenderFns:[]};var St=a("VU/8")(Tt,It,!1,function(e){a("J7cY")},"data-v-29304036",null).exports;function Dt(e){return _({url:"/telegrambot/massMsg2",method:"post",data:e})}function Lt(e){return _({url:"/telegrambot/getAllRecordByPage",method:"post",headers:{"Content-Type":"application/json"},data:g()(e)})}function Nt(e){return _({url:"/cpinfo/queryCpIdsByCountry",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}function $t(e){return _({url:"/telegrambot/getImg",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}var Ot=a("G0J2"),At=(a("3f40"),a("4qOc"),a("+cgv"),{name:"massMsg",components:{quillEditor:Ot.quillEditor},data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{typeboxVisible:!1,inputVisible:!1,inputValue:"",fileList2:[],imageUrl:"https://13.200.37.118:8080/manage/telegrambot/getImg2?sendId=",startTime:"",endTime:"",createTime:[],pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},allType:["","",""],cpIds:[],allCountry:[],checkAll:!1,checkedCountry:[],isIndeterminate:!0,allUserType:[],checkedUserType:[],isIndeterminate2:!0,checkAll2:!1,statusOption:[{label:"成功",value:"1"},{label:"失败",value:"2"}],editorOption:{modules:{toolbar:"#toolbar"},placeholder:"请输入正文"},fullscreenLoading:!0,searchForm:{userName:"",agentId:"",status:"",canOver:"",agentOptions:[],platformOptions:[],country:""},searchForm2:{id:"",userId:"",status:"",groupName:"",startCreateTime:"",endCreateTime:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"80px",form:{appId:0,userName:"",userPass:"",checkPass:"",payRange:"",withdrawRange:"",subRatio:0,remainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",agentPayFeeFix:"0",agentPayFeeRate:"0",agentWithdrawFeeFix:"0",agentWithdrawFeeRate:"0",country:"",content:""},rules:{content:[{required:!0,message:"请输入",trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{appId:0,password:"",verifyCode:"",remain:0,notes:""},creditForm:{password:"",verifyCode:"",remain:"0"},agentForm:{agentId:""},confirmForm:{confirmStatus:"",confirmMin:"",confirmMax:""},typeForm:{defaultPayTypeId:[],defaultWithdrawTypeId:[]},ipForm:{ip:""},rules:{userName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:e,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:e,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],tableData2:[],page:{pageSize:1e3,total:0,cur:1},page2:{pageSize:10,total:0,cur:1},countryOptions:[],userTypeOptions:[],agentOptions:[],filterList:[],whiteIps:"",confirmRangeShow:"",settleRemainDrawer:!1,direction:"rtl",validDayList:[],settlementDialogVisible:!1,settlementForm:{},settling:!1,multipleSelection:[],submitButtonDisabled:!1}},created:function(){this.refresh(),this.findType(),this.findAgent(),this.queryCountryPageList(),this.queryUserTypeOptions()},watch:{settings:{handler:function(e,t){var a=this.settings.confirmForm.confirmMin,r=this.settings.confirmForm.confirmMax;this.confirmRangeShow=""!==a&&""!==r?"min"===a&&"max"===r?"所有订单全部进入审核":a>r?"所有订单不会进入审核":a+" < 金额<"+r+"的订单进入审核":""!==a&&""===r?a+" < 金额的订单进入审核":""===a&&""!==r?"金额 < "+r+"的订单进入审核":"所有订单不会进入审核"},deep:!0}},methods:{showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.cpIds.push(e),this.inputVisible=!1,this.inputValue=""},contentFormat:function(e,t){if(!e.content.startsWith("img-file"))return e.content;$t({sendId:213}).then(function(e){return 0===e.data.code?'<el-avatar  shape="square" :size="80" fit="contain" src="'+("data:image/jpeg;base64,"+e.data.data)+'"></el-avatar>':"图片加载失败"})},fileChange2:function(e,t){this.fileList2=[],t.length>3&&this.$message.warning("最多三张图片");for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},fileRemove2:function(e,t){this.fileList2=[];for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},handleCloseTag:function(e){this.cpIds.splice(this.cpIds.indexOf(e),1)},getCpIds:function(){var e=this;Nt({countrys:e.checkedCountry.length>0?e.checkedCountry.join(","):"",type:e.checkedUserType.length>0?e.checkedUserType.join(","):""}).then(function(t){0===t.data.code?e.cpIds=t.data.data:(e.cpIds=[],str=str+"失败，"+t.data.msg,e.$message.error(str))})},handleCheckAllChange:function(e){this.checkedCountry=e?this.allCountry:[],this.isIndeterminate=!1,this.getCpIds()},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.countryOptions.length,this.isIndeterminate=t>0&&t<this.countryOptions.length,this.getCpIds()},handleCheckAllTypeBoxChange:function(e){this.checkedUserType=e?this.allUserTypeOptions:[],this.isIndeterminate2=!1,this.getCpIds()},handleCheckedTypeBoxChange:function(e){var t=e.length;this.checkAll2=t===this.userTypeOptions.length,this.isIndeterminate2=t>0&&t<this.userTypeOptions.length,this.getCpIds()},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":this.dateFormate(a)},dateFormate:function(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return n=n<10?"0"+n:n,t+"-"+a+"-"+r},openMsg2:function(){this.settlementDialogVisible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.fileList2=[]},openRecord:function(){this.settings.visible=!0,this.search2()},onEditorReady:function(e){},openMsg:function(){var e=this;this.dialog.visible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.checkAll2=!1,this.checkedUserType=[],this.fileList2=[],this.isIndeterminate=!1,this.isIndeterminate2=!1,this.submitButtonDisabled=!1,this.$nextTick(function(){e.$refs.uploadImgs.clearFiles()})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e){t.multipleSelection.push(e.appId)})},findType:function(){var e=this;ae().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.payTypeOptions=a}}),me().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.withdrawTypeOptions=a}})},findAgent:function(){var e=this;Te().then(function(t){0===t.data.code&&(e.searchForm.agentOptions=t.data.data)})},refresh:function(){this.search2()},pageChange:function(e){this.page.cur=e,this.refresh()},pageChange2:function(e){this.page2.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},search2:function(){var e=this;e.searchForm2.startCreateTime=""===this.createTime?"":this.createTime[0],e.searchForm2.endCreateTime=""===this.createTime?"":this.createTime[1],Lt({page:e.page2.cur,limit:e.page2.pageSize,id:e.searchForm2.id,status:e.searchForm2.status,groupName:e.searchForm2.groupName,startDate:e.searchForm2.startCreateTime,endDate:e.searchForm2.endCreateTime}).then(function(t){0===t.data.code?(e.tableData2=t.data.data,e.page2.total=t.data.count):(str=str+"失败，"+t.data.msg,e.$message.error(str))})},submitForm2:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.fileList2.length<1&&!this.dialog.form.content?this.$message.warning("图片和内容不能同时为空"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;e.submitButtonDisabled=!0;var a=new FormData;e.fileList2.length>0&&e.fileList2.forEach(function(e,t){a.append("file",e.raw,e.newName)}),a.append("dataList",e.cpIds),a.append("content",e.dialog.form.content),Dt(a).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},submitForm:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;Dt({dataList:e.cpIds,content:e.dialog.form.content}).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},saveCpInfo:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(t.dialog.isInsert?D(t.dialog.form):L(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.refresh(),t.closeDialog()})})},saveBalance:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={appId:0,password:"",verifyCode:"",remain:0,notes:""};t.appId=e.settings.appId,t.password=e.settings.balanceForm.password,t.verifyCode=e.settings.balanceForm.verifyCode,t.remain=e.settings.balanceForm.remain,t.notes=e.settings.balanceForm.notes,t.remain<0&&(t.remain=Math.abs(t.remain)),(e.settings.balanceForm.remain>=0?P(t):z(t)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveCredit:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户信用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.creditForm;t.appId=e.settings.appId,R(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveConfirmMin:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"审核范围吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=JSON.parse(g()(e.settings.confirmForm));t.appId=e.settings.appId,W(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveAgent:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户绑定代理商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.agentForm;t.appId=e.settings.appId,N(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveType:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户指定通道吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.typeForm;t.appId=e.settings.appId,t.defaultPayTypeId=e.settings.typeForm.defaultPayTypeId.toString(),t.defaultWithdrawTypeId=e.settings.typeForm.defaultWithdrawTypeId.toString(),$(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveIp:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的ip地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.ipForm;t.appId=e.settings.appId,O(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm"),this.fileList2=[]},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.userName=t.userName,this.dialog.form.checkPass=t.userPass,this.dialog.form.payFeeFix=t.payFeeFix/100,this.dialog.form.withdrawFeeFix=t.withdrawFeeFix/100,this.dialog.form.agentPayFeeFix=t.agentPayFeeFix/100,this.dialog.form.agentWithdrawFeeFix=t.agentWithdrawFeeFix/100,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){E({appId:t.appId}).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t=this;M({appId:e.appId,status:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmStatus:function(e){var t=this;q({appId:e.appId,confirmStatus:e.confirmStatus}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmMin:function(e){var t=this;W({appId:e.appId,confirmMin:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanWithdraw:function(e){var t=this;B({appId:e.appId,canWithdraw:e.canWithdraw}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanOver:function(e){var t=this;A({appId:e.appId,canOver:e.canOver}).then(function(e){0===e.data.code?t.$message({message:e.data.msg,type:"success"}):t.$message.error(e.data.msg),t.refresh()})},changeSettings:function(e){var t=this;if(this.settings.visible=!0,e.defaultPayTypeId.length>0&&0!==e.defaultPayTypeId){for(var a=e.defaultPayTypeId.split(","),r=[],i=0;i<a.length;i++)r.push(a[i]+"");this.settings.typeForm.defaultPayTypeId=r}else this.settings.typeForm.defaultPayTypeId=[];if(e.defaultWithdrawTypeId.length>0&&0!==e.defaultWithdrawTypeId){for(var s=e.defaultWithdrawTypeId.split(","),n=[],o=0;o<s.length;o++)n.push(s[o]+"");this.settings.typeForm.defaultWithdrawTypeId=n}else this.settings.typeForm.defaultWithdrawTypeId=[];this.$nextTick(function(){t.settings.userName=e.userName,t.settings.payFeeFix=e.payFeeFix,t.settings.payFeeRate=e.payFeeRate,t.settings.withdrawFeeFix=e.withdrawFeeFix,t.settings.withdrawFeeRate=e.withdrawFeeRate,t.settings.agentForm.agentId=e.agentId,t.settings.appId=e.appId,t.settings.confirmForm.confirmStatus=e.confirmStatus,t.settings.confirmForm.confirmMin=Number(e.confirmMin).toFixed(0),t.settings.confirmForm.confirmMax=Number(e.confirmMax).toFixed(0),t.settings.ipForm.ip=e.whiteIps})},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value}),e.allCountry.push(t.value)}))})})},queryUserTypeOptions:function(){var e=this;return new y.a(function(t){X({type:"user_type"}).then(function(t){0===t.data.code&&(e.allUserTypeOptions=[],t.data.data.forEach(function(t,a){e.userTypeOptions.push({label:t.name,value:t.value}),e.allUserTypeOptions.push(t.value)}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()},handleSizeChange2:function(e){this.page2.pageSize=e,this.search2()},filterHandler:function(e,t,a){return e},resetGoogleSecret:function(e){var t=this;V({appId:e.appId}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},changeWhiteIps:function(e){var t=this;U({appId:e.appId,whiteIps:e.whiteIps}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},setConfirmMin:function(){this.settings.confirmForm.confirmMin="min"},setConfirmMax:function(){this.settings.confirmForm.confirmMax="max"},statisticsCpInfo:function(){},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(t<5||t>7)return"";var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]=r[t])}),r},exportCpInfo:function(){this.fileList=[];var e=[],t=/^,|，| $/,a=String(this.searchForm.userName);""!==a&&(t.test(a)?e=a.split(t):(e=[]).push(a)),window.location.href=encodeURI("/cpinfo/exportCpInfo?userNames="+e+"&agentId="+this.searchForm.agentId+"&status="+this.searchForm.status+"&canOver="+this.searchForm.canOver+"&country="+this.searchForm.country)},queryValidPayLogList:function(){var e=this;te({appId:e.settlementForm.appId}).then(function(t){var a=t.data.code,r=(t.data.msg,t.data.data);if(0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r);!(i=(o=l.next()).done);i=!0){var u=o.value;u.amount=c(u.amount);var d=!0,m=!1,p=void 0;try{for(var h,g=f()(u.list);!(d=(h=g.next()).done);d=!0){var v=h.value;v.amount=c(v.amount)}}catch(e){m=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(m)throw p}}}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.validDayList=r}})},openSettlementRemainDrawer:function(e,t){this.validDayList.appId=t.appId,this.settlementForm.appId=t.appId,this.queryValidPayLogList(),this.settleRemainDrawer=!0},closeSettlementRemainDrawer:function(){this.settleRemainDrawer=!1},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},openSettlementDialog:function(e){this.settlementDialogVisible=!0,this.settlementForm.payDay=e.payDay,void 0!==e.payTypeId&&(this.settlementForm.payTypeId=e.payTypeId,this.settlementForm.payTypeName=e.payTypeName),this.settlementForm.amount=e.amount},closeSettlementDialog:function(){this.settlementForm={},this.settlementDialogVisible=!1},settlementPayLog:function(){this.settling=!0;var e=this;ee(this.settlementForm).then(function(t){var a=t.data.code,r=t.data.msg;t.data.data;0===a&&(e.$message(r),e.queryValidPayLogList(),e.settlementDialogVisible=!1),e.$message(r),e.settling=!1})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()},changeList:function(e){this.country=e.value},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})}}}),Pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm2",attrs:{inline:!0,model:e.searchForm2}},[a("el-form-item",{attrs:{label:"群发编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"群发编号"},model:{value:e.searchForm2.id,callback:function(t){e.$set(e.searchForm2,"id",t)},expression:"searchForm2.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm2.status,callback:function(t){e.$set(e.searchForm2,"status",t)},expression:"searchForm2.status"}},e._l(this.statusOption,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search2}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm2")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){return e.openMsg()}}},[e._v("新建群发")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"群发编号22","column-key":"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",width:"120",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"batchNo",width:"140",label:"发送日期",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.content.startsWith("img-file")?a("el-avatar",{attrs:{shape:"square",size:60,fit:"contain",src:e.imageUrl+t.row.batchNo+"&imgName="+t.row.content}}):a("i",[e._v(e._s(t.row.content))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"90",label:"发送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium",type:1==t.row.status?"success":"error"}},[e._v(e._s(1==t.row.status?"成功":"失败")+"\n          ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"msg",width:"250","show-overflow-tooltip":!0,label:"信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"接收商户","show-overflow-tooltip":!0,"column-key":"userId",width:"350"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page2.cur,"page-sizes":[10,20,50,100],"page-size":e.page2.pageSize,layout:"total, sizes, prev, pager, next",total:e.page2.total},on:{"size-change":e.handleSizeChange2,"current-change":e.pageChange2,"update:currentPage":function(t){return e.$set(e.page2,"cur",t)},"update:current-page":function(t){return e.$set(e.page2,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建商户群发",modal:!1,visible:e.dialog.visible,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("国家全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCountry,callback:function(t){e.checkedCountry=t},expression:"checkedCountry"}},e._l(e.countryOptions,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate2},on:{change:e.handleCheckAllTypeBoxChange},model:{value:e.checkAll2,callback:function(t){e.checkAll2=t},expression:"checkAll2"}},[e._v("类型全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedTypeBoxChange},model:{value:e.checkedUserType,callback:function(t){e.checkedUserType=t},expression:"checkedUserType"}},e._l(e.userTypeOptions,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),e._l(e.cpIds,function(t){return a("el-tag",{key:t,attrs:{type:"success",closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloseTag(t)}}},[e._v("\n      "+e._s(t)+"\n    ")])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 输入商户编号")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules}},[a("div",{staticClass:"quill-editor-toolbar",attrs:{id:"toolbar"}},[a("select",{staticClass:"ql-size"},[a("option",{attrs:{value:"small"}}),e._v(" "),a("option",{attrs:{selected:""}}),e._v(" "),a("option",{attrs:{value:"large"}}),e._v(" "),a("option",{attrs:{value:"huge"}})]),e._v(" "),a("select",{staticClass:"ql-header"},[a("option",{attrs:{value:"1"}}),e._v(" "),a("option",{attrs:{value:"2"}}),e._v(" "),a("option",{attrs:{value:"3"}}),e._v(" "),a("option",{attrs:{value:"4"}}),e._v(" "),a("option",{attrs:{value:"5"}}),e._v(" "),a("option",{attrs:{value:"6"}}),e._v(" "),a("option",{attrs:{selected:""}})]),e._v(" "),a("select",{staticClass:"ql-font"}),e._v(" "),a("button",{staticClass:"ql-bold"}),e._v(" "),a("button",{staticClass:"ql-italic"}),e._v(" "),a("button",{staticClass:"ql-underline"}),e._v(" "),a("button",{staticClass:"ql-strike"}),e._v(" "),a("button",{staticClass:"ql-blockquote"}),e._v(" "),a("button",{staticClass:"ql-code-block"}),e._v(" "),a("select",{staticClass:"ql-color"}),e._v(" "),a("select",{staticClass:"ql-background"}),e._v(" "),a("select",{staticClass:"ql-align"}),e._v(" "),a("button",{staticClass:"ql-script",attrs:{value:"sub"}}),e._v(" "),a("button",{staticClass:"ql-script",attrs:{value:"super"}}),e._v(" "),a("button",{staticClass:"ql-direction",attrs:{value:"rtl"}}),e._v(" "),a("button",{staticClass:"ql-indent",attrs:{value:"-1"}}),e._v(" "),a("button",{staticClass:"ql-indent",attrs:{value:"+1"}}),e._v(" "),a("button",{staticClass:"ql-list",attrs:{value:"ordered"}}),e._v(" "),a("button",{staticClass:"ql-list",attrs:{value:"bullet"}}),e._v(" "),a("button",{staticClass:"ql-header",attrs:{value:"1"}}),e._v(" "),a("button",{staticClass:"ql-header",attrs:{value:"2"}}),e._v(" "),a("button",{staticClass:"ql-clean"})]),e._v(" "),a("el-form-item",[a("el-input",{attrs:{autocomplete:"new-off",type:"textarea",rows:20},model:{value:e.dialog.form.content,callback:function(t){e.$set(e.dialog.form,"content",t)},expression:"dialog.form.content"}})],1),e._v(" "),a("quill-editor",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"myQuillEditor",staticClass:"quill-editor",attrs:{options:e.editorOption},on:{ready:function(t){return e.onEditorReady(t)}}}),e._v(" "),a("el-form-item",{attrs:{label:"图片(最多3张):"}},[a("el-upload",{ref:"uploadImgs",staticClass:"avatar-uploader",attrs:{action:"#","list-type":"picture-card","show-file-list":!0,"auto-upload":!1,multiple:!0,"on-change":e.fileChange2,"on-remove":e.fileRemove2,drag:!0,accept:"image/jpeg,image/jpg,image/png",limit:3}},[this.fileList2.length<3?a("i",{staticClass:"el-icon-plus"}):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.submitButtonDisabled},on:{click:function(t){return e.submitForm2("ruleForm")}}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var zt=a("VU/8")(At,Pt,!1,function(e){a("Bn+h")},null,null).exports,Rt={name:"massMsgTwo",data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{typeboxVisible:!1,inputVisible:!1,inputValue:"",fileList2:[],imageUrl:"https://13.200.37.118:8080/manage/telegrambot/getImg2?sendId=",startTime:"",endTime:"",createTime:[],pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},allType:["","",""],cpIds:[],allCountry:[],checkAll:!1,checkedCountry:[],isIndeterminate:!0,allUserType:[],checkedUserType:[],isIndeterminate2:!0,checkAll2:!1,statusOption:[{label:"成功",value:"1"},{label:"失败",value:"2"}],editorOption:{modules:{toolbar:"#toolbar"},placeholder:"请输入正文"},fullscreenLoading:!0,searchForm:{userName:"",agentId:"",status:"",canOver:"",agentOptions:[],platformOptions:[],country:""},searchForm2:{id:"",userId:"",status:"",groupName:"",startCreateTime:"",endCreateTime:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"80px",form:{appId:0,userName:"",userPass:"",checkPass:"",payRange:"",withdrawRange:"",subRatio:0,remainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",agentPayFeeFix:"0",agentPayFeeRate:"0",agentWithdrawFeeFix:"0",agentWithdrawFeeRate:"0",country:"",content:""},rules:{content:[{required:!0,message:"请输入",trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{appId:0,password:"",verifyCode:"",remain:0,notes:""},creditForm:{password:"",verifyCode:"",remain:"0"},agentForm:{agentId:""},confirmForm:{confirmStatus:"",confirmMin:"",confirmMax:""},typeForm:{defaultPayTypeId:[],defaultWithdrawTypeId:[]},ipForm:{ip:""},rules:{userName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:e,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:e,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],tableData2:[],page:{pageSize:1e3,total:0,cur:1},page2:{pageSize:10,total:0,cur:1},countryOptions:[],userTypeOptions:[],agentOptions:[],filterList:[],whiteIps:"",confirmRangeShow:"",settleRemainDrawer:!1,direction:"rtl",validDayList:[],settlementDialogVisible:!1,settlementForm:{},settling:!1,multipleSelection:[],submitButtonDisabled:!1}},created:function(){this.refresh(),this.findType(),this.findAgent(),this.queryCountryPageList(),this.queryUserTypeOptions()},watch:{settings:{handler:function(e,t){var a=this.settings.confirmForm.confirmMin,r=this.settings.confirmForm.confirmMax;this.confirmRangeShow=""!==a&&""!==r?"min"===a&&"max"===r?"所有订单全部进入审核":a>r?"所有订单不会进入审核":a+" < 金额<"+r+"的订单进入审核":""!==a&&""===r?a+" < 金额的订单进入审核":""===a&&""!==r?"金额 < "+r+"的订单进入审核":"所有订单不会进入审核"},deep:!0}},methods:{showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.cpIds.push(e),this.inputVisible=!1,this.inputValue=""},contentFormat:function(e,t){if(!e.content.startsWith("img-file"))return e.content;$t({sendId:213}).then(function(e){return 0===e.data.code?'<el-avatar  shape="square" :size="80" fit="contain" src="'+("data:image/jpeg;base64,"+e.data.data)+'"></el-avatar>':"图片加载失败"})},fileChange2:function(e,t){this.fileList2=[],t.length>3&&this.$message.warning("最多三张图片");for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},fileRemove2:function(e,t){this.fileList2=[];for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},handleCloseTag:function(e){this.cpIds.splice(this.cpIds.indexOf(e),1)},getCpIds:function(){var e=this;Nt({countrys:e.checkedCountry.length>0?e.checkedCountry.join(","):"",type:e.checkedUserType.length>0?e.checkedUserType.join(","):""}).then(function(t){0===t.data.code?e.cpIds=t.data.data:(e.cpIds=[],str=str+"失败，"+t.data.msg,e.$message.error(str))})},handleCheckAllChange:function(e){this.checkedCountry=e?this.allCountry:[],this.isIndeterminate=!1,this.getCpIds()},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.countryOptions.length,this.isIndeterminate=t>0&&t<this.countryOptions.length,this.getCpIds()},handleCheckAllTypeBoxChange:function(e){this.checkedUserType=e?this.allUserTypeOptions:[],this.isIndeterminate2=!1,this.getCpIds()},handleCheckedTypeBoxChange:function(e){var t=e.length;this.checkAll2=t===this.userTypeOptions.length,this.isIndeterminate2=t>0&&t<this.userTypeOptions.length,this.getCpIds()},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":this.dateFormate(a)},dateFormate:function(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return n=n<10?"0"+n:n,t+"-"+a+"-"+r},openMsg2:function(){this.settlementDialogVisible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.fileList2=[]},openRecord:function(){this.settings.visible=!0,this.search2()},onEditorReady:function(e){},openMsg:function(){var e=this;this.dialog.visible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.checkAll2=!1,this.checkedUserType=[],this.fileList2=[],this.isIndeterminate=!1,this.isIndeterminate2=!1,this.submitButtonDisabled=!1,this.$nextTick(function(){e.$refs.uploadImgs.clearFiles()})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e){t.multipleSelection.push(e.appId)})},findType:function(){var e=this;ae().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.payTypeOptions=a}}),me().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.withdrawTypeOptions=a}})},findAgent:function(){var e=this;Te().then(function(t){0===t.data.code&&(e.searchForm.agentOptions=t.data.data)})},refresh:function(){this.search2()},pageChange:function(e){this.page.cur=e,this.refresh()},pageChange2:function(e){this.page2.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},search2:function(){var e=this;e.searchForm2.startCreateTime=""===this.createTime?"":this.createTime[0],e.searchForm2.endCreateTime=""===this.createTime?"":this.createTime[1],Lt({page:e.page2.cur,limit:e.page2.pageSize,id:e.searchForm2.id,status:e.searchForm2.status,groupName:e.searchForm2.groupName,startDate:e.searchForm2.startCreateTime,endDate:e.searchForm2.endCreateTime}).then(function(t){0===t.data.code?(e.tableData2=t.data.data,e.page2.total=t.data.count):(str=str+"失败，"+t.data.msg,e.$message.error(str))})},submitForm2:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.fileList2.length<1&&!this.dialog.form.content?this.$message.warning("图片和内容不能同时为空"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;e.submitButtonDisabled=!0;var a=new FormData;e.fileList2.length>0&&e.fileList2.forEach(function(e,t){a.append("file",e.raw,e.newName)}),a.append("dataList",e.cpIds),a.append("content",e.dialog.form.content),Dt(a).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},submitForm:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;Dt({dataList:e.cpIds,content:e.dialog.form.content}).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},saveCpInfo:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(t.dialog.isInsert?D(t.dialog.form):L(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.refresh(),t.closeDialog()})})},saveBalance:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={appId:0,password:"",verifyCode:"",remain:0,notes:""};t.appId=e.settings.appId,t.password=e.settings.balanceForm.password,t.verifyCode=e.settings.balanceForm.verifyCode,t.remain=e.settings.balanceForm.remain,t.notes=e.settings.balanceForm.notes,t.remain<0&&(t.remain=Math.abs(t.remain)),(e.settings.balanceForm.remain>=0?P(t):z(t)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveCredit:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户信用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.creditForm;t.appId=e.settings.appId,R(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveConfirmMin:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"审核范围吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=JSON.parse(g()(e.settings.confirmForm));t.appId=e.settings.appId,W(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveAgent:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户绑定代理商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.agentForm;t.appId=e.settings.appId,N(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveType:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户指定通道吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.typeForm;t.appId=e.settings.appId,t.defaultPayTypeId=e.settings.typeForm.defaultPayTypeId.toString(),t.defaultWithdrawTypeId=e.settings.typeForm.defaultWithdrawTypeId.toString(),$(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveIp:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的ip地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.ipForm;t.appId=e.settings.appId,O(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm"),this.fileList2=[]},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.userName=t.userName,this.dialog.form.checkPass=t.userPass,this.dialog.form.payFeeFix=t.payFeeFix/100,this.dialog.form.withdrawFeeFix=t.withdrawFeeFix/100,this.dialog.form.agentPayFeeFix=t.agentPayFeeFix/100,this.dialog.form.agentWithdrawFeeFix=t.agentWithdrawFeeFix/100,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){E({appId:t.appId}).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t=this;M({appId:e.appId,status:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmStatus:function(e){var t=this;q({appId:e.appId,confirmStatus:e.confirmStatus}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmMin:function(e){var t=this;W({appId:e.appId,confirmMin:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanWithdraw:function(e){var t=this;B({appId:e.appId,canWithdraw:e.canWithdraw}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanOver:function(e){var t=this;A({appId:e.appId,canOver:e.canOver}).then(function(e){0===e.data.code?t.$message({message:e.data.msg,type:"success"}):t.$message.error(e.data.msg),t.refresh()})},changeSettings:function(e){var t=this;if(this.settings.visible=!0,e.defaultPayTypeId.length>0&&0!==e.defaultPayTypeId){for(var a=e.defaultPayTypeId.split(","),r=[],i=0;i<a.length;i++)r.push(a[i]+"");this.settings.typeForm.defaultPayTypeId=r}else this.settings.typeForm.defaultPayTypeId=[];if(e.defaultWithdrawTypeId.length>0&&0!==e.defaultWithdrawTypeId){for(var s=e.defaultWithdrawTypeId.split(","),n=[],o=0;o<s.length;o++)n.push(s[o]+"");this.settings.typeForm.defaultWithdrawTypeId=n}else this.settings.typeForm.defaultWithdrawTypeId=[];this.$nextTick(function(){t.settings.userName=e.userName,t.settings.payFeeFix=e.payFeeFix,t.settings.payFeeRate=e.payFeeRate,t.settings.withdrawFeeFix=e.withdrawFeeFix,t.settings.withdrawFeeRate=e.withdrawFeeRate,t.settings.agentForm.agentId=e.agentId,t.settings.appId=e.appId,t.settings.confirmForm.confirmStatus=e.confirmStatus,t.settings.confirmForm.confirmMin=Number(e.confirmMin).toFixed(0),t.settings.confirmForm.confirmMax=Number(e.confirmMax).toFixed(0),t.settings.ipForm.ip=e.whiteIps})},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value}),e.allCountry.push(t.value)}))})})},queryUserTypeOptions:function(){var e=this;return new y.a(function(t){X({type:"user_type"}).then(function(t){0===t.data.code&&(e.allUserTypeOptions=[],t.data.data.forEach(function(t,a){e.userTypeOptions.push({label:t.name,value:t.value}),e.allUserTypeOptions.push(t.value)}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()},handleSizeChange2:function(e){this.page2.pageSize=e,this.search2()},filterHandler:function(e,t,a){return e},resetGoogleSecret:function(e){var t=this;V({appId:e.appId}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},changeWhiteIps:function(e){var t=this;U({appId:e.appId,whiteIps:e.whiteIps}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},setConfirmMin:function(){this.settings.confirmForm.confirmMin="min"},setConfirmMax:function(){this.settings.confirmForm.confirmMax="max"},statisticsCpInfo:function(){},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(t<5||t>7)return"";var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]=r[t])}),r},exportCpInfo:function(){this.fileList=[];var e=[],t=/^,|，| $/,a=String(this.searchForm.userName);""!==a&&(t.test(a)?e=a.split(t):(e=[]).push(a)),window.location.href=encodeURI("/cpinfo/exportCpInfo?userNames="+e+"&agentId="+this.searchForm.agentId+"&status="+this.searchForm.status+"&canOver="+this.searchForm.canOver+"&country="+this.searchForm.country)},queryValidPayLogList:function(){var e=this;te({appId:e.settlementForm.appId}).then(function(t){var a=t.data.code,r=(t.data.msg,t.data.data);if(0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r);!(i=(o=l.next()).done);i=!0){var u=o.value;u.amount=c(u.amount);var d=!0,m=!1,p=void 0;try{for(var h,g=f()(u.list);!(d=(h=g.next()).done);d=!0){var v=h.value;v.amount=c(v.amount)}}catch(e){m=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(m)throw p}}}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.validDayList=r}})},openSettlementRemainDrawer:function(e,t){this.validDayList.appId=t.appId,this.settlementForm.appId=t.appId,this.queryValidPayLogList(),this.settleRemainDrawer=!0},closeSettlementRemainDrawer:function(){this.settleRemainDrawer=!1},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},openSettlementDialog:function(e){this.settlementDialogVisible=!0,this.settlementForm.payDay=e.payDay,void 0!==e.payTypeId&&(this.settlementForm.payTypeId=e.payTypeId,this.settlementForm.payTypeName=e.payTypeName),this.settlementForm.amount=e.amount},closeSettlementDialog:function(){this.settlementForm={},this.settlementDialogVisible=!1},settlementPayLog:function(){this.settling=!0;var e=this;ee(this.settlementForm).then(function(t){var a=t.data.code,r=t.data.msg;t.data.data;0===a&&(e.$message(r),e.queryValidPayLogList(),e.settlementDialogVisible=!1),e.$message(r),e.settling=!1})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()},changeList:function(e){this.country=e.value},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})}}},Wt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm2",attrs:{inline:!0,model:e.searchForm2}},[a("el-form-item",{attrs:{label:"群发编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"群发编号"},model:{value:e.searchForm2.id,callback:function(t){e.$set(e.searchForm2,"id",t)},expression:"searchForm2.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm2.status,callback:function(t){e.$set(e.searchForm2,"status",t)},expression:"searchForm2.status"}},e._l(this.statusOption,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search2}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm2")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){return e.openMsg()}}},[e._v("新建群发")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"群发编号22","column-key":"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",width:"120",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"batchNo",width:"140",label:"发送日期",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.content.startsWith("img-file")?a("el-avatar",{attrs:{shape:"square",size:60,fit:"contain",src:e.imageUrl+t.row.batchNo+"&imgName="+t.row.content}}):a("i",[e._v(e._s(t.row.content))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"90",label:"发送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium",type:1==t.row.status?"success":"error"}},[e._v(e._s(1==t.row.status?"成功":"失败")+"\n          ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"msg",width:"250","show-overflow-tooltip":!0,label:"信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"接收商户","show-overflow-tooltip":!0,"column-key":"userId",width:"350"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page2.cur,"page-sizes":[10,20,50,100],"page-size":e.page2.pageSize,layout:"total, sizes, prev, pager, next",total:e.page2.total},on:{"size-change":e.handleSizeChange2,"current-change":e.pageChange2,"update:currentPage":function(t){return e.$set(e.page2,"cur",t)},"update:current-page":function(t){return e.$set(e.page2,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建商户群发",modal:!1,visible:e.dialog.visible,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("国家全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCountry,callback:function(t){e.checkedCountry=t},expression:"checkedCountry"}},e._l(e.countryOptions,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate2},on:{change:e.handleCheckAllTypeBoxChange},model:{value:e.checkAll2,callback:function(t){e.checkAll2=t},expression:"checkAll2"}},[e._v("类型全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedTypeBoxChange},model:{value:e.checkedUserType,callback:function(t){e.checkedUserType=t},expression:"checkedUserType"}},e._l(e.userTypeOptions,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),e._l(e.cpIds,function(t){return a("el-tag",{key:t,attrs:{type:"success",closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloseTag(t)}}},[e._v("\n      "+e._s(t)+"\n    ")])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 输入商户编号")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"内容:"}},[a("el-input",{attrs:{autocomplete:"new-off",type:"textarea",rows:20},model:{value:e.dialog.form.content,callback:function(t){e.$set(e.dialog.form,"content",t)},expression:"dialog.form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片(最多3张):"}},[a("el-upload",{ref:"uploadImgs",staticClass:"avatar-uploader",attrs:{action:"#","list-type":"picture-card","show-file-list":!0,"auto-upload":!1,multiple:!0,"on-change":e.fileChange2,"on-remove":e.fileRemove2,drag:!0,accept:"image/jpeg,image/jpg,image/png",limit:3}},[this.fileList2.length<3?a("i",{staticClass:"el-icon-plus"}):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.submitButtonDisabled},on:{click:function(t){return e.submitForm2("ruleForm")}}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var Bt=a("VU/8")(Rt,Wt,!1,function(e){a("u19V")},null,null).exports,qt={name:"massMsgWithOutUser",components:{quillEditor:Ot.quillEditor},data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{groupData:[],groupValue:[],fileList2:[],imageUrl:"https://13.200.37.118:8080/manage/telegrambot/getImg2?sendId=",startTime:"",endTime:"",createTime:[],pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},cpIds:[],allCountry:[],checkAll:!1,checkedCountry:[],isIndeterminate:!0,statusOption:[{label:"成功",value:"1"},{label:"失败",value:"2"}],editorOption:{modules:{toolbar:"#toolbar"},placeholder:"请输入正文"},fullscreenLoading:!0,searchForm:{userName:"",agentId:"",status:"",canOver:"",agentOptions:[],platformOptions:[],country:""},searchForm2:{id:"",userId:"",status:"",groupName:"",startCreateTime:"",endCreateTime:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"60px",form:{appId:0,userName:"",userPass:"",checkPass:"",payRange:"",withdrawRange:"",subRatio:0,remainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",agentPayFeeFix:"0",agentPayFeeRate:"0",agentWithdrawFeeFix:"0",agentWithdrawFeeRate:"0",country:"",content:""},rules:{content:[{required:!0,message:"请输入",trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{appId:0,password:"",verifyCode:"",remain:0,notes:""},creditForm:{password:"",verifyCode:"",remain:"0"},agentForm:{agentId:""},confirmForm:{confirmStatus:"",confirmMin:"",confirmMax:""},typeForm:{defaultPayTypeId:[],defaultWithdrawTypeId:[]},ipForm:{ip:""},rules:{userName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:e,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:e,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],tableData2:[],page:{pageSize:1e3,total:0,cur:1},page2:{pageSize:10,total:0,cur:1},countryOptions:[],agentOptions:[],filterList:[],whiteIps:"",confirmRangeShow:"",settleRemainDrawer:!1,direction:"rtl",validDayList:[],settlementDialogVisible:!1,settlementForm:{},settling:!1,multipleSelection:[],submitButtonDisabled:!1}},created:function(){this.refresh(),this.findType(),this.findAgent(),this.queryCountryPageList()},watch:{settings:{handler:function(e,t){var a=this.settings.confirmForm.confirmMin,r=this.settings.confirmForm.confirmMax;this.confirmRangeShow=""!==a&&""!==r?"min"===a&&"max"===r?"所有订单全部进入审核":a>r?"所有订单不会进入审核":a+" < 金额<"+r+"的订单进入审核":""!==a&&""===r?a+" < 金额的订单进入审核":""===a&&""!==r?"金额 < "+r+"的订单进入审核":"所有订单不会进入审核"},deep:!0}},methods:{contentFormat:function(e,t){if(!e.content.startsWith("img-file"))return e.content;$t({sendId:213}).then(function(e){return 0===e.data.code?'<el-avatar  shape="square" :size="80" fit="contain" src="'+("data:image/jpeg;base64,"+e.data.data)+'"></el-avatar>':"图片加载失败"})},fileChange2:function(e,t){this.fileList2=[],t.length>3&&this.$message.warning("最多三张图片");for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},fileRemove2:function(e,t){this.fileList2=[];for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},handleCloseTag:function(e){this.cpIds.splice(this.cpIds.indexOf(e),1)},getGroupList:function(){var e=this;_({url:"/telegrambot/getGroupWithOutUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){0===t.data.code?e.groupData=t.data.data:(e.groupData=[],e.groupvalue=[])})},getCpIds:function(){var e=this;Nt({countrys:e.checkedCountry.length>0?e.checkedCountry.join(","):""}).then(function(t){0===t.data.code?e.cpIds=t.data.data:(e.cpIds=[],str=str+"失败，"+t.data.msg,e.$message.error(str))})},handleCheckAllChange:function(e){this.checkedCountry=e?this.allCountry:[],this.isIndeterminate=!1,this.getCpIds()},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.countryOptions.length,this.isIndeterminate=t>0&&t<this.countryOptions.length,this.getCpIds()},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":this.dateFormate(a)},dateFormate:function(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return n=n<10?"0"+n:n,t+"-"+a+"-"+r},openMsg2:function(){this.settlementDialogVisible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.fileList2=[]},openRecord:function(){this.settings.visible=!0,this.search2()},onEditorReady:function(e){},openMsg:function(){var e=this;this.dialog.visible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.fileList2=[],this.groupData=[],this.groupValue=[],this.submitButtonDisabled=!1,this.$nextTick(function(){e.$refs.uploadImgs.clearFiles(),e.getGroupList()})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e){t.multipleSelection.push(e.appId)})},findType:function(){var e=this;ae().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.payTypeOptions=a}}),me().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.withdrawTypeOptions=a}})},findAgent:function(){var e=this;Te().then(function(t){0===t.data.code&&(e.searchForm.agentOptions=t.data.data)})},refresh:function(){this.search2()},pageChange:function(e){this.page.cur=e,this.refresh()},pageChange2:function(e){this.page2.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},search2:function(){var e,t=this;t.searchForm2.startCreateTime=""===this.createTime?"":this.createTime[0],t.searchForm2.endCreateTime=""===this.createTime?"":this.createTime[1],(e={page:t.page2.cur,limit:t.page2.pageSize,id:t.searchForm2.id,status:t.searchForm2.status,groupName:t.searchForm2.groupName,startDate:t.searchForm2.startCreateTime,endDate:t.searchForm2.endCreateTime},_({url:"/telegrambot/getAllRecordByPageWithoutUser",method:"post",headers:{"Content-Type":"application/json"},data:g()(e)})).then(function(e){0===e.data.code?(t.tableData2=e.data.data,t.page2.total=e.data.count):(str=str+"失败，"+e.data.msg,t.$message.error(str))})},submitForm2:function(e){var t=this;this.groupValue.length<1?this.$message.warning("至少选择一个群组"):this.fileList2.length<1&&!this.dialog.form.content?this.$message.warning("图片和内容不能同时为空"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;t.submitButtonDisabled=!0;var a,r=new FormData;e.fileList2.length>0&&e.fileList2.forEach(function(e,t){r.append("file",e.raw,e.newName)}),r.append("groupIdList",e.groupValue),r.append("content",e.dialog.form.content),(a=r,_({url:"/telegrambot/massMsgWithoutUser",method:"post",data:a})).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},submitForm:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;Dt({dataList:e.cpIds,content:e.dialog.form.content}).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},saveCpInfo:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(t.dialog.isInsert?D(t.dialog.form):L(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.refresh(),t.closeDialog()})})},saveBalance:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={appId:0,password:"",verifyCode:"",remain:0,notes:""};t.appId=e.settings.appId,t.password=e.settings.balanceForm.password,t.verifyCode=e.settings.balanceForm.verifyCode,t.remain=e.settings.balanceForm.remain,t.notes=e.settings.balanceForm.notes,t.remain<0&&(t.remain=Math.abs(t.remain)),(e.settings.balanceForm.remain>=0?P(t):z(t)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveCredit:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户信用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.creditForm;t.appId=e.settings.appId,R(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveConfirmMin:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"审核范围吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=JSON.parse(g()(e.settings.confirmForm));t.appId=e.settings.appId,W(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveAgent:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户绑定代理商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.agentForm;t.appId=e.settings.appId,N(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveType:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户指定通道吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.typeForm;t.appId=e.settings.appId,t.defaultPayTypeId=e.settings.typeForm.defaultPayTypeId.toString(),t.defaultWithdrawTypeId=e.settings.typeForm.defaultWithdrawTypeId.toString(),$(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveIp:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的ip地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.ipForm;t.appId=e.settings.appId,O(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm"),this.fileList2=[]},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.userName=t.userName,this.dialog.form.checkPass=t.userPass,this.dialog.form.payFeeFix=t.payFeeFix/100,this.dialog.form.withdrawFeeFix=t.withdrawFeeFix/100,this.dialog.form.agentPayFeeFix=t.agentPayFeeFix/100,this.dialog.form.agentWithdrawFeeFix=t.agentWithdrawFeeFix/100,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){E({appId:t.appId}).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t=this;M({appId:e.appId,status:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmStatus:function(e){var t=this;q({appId:e.appId,confirmStatus:e.confirmStatus}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmMin:function(e){var t=this;W({appId:e.appId,confirmMin:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanWithdraw:function(e){var t=this;B({appId:e.appId,canWithdraw:e.canWithdraw}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanOver:function(e){var t=this;A({appId:e.appId,canOver:e.canOver}).then(function(e){0===e.data.code?t.$message({message:e.data.msg,type:"success"}):t.$message.error(e.data.msg),t.refresh()})},changeSettings:function(e){var t=this;if(this.settings.visible=!0,e.defaultPayTypeId.length>0&&0!==e.defaultPayTypeId){for(var a=e.defaultPayTypeId.split(","),r=[],i=0;i<a.length;i++)r.push(a[i]+"");this.settings.typeForm.defaultPayTypeId=r}else this.settings.typeForm.defaultPayTypeId=[];if(e.defaultWithdrawTypeId.length>0&&0!==e.defaultWithdrawTypeId){for(var s=e.defaultWithdrawTypeId.split(","),n=[],o=0;o<s.length;o++)n.push(s[o]+"");this.settings.typeForm.defaultWithdrawTypeId=n}else this.settings.typeForm.defaultWithdrawTypeId=[];this.$nextTick(function(){t.settings.userName=e.userName,t.settings.payFeeFix=e.payFeeFix,t.settings.payFeeRate=e.payFeeRate,t.settings.withdrawFeeFix=e.withdrawFeeFix,t.settings.withdrawFeeRate=e.withdrawFeeRate,t.settings.agentForm.agentId=e.agentId,t.settings.appId=e.appId,t.settings.confirmForm.confirmStatus=e.confirmStatus,t.settings.confirmForm.confirmMin=Number(e.confirmMin).toFixed(0),t.settings.confirmForm.confirmMax=Number(e.confirmMax).toFixed(0),t.settings.ipForm.ip=e.whiteIps})},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value}),e.allCountry.push(t.value)}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()},handleSizeChange2:function(e){this.page2.pageSize=e,this.search2()},filterHandler:function(e,t,a){return e},resetGoogleSecret:function(e){var t=this;V({appId:e.appId}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},changeWhiteIps:function(e){var t=this;U({appId:e.appId,whiteIps:e.whiteIps}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},setConfirmMin:function(){this.settings.confirmForm.confirmMin="min"},setConfirmMax:function(){this.settings.confirmForm.confirmMax="max"},statisticsCpInfo:function(){},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(t<5||t>7)return"";var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]=r[t])}),r},exportCpInfo:function(){this.fileList=[];var e=[],t=/^,|，| $/,a=String(this.searchForm.userName);""!==a&&(t.test(a)?e=a.split(t):(e=[]).push(a)),window.location.href=encodeURI("/cpinfo/exportCpInfo?userNames="+e+"&agentId="+this.searchForm.agentId+"&status="+this.searchForm.status+"&canOver="+this.searchForm.canOver+"&country="+this.searchForm.country)},queryValidPayLogList:function(){var e=this;te({appId:e.settlementForm.appId}).then(function(t){var a=t.data.code,r=(t.data.msg,t.data.data);if(0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r);!(i=(o=l.next()).done);i=!0){var u=o.value;u.amount=c(u.amount);var d=!0,m=!1,p=void 0;try{for(var h,g=f()(u.list);!(d=(h=g.next()).done);d=!0){var v=h.value;v.amount=c(v.amount)}}catch(e){m=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(m)throw p}}}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.validDayList=r}})},openSettlementRemainDrawer:function(e,t){this.validDayList.appId=t.appId,this.settlementForm.appId=t.appId,this.queryValidPayLogList(),this.settleRemainDrawer=!0},closeSettlementRemainDrawer:function(){this.settleRemainDrawer=!1},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},openSettlementDialog:function(e){this.settlementDialogVisible=!0,this.settlementForm.payDay=e.payDay,void 0!==e.payTypeId&&(this.settlementForm.payTypeId=e.payTypeId,this.settlementForm.payTypeName=e.payTypeName),this.settlementForm.amount=e.amount},closeSettlementDialog:function(){this.settlementForm={},this.settlementDialogVisible=!1},settlementPayLog:function(){this.settling=!0;var e=this;ee(this.settlementForm).then(function(t){var a=t.data.code,r=t.data.msg;t.data.data;0===a&&(e.$message(r),e.queryValidPayLogList(),e.settlementDialogVisible=!1),e.$message(r),e.settling=!1})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()},changeList:function(e){this.country=e.value},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})}}},Mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm2",attrs:{inline:!0,model:e.searchForm2}},[a("el-form-item",{attrs:{label:"群发编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"群发编号"},model:{value:e.searchForm2.id,callback:function(t){e.$set(e.searchForm2,"id",t)},expression:"searchForm2.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm2.status,callback:function(t){e.$set(e.searchForm2,"status",t)},expression:"searchForm2.status"}},e._l(this.statusOption,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search2}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm2")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){return e.openMsg()}}},[e._v("新建群发")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"群发编号","column-key":"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",width:"120",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"batchNo",width:"140",label:"发送日期",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.content.startsWith("img-file")?a("el-avatar",{attrs:{shape:"square",size:60,fit:"contain",src:e.imageUrl+t.row.batchNo+"&imgName="+t.row.content}}):a("i",[e._v(e._s(t.row.content))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"90",label:"发送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium",type:1==t.row.status?"success":"error"}},[e._v(e._s(1==t.row.status?"成功":"失败")+"\n          ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"msg",width:"250","show-overflow-tooltip":!0,label:"信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"接收群组","show-overflow-tooltip":!0,"column-key":"groupName",width:"350"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page2.cur,"page-sizes":[10,20,50,100],"page-size":e.page2.pageSize,layout:"total, sizes, prev, pager, next",total:e.page2.total},on:{"size-change":e.handleSizeChange2,"current-change":e.pageChange2,"update:currentPage":function(t){return e.$set(e.page2,"cur",t)},"update:current-page":function(t){return e.$set(e.page2,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建群组群发",modal:!1,visible:e.dialog.visible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules}},[a("el-row",{staticStyle:{"margin-bottom":"5px"}},[a("el-transfer",{attrs:{titles:["可选群组","已选群组"],data:e.groupData,filterable:!0},model:{value:e.groupValue,callback:function(t){e.groupValue=t},expression:"groupValue"}})],1),e._v(" "),a("div",{staticClass:"quill-editor-toolbar",attrs:{id:"toolbar"}},[a("select",{staticClass:"ql-size"},[a("option",{attrs:{value:"small"}}),e._v(" "),a("option",{attrs:{selected:""}}),e._v(" "),a("option",{attrs:{value:"large"}}),e._v(" "),a("option",{attrs:{value:"huge"}})]),e._v(" "),a("select",{staticClass:"ql-header"},[a("option",{attrs:{value:"1"}}),e._v(" "),a("option",{attrs:{value:"2"}}),e._v(" "),a("option",{attrs:{value:"3"}}),e._v(" "),a("option",{attrs:{value:"4"}}),e._v(" "),a("option",{attrs:{value:"5"}}),e._v(" "),a("option",{attrs:{value:"6"}}),e._v(" "),a("option",{attrs:{selected:""}})]),e._v(" "),a("select",{staticClass:"ql-font"}),e._v(" "),a("button",{staticClass:"ql-bold"}),e._v(" "),a("button",{staticClass:"ql-italic"}),e._v(" "),a("button",{staticClass:"ql-underline"}),e._v(" "),a("button",{staticClass:"ql-strike"}),e._v(" "),a("button",{staticClass:"ql-blockquote"}),e._v(" "),a("button",{staticClass:"ql-code-block"}),e._v(" "),a("select",{staticClass:"ql-color"}),e._v(" "),a("select",{staticClass:"ql-background"}),e._v(" "),a("select",{staticClass:"ql-align"}),e._v(" "),a("button",{staticClass:"ql-script",attrs:{value:"sub"}}),e._v(" "),a("button",{staticClass:"ql-script",attrs:{value:"super"}}),e._v(" "),a("button",{staticClass:"ql-direction",attrs:{value:"rtl"}}),e._v(" "),a("button",{staticClass:"ql-indent",attrs:{value:"-1"}}),e._v(" "),a("button",{staticClass:"ql-indent",attrs:{value:"+1"}}),e._v(" "),a("button",{staticClass:"ql-list",attrs:{value:"ordered"}}),e._v(" "),a("button",{staticClass:"ql-list",attrs:{value:"bullet"}}),e._v(" "),a("button",{staticClass:"ql-header",attrs:{value:"1"}}),e._v(" "),a("button",{staticClass:"ql-header",attrs:{value:"2"}}),e._v(" "),a("button",{staticClass:"ql-clean"})]),e._v(" "),a("el-form-item",[a("el-input",{attrs:{autocomplete:"new-off",type:"textarea",rows:9},model:{value:e.dialog.form.content,callback:function(t){e.$set(e.dialog.form,"content",t)},expression:"dialog.form.content"}})],1),e._v(" "),a("quill-editor",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"myQuillEditor",staticClass:"quill-editor",attrs:{options:e.editorOption},on:{ready:function(t){return e.onEditorReady(t)}}}),e._v(" "),a("el-form-item",{attrs:{label:"图片:"}},[a("el-upload",{ref:"uploadImgs",staticClass:"avatar-uploader",attrs:{size:"small",action:"#","list-type":"picture-card","show-file-list":!0,"auto-upload":!1,multiple:!0,"on-change":e.fileChange2,"on-remove":e.fileRemove2,drag:!0,accept:"image/jpeg,image/jpg,image/png",limit:3}},[this.fileList2.length<3?a("i",{staticClass:"el-icon-plus"}):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.submitButtonDisabled},on:{click:function(t){return e.submitForm2("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Et=a("VU/8")(qt,Mt,!1,function(e){a("cQqO")},null,null).exports;var Vt={name:"questionRecord",data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fileList2:[],imageUrl:"https://13.200.37.118:8080/manage/telegrambot/getImg2?sendId=",startTime:"",endTime:"",createTime:[],pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},cpIds:[],allCountry:[],checkAll:!1,checkedCountry:[],isIndeterminate:!0,statusOption:[{label:"未处理",value:"1"},{label:"已处理",value:"2"}],editorOption:{modules:{toolbar:"#toolbar"},placeholder:"请输入正文"},fullscreenLoading:!0,searchForm:{userName:"",agentId:"",status:"",canOver:"",agentOptions:[],platformOptions:[],country:""},searchForm2:{id:"",userId:"",status:"",groupName:"",startCreateTime:"",endCreateTime:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"80px",form:{appId:0,userName:"",userPass:"",checkPass:"",payRange:"",withdrawRange:"",subRatio:0,remainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",agentPayFeeFix:"0",agentPayFeeRate:"0",agentWithdrawFeeFix:"0",agentWithdrawFeeRate:"0",country:"",content:""},rules:{content:[{required:!0,message:"请输入",trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{appId:0,password:"",verifyCode:"",remain:0,notes:""},creditForm:{password:"",verifyCode:"",remain:"0"},agentForm:{agentId:""},confirmForm:{confirmStatus:"",confirmMin:"",confirmMax:""},typeForm:{defaultPayTypeId:[],defaultWithdrawTypeId:[]},ipForm:{ip:""},rules:{userName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:e,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:e,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],tableData2:[],page:{pageSize:1e3,total:0,cur:1},page2:{pageSize:10,total:0,cur:1},countryOptions:[],agentOptions:[],filterList:[],whiteIps:"",confirmRangeShow:"",settleRemainDrawer:!1,direction:"rtl",validDayList:[],settlementDialogVisible:!1,settlementForm:{},settling:!1,multipleSelection:[]}},created:function(){this.refresh(),this.findType(),this.findAgent(),this.queryCountryPageList()},watch:{settings:{handler:function(e,t){var a=this.settings.confirmForm.confirmMin,r=this.settings.confirmForm.confirmMax;this.confirmRangeShow=""!==a&&""!==r?"min"===a&&"max"===r?"所有订单全部进入审核":a>r?"所有订单不会进入审核":a+" < 金额<"+r+"的订单进入审核":""!==a&&""===r?a+" < 金额的订单进入审核":""===a&&""!==r?"金额 < "+r+"的订单进入审核":"所有订单不会进入审核"},deep:!0}},methods:{contentFormat:function(e,t){if(!e.content.startsWith("img-file"))return e.content;$t({sendId:213}).then(function(e){return 0===e.data.code?'<el-avatar  shape="square" :size="80" fit="contain" src="'+("data:image/jpeg;base64,"+e.data.data)+'"></el-avatar>':"图片加载失败"})},fileChange2:function(e,t){this.fileList2=[],t.length>3&&this.$message.warning("最多三张图片");for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},fileRemove2:function(e,t){this.fileList2=[];for(var a=0;a<t.length;a++)a<3&&this.fileList2.push(t[a])},handleCloseTag:function(e){this.cpIds.splice(this.cpIds.indexOf(e),1)},getCpIds:function(){var e=this;Nt({countrys:e.checkedCountry.length>0?e.checkedCountry.join(","):""}).then(function(t){0===t.data.code?e.cpIds=t.data.data:(e.cpIds=[],str=str+"失败，"+t.data.msg,e.$message.error(str))})},handleCheckAllChange:function(e){this.checkedCountry=e?this.allCountry:[],this.isIndeterminate=!1,this.getCpIds()},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.countryOptions.length,this.isIndeterminate=t>0&&t<this.countryOptions.length,this.getCpIds()},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":this.dateFormate(a)},dateFormate:function(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return n=n<10?"0"+n:n,t+"-"+a+"-"+r},openMsg2:function(){this.settlementDialogVisible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.fileList2=[]},openRecord:function(){this.settings.visible=!0,this.search2()},onEditorReady:function(e){},openMsg:function(){var e=this;this.dialog.visible=!0,this.cpIds=[],this.checkAll=!1,this.checkedCountry=[],this.fileList2=[],this.$nextTick(function(){e.$refs.uploadImgs.clearFiles()})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e){t.multipleSelection.push(e.appId)})},findType:function(){var e=this;ae().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.payTypeOptions=a}}),me().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var i={};i.id=t.data.data[r].id+"",i.name=t.data.data[r].name+"",i.status=t.data.data[r].status+"",a.push(i)}e.settings.withdrawTypeOptions=a}})},findAgent:function(){var e=this;Te().then(function(t){0===t.data.code&&(e.searchForm.agentOptions=t.data.data)})},refresh:function(){this.search2()},pageChange:function(e){this.page.cur=e,this.refresh()},pageChange2:function(e){this.page2.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},search2:function(){var e,t=this;t.searchForm2.startCreateTime=""===this.createTime?"":this.createTime[0],t.searchForm2.endCreateTime=""===this.createTime?"":this.createTime[1],(e={page:t.page2.cur,limit:t.page2.pageSize,id:t.searchForm2.id,status:t.searchForm2.status,startDate:t.searchForm2.startCreateTime,endDate:t.searchForm2.endCreateTime},_({url:"/questionRecord/getQuestionRecordByPage",method:"post",headers:{"Content-Type":"application/json"},data:g()(e)})).then(function(e){0===e.data.code?(t.tableData2=e.data.data,t.page2.total=e.data.count):(str=str+"失败，"+e.data.msg,t.$message.error(str))})},submitForm2:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.fileList2.length<1&&!this.dialog.form.content?this.$message.warning("图片和内容不能同时为空"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t,a=new FormData;e.fileList2.length>0&&e.fileList2.forEach(function(e,t){a.append("file",e.raw,e.newName)}),a.append("dataList",e.cpIds),a.append("content",e.dialog.form.content),Dt(a).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},submitForm:function(e){var t=this;this.cpIds.length<1?this.$message.warning("至少选择一个商户"):this.$confirm("确定群发消息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t;Dt({dataList:e.cpIds,content:e.dialog.form.content}).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):(str=str+"失败，"+t.data.msg,e.$message.error(str)),e.refresh(),e.closeDialog()})})},saveCpInfo:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(t.dialog.isInsert?D(t.dialog.form):L(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.refresh(),t.closeDialog()})})},saveBalance:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={appId:0,password:"",verifyCode:"",remain:0,notes:""};t.appId=e.settings.appId,t.password=e.settings.balanceForm.password,t.verifyCode=e.settings.balanceForm.verifyCode,t.remain=e.settings.balanceForm.remain,t.notes=e.settings.balanceForm.notes,t.remain<0&&(t.remain=Math.abs(t.remain)),(e.settings.balanceForm.remain>=0?P(t):z(t)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveCredit:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户信用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.creditForm;t.appId=e.settings.appId,R(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveConfirmMin:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"审核范围吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=JSON.parse(g()(e.settings.confirmForm));t.appId=e.settings.appId,W(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveAgent:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户绑定代理商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.agentForm;t.appId=e.settings.appId,N(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveType:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户指定通道吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.typeForm;t.appId=e.settings.appId,t.defaultPayTypeId=e.settings.typeForm.defaultPayTypeId.toString(),t.defaultWithdrawTypeId=e.settings.typeForm.defaultWithdrawTypeId.toString(),$(t).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveIp:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的ip地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.ipForm;t.appId=e.settings.appId,O(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm"),this.fileList2=[]},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.userName=t.userName,this.dialog.form.checkPass=t.userPass,this.dialog.form.payFeeFix=t.payFeeFix/100,this.dialog.form.withdrawFeeFix=t.withdrawFeeFix/100,this.dialog.form.agentPayFeeFix=t.agentPayFeeFix/100,this.dialog.form.agentWithdrawFeeFix=t.agentWithdrawFeeFix/100,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){E({appId:t.appId}).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t=this;M({appId:e.appId,status:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmStatus:function(e){var t=this;q({appId:e.appId,confirmStatus:e.confirmStatus}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeConfirmMin:function(e){var t=this;W({appId:e.appId,confirmMin:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanWithdraw:function(e){var t=this;B({appId:e.appId,canWithdraw:e.canWithdraw}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanOver:function(e){var t=this;A({appId:e.appId,canOver:e.canOver}).then(function(e){0===e.data.code?t.$message({message:e.data.msg,type:"success"}):t.$message.error(e.data.msg),t.refresh()})},changeSettings:function(e){var t=this;if(this.settings.visible=!0,e.defaultPayTypeId.length>0&&0!==e.defaultPayTypeId){for(var a=e.defaultPayTypeId.split(","),r=[],i=0;i<a.length;i++)r.push(a[i]+"");this.settings.typeForm.defaultPayTypeId=r}else this.settings.typeForm.defaultPayTypeId=[];if(e.defaultWithdrawTypeId.length>0&&0!==e.defaultWithdrawTypeId){for(var s=e.defaultWithdrawTypeId.split(","),n=[],o=0;o<s.length;o++)n.push(s[o]+"");this.settings.typeForm.defaultWithdrawTypeId=n}else this.settings.typeForm.defaultWithdrawTypeId=[];this.$nextTick(function(){t.settings.userName=e.userName,t.settings.payFeeFix=e.payFeeFix,t.settings.payFeeRate=e.payFeeRate,t.settings.withdrawFeeFix=e.withdrawFeeFix,t.settings.withdrawFeeRate=e.withdrawFeeRate,t.settings.agentForm.agentId=e.agentId,t.settings.appId=e.appId,t.settings.confirmForm.confirmStatus=e.confirmStatus,t.settings.confirmForm.confirmMin=Number(e.confirmMin).toFixed(0),t.settings.confirmForm.confirmMax=Number(e.confirmMax).toFixed(0),t.settings.ipForm.ip=e.whiteIps})},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryCountryPageList:function(){var e=this;return new y.a(function(t){G({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value}),e.allCountry.push(t.value)}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()},handleSizeChange2:function(e){this.page2.pageSize=e,this.search2()},filterHandler:function(e,t,a){return e},resetGoogleSecret:function(e){var t=this;V({appId:e.appId}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},changeWhiteIps:function(e){var t=this;U({appId:e.appId,whiteIps:e.whiteIps}).then(function(e){0===e.data.code&&t.$message(e.data.msg)})},setConfirmMin:function(){this.settings.confirmForm.confirmMin="min"},setConfirmMax:function(){this.settings.confirmForm.confirmMax="max"},statisticsCpInfo:function(){},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(t<5||t>7)return"";var i=a.map(function(t){return Number(t[e.property])});i.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]=r[t])}),r},exportCpInfo:function(){this.fileList=[];var e=[],t=/^,|，| $/,a=String(this.searchForm.userName);""!==a&&(t.test(a)?e=a.split(t):(e=[]).push(a)),window.location.href=encodeURI("/cpinfo/exportCpInfo?userNames="+e+"&agentId="+this.searchForm.agentId+"&status="+this.searchForm.status+"&canOver="+this.searchForm.canOver+"&country="+this.searchForm.country)},queryValidPayLogList:function(){var e=this;te({appId:e.settlementForm.appId}).then(function(t){var a=t.data.code,r=(t.data.msg,t.data.data);if(0===a){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(r);!(i=(o=l.next()).done);i=!0){var u=o.value;u.amount=c(u.amount);var d=!0,m=!1,p=void 0;try{for(var h,g=f()(u.list);!(d=(h=g.next()).done);d=!0){var v=h.value;v.amount=c(v.amount)}}catch(e){m=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(m)throw p}}}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}e.validDayList=r}})},openSettlementRemainDrawer:function(e,t){this.validDayList.appId=t.appId,this.settlementForm.appId=t.appId,this.queryValidPayLogList(),this.settleRemainDrawer=!0},closeSettlementRemainDrawer:function(){this.settleRemainDrawer=!1},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},openSettlementDialog:function(e){this.settlementDialogVisible=!0,this.settlementForm.payDay=e.payDay,void 0!==e.payTypeId&&(this.settlementForm.payTypeId=e.payTypeId,this.settlementForm.payTypeName=e.payTypeName),this.settlementForm.amount=e.amount},closeSettlementDialog:function(){this.settlementForm={},this.settlementDialogVisible=!1},settlementPayLog:function(){this.settling=!0;var e=this;ee(this.settlementForm).then(function(t){var a=t.data.code,r=t.data.msg;t.data.data;0===a&&(e.$message(r),e.queryValidPayLogList(),e.settlementDialogVisible=!1),e.$message(r),e.settling=!1})},handleClick:function(e,t){this.searchForm.country=this.countryOptions[e.index].value,this.refresh()},changeList:function(e){this.country=e.value},queryCurrencyPageList:function(){var e=this;return new y.a(function(t){Q({type:"currency"}).then(function(t){0===t.data.code&&(e.currencyOptions=[],t.data.data.forEach(function(t,a){e.currencyOptions.push({label:t.name,value:t.value})}))})})}}},Ut={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm2",attrs:{inline:!0,model:e.searchForm2}},[a("el-form-item",{attrs:{label:"编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"编号"},model:{value:e.searchForm2.id,callback:function(t){e.$set(e.searchForm2,"id",t)},expression:"searchForm2.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search2}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm2")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,size:"mini"}},[a("el-table-column",{attrs:{prop:"id",label:"编号","column-key":"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"提问日期",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"question","show-overflow-tooltip":!0,label:"信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","show-overflow-tooltip":!0,"column-key":"userId"}}),e._v(" "),a("el-table-column",{attrs:{prop:"telegram",label:"飞机号","show-overflow-tooltip":!0,"column-key":"userId"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":!0}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page2.cur,"page-sizes":[10,20,50,100],"page-size":e.page2.pageSize,layout:"total, sizes, prev, pager, next",total:e.page2.total},on:{"size-change":e.handleSizeChange2,"current-change":e.pageChange2,"update:currentPage":function(t){return e.$set(e.page2,"cur",t)},"update:current-page":function(t){return e.$set(e.page2,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建商户群发",modal:!1,visible:e.dialog.visible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCountry,callback:function(t){e.checkedCountry=t},expression:"checkedCountry"}},e._l(e.countryOptions,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),e._l(e.cpIds,function(t){return a("el-tag",{key:t,attrs:{type:"success",closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloseTag(t)}}},[e._v("\n        "+e._s(t)+"\n      ")])}),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"内容:"}},[a("el-input",{attrs:{autocomplete:"new-off",type:"textarea",rows:3},model:{value:e.dialog.form.content,callback:function(t){e.$set(e.dialog.form,"content",t)},expression:"dialog.form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片(最多3张):"}},[a("el-upload",{ref:"uploadImgs",staticClass:"avatar-uploader",attrs:{action:"#","list-type":"picture-card","show-file-list":!0,"auto-upload":!1,multiple:!0,"on-change":e.fileChange2,"on-remove":e.fileRemove2,drag:!0,accept:"image/jpeg,image/jpg,image/png",limit:3}},[this.fileList2.length<3?a("i",{staticClass:"el-icon-plus"}):e._e()])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm2("ruleForm")}}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var Ht=a("VU/8")(Vt,Ut,!1,function(e){a("FDAq")},null,null).exports,jt=a("bOdI"),Gt=a.n(jt),Qt={name:"commandList",data:function(){return{page:{pageSize:10,total:0,cur:1},createTime:[],pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},fullscreenLoading:!1,searchForm:{id:"",limit:10,startCreateTime:"",endCreateTime:""},total:0,dialog:{title:"添加指令",isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",command:"",descr:"",response:""},rules:{command:[{required:!0,message:"请输入",trigger:"blur"}],descr:[{required:!0,message:"请输入",trigger:"blur"}],response:[{required:!0,message:"请输入",trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""},creditForm:{password:"",Verifycode:"",remain:"0"},agentForm:{UserName:""},typeForm:{payType:0,withdrawType:0},rules:{},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[]}},created:function(){this.queryCommandPageList()},methods:Gt()({dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":this.dateFormate(a)},dateFormate:function(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return n=n<10?"0"+n:n,t+"-"+a+"-"+r},queryCommandPageList:function(){var e,t=this;t.searchForm.startCreateTime=""===this.createTime?"":this.createTime[0],t.searchForm.endCreateTime=""===this.createTime?"":this.createTime[1],(e={page:t.page.cur,limit:t.page.pageSize,id:t.searchForm.id,startDate:t.searchForm.startCreateTime,endDate:t.searchForm.endCreateTime},_({url:"/telegrambot/getAllCommandByPage",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},refresh:function(){this.queryCommandPageList()},pageChange:function(e){this.page.cur=e,this.queryCommandPageList()},search:function(){this.queryCommandPageList()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e&&t.saveCommand()})},saveCommand:function(){var e=this,t=this.dialog.isInsert?"添加":"编辑",a=this;this.$confirm("确定"+t+"指令?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(e.dialog.isInsert?(r=a.dialog.form,_({url:"/telegrambot/addCommand",method:"post",headers:{"Content-Type":"application/json"},data:g()(r)})):function(e){return _({url:"/telegrambot/updateCommand",method:"post",headers:{"Content-Type":"application/json"},data:g()(e)})}(a.dialog.form)).then(function(e){0===e.data.code?(a.$message({message:t+"成功",type:"success"}),a.queryCommandPageList()):(t=t+"失败，"+e.data.msg,a.$message.error(t)),a.closeDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.resetForm(t)},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.title="修改指令",this.dialog.form.id=t.id,this.dialog.form.command=t.command,this.dialog.form.descr=t.descr,this.dialog.form.response=t.response,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("删除指令, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={ids:t.id},_({url:"/telegrambot/deleteCommand",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.queryCommandPageList()})})},changeStatus:function(e){var t=this;re({id:e.userId,status:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeSettings:function(e){if(this.settings.visible=!0,e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var t=e.DefaultPayTypeId.split("、"),a=[],r=0;r<t.length;r++)a.push(t[r]+"");this.settings.typeForm.payType=a}else this.settings.typeForm.payType=[];if(e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var i=e.DefaultWithdrawTypeId.split("、"),s=[],n=0;n<i.length;n++)s.push(i[n]+"");this.settings.typeForm.withdrawType=s}else this.settings.typeForm.withdrawType=[];this.settings.userName=e.UserName,this.settings.appId=e.appId,this.settings.payFeeFix=e.payFeeFix,this.settings.payFeeRate=e.payFeeRate,this.settings.withdrawFeeFix=e.withdrawFeeFix,this.settings.withdrawFeeRate=e.withdrawFeeRate},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryRoleSelectList:function(){var e=this;return new y.a(function(t){Qe().then(function(t){0===t.data.code&&(e.roleOptions=[],t.data.data.forEach(function(t,a){e.roleOptions.push({label:t.rolename,value:t.id})}))})})},openCommand:function(){this.dialog.title="添加指令",this.dialog.visible=!0},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()}},"pageChange",function(e){this.page.cur=e,this.refresh()})},Xt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"编号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openCommand()}}},[e._v("新增指令")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"command",label:"指令"}}),e._v(" "),a("el-table-column",{attrs:{prop:"descr",label:"指令描述","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"response",label:"回复内容","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page.cur,"page-sizes":[10,20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.page,"cur",t)},"update:current-page":function(t){return e.$set(e.page,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialog.title,modal:!1,visible:e.dialog.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"指令:","label-width":"90px",prop:"command"}},[a("el-input",{attrs:{placeholder:"只能由 小写英文字母,数字,下划线组成, 示例：movie"},model:{value:e.dialog.form.command,callback:function(t){e.$set(e.dialog.form,"command",t)},expression:"dialog.form.command"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"指令描述:","label-width":"90px",prop:"descr"}},[a("el-input",{attrs:{placeholder:"示例：推荐一部电影"},model:{value:e.dialog.form.descr,callback:function(t){e.$set(e.dialog.form,"descr",t)},expression:"dialog.form.descr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回复内容:","label-width":"90px",prop:"response"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"阿甘正传"},model:{value:e.dialog.form.response,callback:function(t){e.$set(e.dialog.form,"response",t)},expression:"dialog.form.response"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Kt=a("VU/8")(Qt,Xt,!1,function(e){a("luBi")},"data-v-90b94764",null).exports,Yt={name:"keywordsList",data:function(){return{page:{pageSize:10,total:0,cur:1},createTime:[],pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},fullscreenLoading:!1,searchForm:{id:"",limit:10,startCreateTime:"",endCreateTime:""},total:0,dialog:{title:"添加指令",isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",keywords:"",response:""},rules:{keywords:[{required:!0,message:"请输入",trigger:"blur"}],response:[{required:!0,message:"请输入",trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""},creditForm:{password:"",Verifycode:"",remain:"0"},agentForm:{UserName:""},typeForm:{payType:0,withdrawType:0},rules:{},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[]}},created:function(){this.queryCommandPageList()},methods:Gt()({dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":this.dateFormate(a)},dateFormate:function(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return n=n<10?"0"+n:n,t+"-"+a+"-"+r},queryCommandPageList:function(){var e,t=this;t.searchForm.startCreateTime=""===this.createTime?"":this.createTime[0],t.searchForm.endCreateTime=""===this.createTime?"":this.createTime[1],(e={page:t.page.cur,limit:t.page.pageSize,id:t.searchForm.id,startDate:t.searchForm.startCreateTime,endDate:t.searchForm.endCreateTime},_({url:"/telegrambot/getAllKeywordsByPage",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},refresh:function(){this.queryCommandPageList()},pageChange:function(e){this.page.cur=e,this.queryCommandPageList()},search:function(){this.queryCommandPageList()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e&&t.saveCommand()})},saveCommand:function(){var e=this,t=this.dialog.isInsert?"添加":"编辑",a=this;this.$confirm("确定"+t+"关键词?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(e.dialog.isInsert?(r=a.dialog.form,_({url:"/telegrambot/addKeywords",method:"post",headers:{"Content-Type":"application/json"},data:g()(r)})):function(e){return _({url:"/telegrambot/updateKeywords",method:"post",headers:{"Content-Type":"application/json"},data:g()(e)})}(a.dialog.form)).then(function(e){0===e.data.code?(a.$message({message:t+"成功",type:"success"}),a.queryCommandPageList()):(t=t+"失败，"+e.data.msg,a.$message.error(t)),a.closeDialog()})})},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.resetForm(t)},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.title="修改关键词",this.dialog.form.id=t.id,this.dialog.form.command=t.command,this.dialog.form.descr=t.descr,this.dialog.form.response=t.response,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("删除关键词, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={ids:t.id},_({url:"/telegrambot/deleteKeywords",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.queryCommandPageList()})})},changeStatus:function(e){var t=this;re({id:e.userId,status:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeSettings:function(e){if(this.settings.visible=!0,e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var t=e.DefaultPayTypeId.split("、"),a=[],r=0;r<t.length;r++)a.push(t[r]+"");this.settings.typeForm.payType=a}else this.settings.typeForm.payType=[];if(e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var i=e.DefaultWithdrawTypeId.split("、"),s=[],n=0;n<i.length;n++)s.push(i[n]+"");this.settings.typeForm.withdrawType=s}else this.settings.typeForm.withdrawType=[];this.settings.userName=e.UserName,this.settings.appId=e.appId,this.settings.payFeeFix=e.payFeeFix,this.settings.payFeeRate=e.payFeeRate,this.settings.withdrawFeeFix=e.withdrawFeeFix,this.settings.withdrawFeeRate=e.withdrawFeeRate},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryRoleSelectList:function(){var e=this;return new y.a(function(t){Qe().then(function(t){0===t.data.code&&(e.roleOptions=[],t.data.data.forEach(function(t,a){e.roleOptions.push({label:t.rolename,value:t.id})}))})})},openCommand:function(){this.dialog.title="添加关键词",this.dialog.visible=!0},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()}},"pageChange",function(e){this.page.cur=e,this.refresh()})},Zt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"编号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"起始日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openCommand()}}},[e._v("新增关键词")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"keywords",label:"关键词"}}),e._v(" "),a("el-table-column",{attrs:{prop:"response",label:"回复内容","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page.cur,"page-sizes":[10,20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.page,"cur",t)},"update:current-page":function(t){return e.$set(e.page,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialog.title,modal:!1,visible:e.dialog.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"关键词:","label-width":"90px",prop:"keywords"}},[a("el-input",{attrs:{placeholder:"示例：换汇"},model:{value:e.dialog.form.keywords,callback:function(t){e.$set(e.dialog.form,"keywords",t)},expression:"dialog.form.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回复内容:","label-width":"90px",prop:"response"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"示例：换汇就选oceanCash. 欢迎咨询访问 oceancash.top"},model:{value:e.dialog.form.response,callback:function(t){e.$set(e.dialog.form,"response",t)},expression:"dialog.form.response"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Jt={name:"permissionList",components:{OneButton:ne},data:function(){return{searchForm:{page:0,limit:10},tableData:[],dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:null,permissName:"",pValue:"",sort:null,upId:null,pType:"",pIcon:"",pLevel:""},rules:{}},typeOptions:[{label:"菜单栏",value:"1"},{label:"菜单",value:"2"},{label:"按钮",value:"3"}]}},created:function(){this.pageList()},methods:{pageList:function(){var e=this;return e.fullscreenLoading=!0,new y.a(function(t){var a;(a=e.searchForm,_({url:"/permission/queryPermissionTreePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})).then(function(t){if(0===t.data.code){for(var a=t.data.data.statistics,r=t.data.data.list,i=0;i<r.length;i++){var s=r[i];if(s.length>0){s.hasChildren=!0;for(var n=0;n<s.length;n++){var o=s[n];o.length>0&&(o.hasChildren=!0)}}}e.tableData=r,e.total=a.totalAllNum,e.fullscreenLoading=!1}})})},search:function(){this.pageList()},resetForm:function(e){this.$refs[e].resetFields()},commonCloseDialog:function(e,t){ke()(e).forEach(function(t){var a=xe()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")})},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},addPermission:function(e,t){console.log(t),this.dialog.form.upId=t.id,this.dialog.visible=!0},deletePermission:function(e,t){var a=this;this.$confirm("删除菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,r=a;(e={id:t.id},_({url:"/permission/deletePermission",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){var t=e.data.code,a=e.data.msg;e.data.data;0===t&&r.pageList(),r.$message(a)})})},handleEdit:function(e,t){var a=this;ke()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.visible=!0,this.dialog.isInsert=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e&&t.savePermission()})},savePermission:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(t.dialog.isInsert?(a=t.dialog.form,_({url:"/permission/addPermission",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(a)})):function(e){return _({url:"/permission/updatePermission",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})}(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.pageList(),t.closeDialog()})})},queryRoleMenuTreeList:function(){return new y.a(function(e){Ze().then(function(e){if(0===e.data.code)e.data.data})})}}},ea={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row"),e._v(" "),a("el-row",[a("one-button",{attrs:{type:"primary",perms:"system-permissionList-search"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","row-key":"id"}},[a("el-table-column",{attrs:{align:"center",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"permissName",label:"名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.pType?a("span",{staticClass:"settlement-status settlement-status-success"},[e._v("菜单栏")]):e._e(),e._v(" "),"2"===t.row.pType?a("span",{staticClass:"settlement-status settlement-status-initial"},[e._v("菜单")]):e._e(),e._v(" "),"3"===t.row.pType?a("span",{staticClass:"settlement-status settlement-status-reject"},[e._v("按钮")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pValue",label:"权限标识",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"权重",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upName",label:"上级菜单",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.pType||"2"===t.row.pType?a("one-button",{attrs:{size:"mini",perms:"system-permissionList-add"},on:{click:function(a){return e.addPermission(t.$index,t.row)}}}):e._e(),e._v(" "),a("one-button",{attrs:{size:"mini",perms:"system-permissionList-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("one-button",{attrs:{size:"mini",type:"danger",perms:"system-permissionList-del"},on:{click:function(a){return e.deletePermission(t.$index,t.row)}}})]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:this.dialog.isInsert?"添加菜单":"编辑菜单",visible:e.dialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"名称","label-width":e.dialog.formLabelWidth,prop:"permissName"}},[a("el-input",{model:{value:e.dialog.form.permissName,callback:function(t){e.$set(e.dialog.form,"permissName",t)},expression:"dialog.form.permissName"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"权限标识","label-width":e.dialog.formLabelWidth,prop:"pValue"}},[a("el-input",{model:{value:e.dialog.form.pValue,callback:function(t){e.$set(e.dialog.form,"pValue",t)},expression:"dialog.form.pValue"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"权重","label-width":e.dialog.formLabelWidth,prop:"sort"}},[a("el-input",{model:{value:e.dialog.form.sort,callback:function(t){e.$set(e.dialog.form,"sort",t)},expression:"dialog.form.sort"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"类型","label-width":e.dialog.formLabelWidth,prop:"pType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialog.form.pType,callback:function(t){e.$set(e.dialog.form,"pType",t)},expression:"dialog.form.pType"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"上级菜单","label-width":e.dialog.formLabelWidth,prop:"upId"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialog.form.upId,callback:function(t){e.$set(e.dialog.form,"upId",t)},expression:"dialog.form.upId"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"图标","label-width":e.dialog.formLabelWidth,prop:"pIcon"}},[a("el-input",{model:{value:e.dialog.form.pIcon,callback:function(t){e.$set(e.dialog.form,"pIcon",t)},expression:"dialog.form.pIcon"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"权限级别","label-width":e.dialog.formLabelWidth,prop:"pLevel"}},[a("el-input",{model:{value:e.dialog.form.pLevel,callback:function(t){e.$set(e.dialog.form,"pLevel",t)},expression:"dialog.form.pLevel"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ta={name:"workorderChat",mounted:function(){console.log("demo1",document.getElementById("demo1"))},created:function(){this.getChatList()},data:function(){return{current:0,replyObj:{groupId:"",content:"",messageId:"",orderText:"",workOrderId:""},inputMsg:"",taleList:[],tool:{show:["file"],showEmoji:!1,callback:this.toolEvent},config:{img:a("noej"),name:"暂无",callback:this.bindCover,historyConfig:{show:!0,tip:"加载更多",callback:this.bindLoadHistory},quickList:[]},winBarConfig:{active:"",width:"240px",listHeight:"60px",height:"569px",list:[],callback:this.bindWinBar},rightConfig:{listTip:"国家选择",notice:"选择对应国家 筛选展示对应的telegram商户群",list:[{name:"印度"},{name:"哥伦比亚"},{name:"墨西哥"}]}}},methods:{loadData:function(){this.getChatList(),this.getChatDetails(this.winBarConfig.active)},getChatList:function(){var e,t=this;(e={},_({url:"/workOrder/getUndealOrder",method:"post",data:e})).then(function(e){if(0===e.data.code){var r=e.data.data;r.forEach(function(e,t){e.img=a("noej")}),t.winBarConfig.list=r,t.winBarConfig.list.length>0&&(t.winBarConfig.active=t.winBarConfig.list[0].id)}})},rightClick:function(e){console.log("rigth",e)},testdemo:function(){alert("test demo")},talkEvent:function(e){console.log("obj",e)},bindEnter:function(){var e=this.inputMsg;if(e){var t={date:this.dateFormate(),text:{text:e},mine:!0,name:"TMPay",img:a("1ei3")};this.replyObj.content=e;var r=e.indexOf("^");if(r>0){var i=e.substr(0,r),s=e.substr(r+1);t.text.text=s,t.name=i,this.replyObj.content=s}else this.replyObj.groupId=this.winBarConfig.active,this.replyObj.messageId="",this.replyObj.orderText="",this.replyObj.workOrderId="";this.taleList.push(t);var n,o=this;(n=this.replyObj,_({url:"/workOrder/replyOrder",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(n)})).then(function(e){0===e.data.code?o.$message({message:"发送成功",type:"success"}):o.$message.error("发送失败")})}},toolEvent:function(e,t){var r=this;if(console.log("tools",e,t),"file"!=e||1==t.length){var i=this;this.$confirm("回复此图片, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,s=new FormData;s.append("file",t[0],t[0].name),s.append("groupId",r.winBarConfig.active),(e=s,_({url:"/workOrder/replyImgOrder",method:"post",data:e})).then(function(e){if(0===e.data.code){i.$message({message:"发送成功",type:"success"});var t={date:i.dateFormate(),text:{text:""},mine:!0,name:"TMPay",img:a("1ei3")},r="http://13.200.37.118:8080/manage/workOrder/getReplyImg?id="+e.data.data;t.text.text="<img data-src="+r+">",i.taleList.push(t)}else i.$message.error("发送失败")})})}else this.$message.warning("只能选择一张图片")},bindLoadHistory:function(){var e=new Array(3).fill().map(function(e,t){return{date:"2020/05/20 23:19:07",text:{text:t+new Date},mine:!1,name:"JwChat",img:"image/three.jpeg"}}),t=e.concat(this.list);this.list=t,console.log("加载历史",t,e)},bindCover:function(e){console.log("header",e)},bindWinBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.data,r=void 0===a?{}:a;if(console.log(r),"winBar"===t){var i=r.id,s=(r.dept,r.name);r.img;this.winBarConfig.active=i,this.config.name=s,this.getChatDetails(i),this.replyObj={}}},getChatDetails:function(e){this.current=0;var t,r=this;(t={groupId:e},_({url:"/workOrder/getOrderDetailByGroupId",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(t)})).then(function(e){if(0===e.data.code){var t=e.data.data;r.taleList=[],t.forEach(function(e,t){var i=new Object;if(i.workOrderId=e.orderId,i.id=e.messageId,i.groupId=e.groupId,i.orderText=e.orderText,i.reply=e.reply,i.text={text:""},"1"==e.mine)if(i.mine=!0,e.orderText?i.date="回复:"+e.orderText+" -- "+e.createTime:i.date=e.nickname+" -- "+e.createTime,i.img=a("1ei3"),"reply_img"==e.orderId){var s="http://13.200.37.118:8080/manage/workOrder/getReplyImg?id="+e.reply;i.text.text="<img data-src="+s+">"}else i.text.text="<p>"+e.reply+"</p>";else i.mine=!1,i.date=e.nickname+" -- "+e.createTime,i.img=a("noej"),"chat"==e.orderId?("1"==e.orderText&&(i.text.text="<p id="+e.messageId+' style="cursor:default;">'+e.reply+"</p>"),"2"==e.orderText&&(i.text.text="<p id="+e.messageId+' style="cursor:pointer;color:#409eff">图片(点击查看)</p>')):"2"!=e.status?i.text.text="<p id="+e.messageId+' class="undelOrder" style="cursor: pointer;color: red">'+e.orderText+"</p>":i.text.text="<p id="+e.messageId+' style="cursor: pointer;color: green">'+e.orderText+"</p>";r.taleList.push(i)}),r.$nextTick(function(){r.taleList.forEach(function(e,t){if(!e.mine&&"chat"!=e.workOrderId){var a=e.id;document.getElementById(a).onclick=function(){r.queryReplyDetail(e)}}if(!e.mine&&"chat"==e.workOrderId&&"2"==e.orderText){var i=e.id;document.getElementById(i).onclick=function(){r.loadImg(e)}}});var e=document.createElement("div");e.id="newUpId",e.className="upBtn",e.innerText="",e.onclick=function(){var e=document.getElementsByClassName("undelOrder"),t=(e.length,0);r.current>0?(t=e[r.current].parentNode.parentNode.parentNode.parentNode.offsetTop,r.current--):(r.current=0,t=e[0].parentNode.parentNode.parentNode.parentNode.offsetTop),document.getElementsByClassName("web__main")[0].style.transform="translateX(0px) translateY(-"+t+"px) translateZ(1px)"};var t=document.createElement("div");t.id="newDownId",t.className="downBtn2",t.innerText="",t.onclick=function(){var e=document.getElementsByClassName("undelOrder"),t=e.length,a=0;r.current<t?(a=e[r.current].parentNode.parentNode.parentNode.parentNode.offsetTop,r.current++):(r.current=0,a=e[0].parentNode.parentNode.parentNode.parentNode.offsetTop),document.getElementsByClassName("web__main")[0].style.transform="translateX(0px) translateY(-"+a+"px) translateZ(1px)"};var a=document.getElementsByClassName("wrapper");a[0].appendChild(e),a[0].appendChild(t)})}})},queryReplyDetail:function(e){console.log("queryReplyDetail:",e),this.inputMsg="回复："+e.orderText+"^",this.replyObj.groupId=e.groupId,this.replyObj.messageId=e.id,this.replyObj.orderText=e.orderText,this.replyObj.workOrderId=e.workOrderId},loadImg:function(e){var t,a=this;(t=e.reply,_({url:"https://api.telegram.org/bot5302362125:AAE7TkE4Yr-cDJBI004OMviQvTU0y71NNhM/getFile?file_id="+t,method:"get"})).then(function(t){console.log(t);var r=t.data;if(r.ok){var i="https://api.telegram.org/file/bot5302362125:AAE7TkE4Yr-cDJBI004OMviQvTU0y71NNhM/"+r.result.file_path;a.taleList.forEach(function(t,a){t.id==e.id&&(t.text.text="<img data-src="+i+">")})}else a.$message.error("加载图片失败")})},dateFormate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var i=e.getHours();i=i<10?"0"+i:i;var s=e.getMinutes();s=s<10?"0"+s:s;var n=e.getSeconds();return t+"-"+a+"-"+r+" "+i+":"+s+":"+(n=n<10?"0"+n:n)}}},aa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._m(0),e._v(" "),a("div",{staticStyle:{height:"100px",width:"100px",position:"absolute",right:"0px",top:"75%","text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("刷新")])],1),e._v(" "),a("JwChat-index",{attrs:{config:e.config,showRightBox:!1,scrollType:"scroll",taleList:e.taleList,toolConfig:e.tool,winBarConfig:e.winBarConfig},on:{enter:e.bindEnter,clickTalk:e.talkEvent,click:e.testdemo},model:{value:e.inputMsg,callback:function(t){e.inputMsg=t},expression:"inputMsg"}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"260px",position:"absolute",right:"0px",top:"0px",border:"1px dashed rgb(217, 217, 217)"}},[a("div",{staticStyle:{"font-size":"14px",color:"#409eff"}},[e._v("说明: ")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("1. 工单是指商户群商户发出的查单，补单指令;")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("2. 机器人露娜会收集所有商户群的工单信息;")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("3. 红色数字代表未处理的工单信息数量,即对应的代收订单还未达成完成状态;")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("4. 工单指令信息显示绿色代表完成，红色未完成;")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("5. 选择对应商户群，输入回复消息等同于在飞机群回复")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("6. 点击对应工单，输入回复消息等同于在飞机群引用工单信息回复"),a("span",{staticStyle:{color:"red"}},[e._v("(注意：引用回复时，聊天框里的回复前缀不能删除)")]),e._v("；")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","font-size":"12px"}},[e._v("7. 点击右侧刷新按钮可更新实时工单信息及状态")])])}]};var ra={el:"#app",name:"index",components:{Home:J,PayLogList:ce,WithdrawLogList:he,OperaLogList:ye,MoneyLogList:Fe,CpInfoList:$e,AgentList:Pe,PayTypeList:We,WithdrawTypeList:Me,CpInfoTotalStatistics:Ue,CpInfoDailyStatistics:Ge,UserList:Ye,RoleList:tt,ChannelTotalStatistics:it,ChannelDailyStatistics:ot,ChannelList:pt,SettlementSettingList:gt,blackList:bt,AlquimiaPayLogList:_t,settlementLogList:kt,rechargeList:St,massMsg:zt,massMsgTwo:Bt,massMsgWithOutUser:Et,questionRecord:Ht,bankRecordList:ut,commandList:Kt,keywordsList:a("VU/8")(Yt,Zt,!1,function(e){a("rDvn")},"data-v-33036ab8",null).exports,permissionList:a("VU/8")(Jt,ea,!1,function(e){a("0j0q")},"data-v-02c3a6df",null).exports,cButton:ne,workorderChat:a("VU/8")(ta,aa,!1,function(e){a("obYe")},"data-v-e701f886",null).exports,cSwitch:De},created:function(){this.editableTabs=[],this.addTabs({id:1,permissName:"首页",pValue:"home"}),this.getPlatformSettings()},data:function(){return{fullscreenLoading:!0,PlatformName:"",platformImg:a("cejX"),iframeSrc:"./homeNew.html",isCollapse:!1,iframe:[],clientHeight:0,asideWidth:"12rem",tabsValues:"1",editableTabs:[],tabIndex:2,heightClass:{height:"937px"}}},watch:{clientHeight:function(){this.changeFixed(this.clientHeight)},editableTabs:{handler:function(e,t){1===e.length&&"home"===e[0].name&&(this.tabsValues="home")},deep:!0,immediate:!0}},mounted:function(){var e,t=this;_({url:"/permission/getMenuList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(function(e){var a=e.data.data;0===e.data.code&&(window.sessionStorage.setItem("permissionList",g()(a)),t.iframe=a)}),t.clientHeight=""+document.documentElement.clientHeight,t.$refs.elmain.$el.style.height=t.clientHeight+"px",t.$refs.elaside.$el.style.height=t.clientHeight+"px",window.onresize=function(){t.clientHeight=""+document.documentElement.clientHeight}},methods:{changeFixed:function(e){this.$refs.elaside.$el.style.height=e+"px",this.heightClass={height:e+"px"}},ShowNavMenu:function(){this.isCollapse=!this.isCollapse},getPlatformImg:function(){this.PlatformName=""},getIframeSrc:function(e){this.iframeSrc=e},checkoutLogin:function(){var e,t=this;_({url:"/user/logout",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)}).then(function(e){0===e.data.code&&(localStorage.removeItem("Authorization"),t.$router.push("/"))})},handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:""}),this.tabsValues=a}if("remove"===t){var r=this.editableTabs,i=this.tabsValues;i===e&&r.forEach(function(t,a){if(t.name===e){var s=r[a+1]||r[a-1];s&&(i=s.name)}}),this.tabsValues=i,this.editableTabs=r.filter(function(t){return t.name!==e})}},addTabs:function(e){var t=this,a=(e.pIcon,e.permissName),r=e.pValue;if(null!=r){var i=!0,s=!1,n=void 0;try{for(var o,l=f()(this.editableTabs);!(i=(o=l.next()).done);i=!0){if(o.value.name===r)return void(this.tabsValues=r)}}catch(e){s=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw n}}this.editableTabs.push(function(e,t,a,r){return{title:e,name:t,content:a,show:r}}(a,r,r,!0))}this.$nextTick(function(){t.tabsValues=r})},isClosable:function(e){return"home"!==e.name},getPlatformSettings:function(){var e=this;_({url:"/platformSettings/getSettings",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e.PlatformName=t.data.data.platformName})}}},ia={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"app",style:e.heightClass,attrs:{id:"app"}},[r("transition",{attrs:{name:"el-fade-in-linear"}},[r("el-container",[r("el-aside",{ref:"elaside",attrs:{width:e.asideWidth}},[r("el-scrollbar",{staticStyle:{width:"100%",height:"100%","overflow-x":"hidden"}},[e.isCollapse?e._e():r("div",{staticClass:"top-info"},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"top-info__image"},[r("img",{staticStyle:{width:"5rem"},attrs:{src:a("cejX"),alt:""}})])])],1)],1),e._v(" "),r("el-menu",{attrs:{"collapse-transition":!1,"default-active":"1",collapse:e.isCollapse}},[r("el-menu-item",{attrs:{index:"0"},on:{click:function(t){return e.getIframeSrc("./homeNew.html")}}},[r("i",{staticClass:"el-icon-menu"}),e._v(" "),r("span",{attrs:{slot:"title"},on:{click:function(t){return e.addTabs({id:1,permissName:"首页",pValue:"home"})}},slot:"title"},[e._v("首页")])]),e._v(" "),e._l(e.iframe,function(t){return r("el-submenu",{key:t.id,staticClass:"submenu-hover",attrs:{index:t.permissName}},[r("template",{slot:"title"},[r("i",{class:t.pIcon,attrs:{slot:"title"},slot:"title"}),e._v(" "),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.permissName))])]),e._v(" "),r("el-menu-item-group",e._l(t.children,function(t){return r("el-menu-item",{key:t.id,attrs:{index:t.permissName},on:{click:function(a){return e.addTabs(t)}}},[e._v("\n                  "+e._s(t.permissName)+"\n                ")])}),1)],2)})],2)],1)],1),e._v(" "),r("el-container",[r("el-header",[r("div",{staticClass:"page-nav-header"},[r("div",{staticClass:"header__left",on:{click:e.ShowNavMenu}},[e.isCollapse?r("i",{staticClass:"el-icon-s-unfold",on:{click:function(t){e.asideWidth="12rem"}}}):r("i",{staticClass:"el-icon-s-fold",on:{click:function(t){e.asideWidth="4rem"}}})]),e._v(" "),r("div",{staticClass:"toolbar"},[r("el-dropdown",{scopedSlots:e._u([{key:"dropdown",fn:function(){return[r("el-dropdown-menu",[r("el-dropdown-item",[e._v("View")]),e._v(" "),r("el-dropdown-item",[e._v("Add")]),e._v(" "),r("el-dropdown-item",[e._v("Delete")])],1)]},proxy:!0}])},[r("el-icon",{staticStyle:{"margin-right":"8px","margin-top":"1px"}},[r("setting")],1)],1),e._v(" "),r("el-link",{staticStyle:{"margin-left":"10px"},on:{click:e.checkoutLogin}},[e._v("退出登录")])],1)])]),e._v(" "),r("el-main",{ref:"elmain",staticClass:"el-main",staticStyle:{"padding-bottom":"40px"}},[r("el-row",[r("el-tabs",{attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit},model:{value:e.tabsValues,callback:function(t){e.tabsValues=t},expression:"tabsValues"}},e._l(e.editableTabs,function(e){return r("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[r(e.content,{tag:"component"})],1)}),1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var sa=a("VU/8")(ra,ia,!1,function(e){a("7cQ7"),a("nChT")},"data-v-2e2632a8",null).exports,na={el:"#app",name:"login",created:function(){},data:function(){return{loginForm:{userName:"",password:"",googleCode:""},bg:a("5XRo")}},methods:{login:function(){var e,t=this;(e=t.loginForm,_({url:"/user/login",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify(e)})).then(function(e){var a=e.data.msg,r=e.data.data;t.$message(a),0===e.data.code&&(localStorage.setItem("User_Authorization",r.token),t.$router.push("/index"))})}}},oa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%"},style:{backgroundImage:"url("+e.bg+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},attrs:{id:"app"}},[a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-row",{staticClass:"row-bg",attrs:{justify:"center"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-light login-panel"},[a("el-form",{ref:"loginForm",staticStyle:{"padding-top":"15%","padding-left":"20%","padding-right":"20%"},attrs:{model:e.loginForm}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入用户名"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{type:"password",placeholder:"请输入用户密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请输入谷歌秘钥"},model:{value:e.loginForm.googleCode,callback:function(t){e.$set(e.loginForm,"googleCode",t)},expression:"loginForm.googleCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"36%",height:"32px","line-height":"32px",padding:"0"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)])],1)],1)],1)},staticRenderFns:[]};var la=a("VU/8")(na,oa,!1,function(e){a("K8xC")},"data-v-33e3680f",null).exports;r.default.use(m.a);var ca=[{path:"/",name:"home",redirect:"/login"},{path:"/login",name:"Login",component:la},{path:"/index",name:"Index",component:sa}],ua=new m.a({mode:"hash",routes:ca});ua.beforeEach(function(e,t,a){if("/login"===e.path)a();else{var r=localStorage.getItem("Authorization");"null"===r||""===r?a("/login"):a()}});var da=ua,ma=a("cdDs"),pa=a.n(ma);r.default.use(o.a),r.default.config.productionTip=!0,r.default.use(pa.a),new r.default({el:"#app",router:da,render:function(e){return e(s)}})},OPo5:function(e,t){},Qd8e:function(e,t){},Qz60:function(e,t){},SzPP:function(e,t){},UcMm:function(e,t){},Vls3:function(e,t){},XRBa:function(e,t){},"Z+Ma":function(e,t){},ZfIx:function(e,t){},Zjol:function(e,t){},cQqO:function(e,t){},cejX:function(e,t,a){e.exports=a.p+"static/img/top1.3a1e30d.png"},e2xi:function(e,t){},luBi:function(e,t){},mnZh:function(e,t){},n4oI:function(e,t){},nChT:function(e,t){},nbWc:function(e,t){},noej:function(e,t){e.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAH9FJREFUeNrtnXl0XFed5z/3vqWqVNrlRZZly7ud2I6dOLazkNUZmyxAoAOHkDRME5Z0N3SYGfow3T3dc7qZgTkHTsPQZ/qQwAwwLCGBHgIkkA4k6ex74sQ4ju1YtrzI2qytpNreu/fOH6+qtEtVUmmxrd85Oj6y6r267/f7/vbfvU8wjIwxEqgHdgPXA1cCi4Aw83Q2URJoA54DngAeA04KIfTgD4lRAHAn8FngMsCe5+M5QT7wInCvEOJHowLAGLMQ+GvgC/P8Oqfpm8BXhBDtDNPwvwLunufPOU93Awb4jwAi4/M/BvxwnjfnFf0x8JNswPfZeX6cd/RZoF4SRPuXzfPjvKPLgN0S2MV8tH8+kg3sEsaYY0DDPD/OSzoujDFJIDTPi/OSUsIYY+b5cP6SnGfBPADmaR4A83S+0nmX/ilt8JUh5QdNMV9pbEtiSXBtiWOdXzpxzgLAGDjTG+cPx7s5caaf1s5euuOaPhElpQRpX4+4xrUlC6OS8pIQdRUWS2uiXLCklJpSB0uKc5JP50QWYAy09CRpau/jVFsPpzritMWSVJZINtZX07AwyuKqEgBePtTOs/ta+UOzorVPo7VL0BQ1GG0wBOxQmXv7lqEkItnUUMYFS6JsX1XOkoowDTVhQs7Zby3OagAobXj2cBfPHO7hraY+jh/vZnu95AOX17O5oQy0QkqBlBLbDoydlAKNRVNLN3ubYvz0mVO0xWykHQGjwYDJ/DsEZBiUENhhQW2Vy+olYS5fW82NmxdQHjl7DelZB4D+lM/h1n4efquTJ97soL3Hw/ElloC00vQnUlimnyvWV3L9xmq2r62kNBwIyHUEjmMjpYVtWwgh8ZThlYPt/PipExxpNySVC4A2BmHMCCAMAAI8oXDDNpeur+CD2xaxeWmUJZVn1+DUWQMAT2neauriu8+2cfBEH12dPvbIgSaUgbSvSHs+RqW4dGWImy5eyHWbF+Q+4zoC13WxLIllBeDoTihePdTBtx9tpL0/hBBOIGitRgXB4P9SAuywYM0Sl1t31J1VVmHOA6A34fNiYw/f/bdmDp/ow/YmDsaMAGECi5BIeSQSCS5ZZnHblUu5ckMVji0QQuLYAte1sW07BwRPGX750gn+5YUOmnsIgGA0xhAEG+MAgYxVKC11+dQNdVy7oZqVC0vmATBZOtQS5xuPNfHWkRipfo2YxEqNMXja5FzDrdsq+chVDSwqDzTctiWuE4Ag6xaEFOw/3sODTzXxxDtppBUCrUYFwVhL0rZi6aIS7tpVz42bFszZgHHOAcAYONmV4DtPHue3r3cFs61TvyvGQNLXxOIJKu0kn3/fCt6zoZpoSGJZAtcJhG/bNo7jIKRACsHDr57k50+f5N0zNkLYGG3yBkHWIqxdFuWv3r+cTcuq5hwQ5hwAHtt/JjD3jX2j+vgRD5A3BILoXhlDf9JHqBi3bqvkz25ZjzQK17GwrMA1SBnECNKyAGjuTHH/k0f47Rs9pEUEgcRonQPCRAw0xlCxwOGmSxZyz+7lc6rYNGcAcKIzwQ+eb+GBp08TVhMzaLJlGWMMWmsSviLWF+fT11Rx53XLcR2LkCuRcuC7h1uD1u4U9z78Nq+e8OnsEwhhBysxhiwbx2OnJxQXrizhnj3LuWztgnkADBb+3/zsMPuO9k8Y5Ikx/0OMo/tD1dQYgzaaWNKnOuLxtTtXsWJRCSHXwspofZakFEF84AQxQ9rTHD4d4/kDbTz6ejutPQJpuwjpgjFoMi5CBMBAG4QQATCMQWGoWuDyn29dxa4Lqme9wjirADAGfrm3jW/9poneLjVukDe64AtlnhmEh8ASSOJ8+SMruGhFOY5tDbEAowEhmy1YGTPe2BZn78HTvHy4h3jK0O1puvvhTK8GIRFCZDKJDDi0AQza1tyycyFfumU10dDspYyzBgClDb9+s52vPXSMdJ+eZsEPvn7gWuX1s2OZ4J5b11FV6uRigInIsqxcDSHrHpTSJNKKzr40Z7r76ehJ0ZlQHDnVx8uHemjt00jLDTIKA9poPBQfuGIhX9izkupS9/wBQMrT/NPvj/PAsy3jRvmiWILPXpsRvtFp6qsU25dH+Pj1DTi2QEoxGBsF4EnmQCFEcJ/g9wFwAJzp8zjY1MXv3zhFc7fPkXZDPG3QtmTT6nK+fvsGFpXPPAhmHAApT/OTF5v550dP5i/8YZpbkLZnrzMa5cW5dEWIKzfVcFF9KUtqIlhCF5+pGVAEfQgLKUUOEEYbuhOKg01d7DvRzc+fbaHfs7lq+2K+dPOqGS8lzygAlDZ841+bJtT8IQAoRPOHaTpGE7bSLF9sc9WqKNdvq6e2wiGd9oKGzwyTZVlDAAEM9CKePkooHOG/fmzLjIJgxgCQDfj++88b8xd+IZo/TPjS72HrmjI+cOkiLlxaSkXURSk1K4LX2uRqR0JkY4ggjpBSIoQk1p/glUOdHG3p4/Yb1rGgYmZKyDMGgAdebuFbjxwfN+CblOaLob69rgK2Lg9z566VLCqz8X1/VoQ+GPi+0ijFiHVkK5CO4+ZihxMdCZ7dd5w79mydkexgRgBwtD3OXfftJ9ap8lPkfACQtQxCgNGU2P3cdEkN7926kKXV4QzzCxd8kK6PZImcZL7enzLsO9ZDS3eSaEhSXx1maXUE17Fy6xNCEi1xcjML+5u6OXS8k9v3bJ72quG0A+Boe5wvPXiExqP9EzZz8hc+ICTGKOrKFVduKOUT1y7DtQW+r/JemzEGYzTaBIUapQYWqLUeBoCgZyAzBkdKa0LDpJThE998nSNngmdRSmGbNADLF4a4oL6MHWurWLEoAEU0YhMOh5BS8NwfWgB47+VrpxUA025jvvf0iaCNa4pU8coUahzdxw2by/ngzmW5aN738xe80gPlW6X0MOFJBteDlDZ4flA4MggsKbAshW0FhZ7RyHFc2mJJ2uIWFRVloDTGGHwT3O9Yd5qmrn4e2dvLgqhmW0OUq7cs4vottYRdm4vX1PDLFxppPtNHXU3p2WcBsoWev73/3bxq+0MtgBjD5BvCVpotSyV/estaFpfbIzR1Im032WIcoLWgtSdFe0+SprYErZ0JTvUoehMevtJEbEFF1GHFghCr60qprYlSW25n1moyo2YSe5iZllISiUToiHnc+pWXsUMV6CHoHOgoKq3xtCGWSKN9n/WL4aNX17P70uVEQ5LvPXGQf7/rgmkLCqcNAEfb4/zljw/SdCJVoPCHmf9MkGeMYmFJnD/bvZzNKyqIhgT5rDwr+KySCyFIK8FrB9t46XAX77Sk6YgJYimNEDYqY6myIEl7CmE8XNtnSZnk6g1V3LyzjppSG5GpKzuOhWNbIwAgpOCT33iJdztDoIfHFtmytMmAMgBCMq3QfpJrLizj49cFe3aTvs+NO1aePQAwBv7DT97mqdd78mrpjgoAkdUzTamb5v0XlfKh9yyjxM1jImiYbwdo6/E51hrj8bfO8MaRbnpVBMuNYEmJzEwFD6GsixDBX5Tvk1KG/mSakO7nT/cs47oti6kqETkQDHYJ0WgUgJfe6eAf/uUosXQIMcjtDO5LDF43GFJKk0wrUqkUn7xuIclkgntu2zotrmBaALD3eA9/8s9v5zW+Nar5z2q9TrOmxueOq5eybXV5Xp2zwWZeCEFTR4on3mjhpcYYrT2atAojXQcp5MBgx2gsGN7rz1mSoIuo/STvWRvhrz+8DtcSWNLgOjLXTQyFQjiOg6cM9z56mAdfjIGwB0wL4wycGoOPwPN9bOGzqCTNDZcv5y/ff0HRu4dFB0Bbb5ov3v8OBw71U0jtPmf5pQVGE3VT7LqwlLt21Rcs+N644pXD3Tyxv5PXD3dDuJqQ6wwINj/fMRQAg4GgFXFfE+uLc+06my/cup6qiMCyJCHXyhR3BOFwCMuyMUbzqW+9OtIVjLEOMwggJuO2ykt8vnzHOt5zYW1RAVD0JPP5I90cOB6feExmVO0PllNi93PP7kX88bXLkHkMAmodmPuUkvz65Va+8rNDfPPRVvY2W4TKFxNy7ExvXucn/EGLGq0nISyLiGNRUVbCc0c8vv/4cRzHRimN52eDTUM67WUukXxmzypK3fSYWcOoCxAi9/mufsGDL5wqugsoahqY8jT/+/GTmKQpvG8nBVoluWqtw53XrKWuOoQUesz2bLaIoo2gPaZ4/PUW/nVvOy2JElw3iuWCZUxus0dxKdhsErZBR6I89FqMTcvb+HdbFuJ5PmDjOkH1L51O47ouOzcs4KM7uvjuMzGkzD97yZIlLJ7Y181rjWfYtqpmblqApw51cawtWdD0rgiqKkgVY9d6yWd3N7C02s1pfqBNI3+0EWgj+NVLLXz5gYP8+KU+Ov0qXCc0VNunrcwVzA6ELEEoFOKHT56gsbUfAM/zM/V/TTqdRqkgBbztmlUsjKYwYnKLsnH5xfONpLzilbaLBoDOvjQ/evYUYb8Avy+CaL/E7uPPd9fxuZvXUBm1Juz/pD3D7/d2cPe9f+C+J3tp6i1FWuGsacjfzI9HIyfJRnsAbMuiLGxzoi/E1x86QlrLzBp1DgSpVJAKR1yLz9+8kojljTl5NK4VQPLcgQRvHOucewDYd6qPI835z3ALGWh+id3PXdfUsmtLTWYiZzx+S06eSfOPvz7Kt3/fyqm+KJYbGhD6bAw3CRmAIOKy/7Tht6+2gLBQSpOtSiul8LwgHtixbiHbGmy0oIB4YJCixQz/tr9t7gHg4ddaiPep0dVo8P8IEFKitUe11cmXP7yCXVtqEBjG6nsIIenqUzzwzCnu/s47PHNE4MlSpKGwwK5Q9S8ABCFLUlZawvefbGZvY6ChWVcA5FxBxLX43AcuJGTiYBUOAFtaPPT8afpTflGetCgA6E/5PH2wFysPvkkhMWiWliT4wvuDaVyMykzOMuJHSosTHUm+8rND/PjlGMKpDBoxevZavKODVBCyBDHP4gdPNoOw0FrnXIFSKpcVLKl0ufHiCoz2JzHpJIgnBM++3TJ3APC7tztJ900c+QspMMajLhzj7++4kI3LyrCt0TtrQkBKSe597Dh/8X/e5Z3OKNqEBwK86aR8/P8oVsqSkpKSKK+fUPzihVNIKQNXkOkDeJ6XCwg/dEU9y6o10pIFjzo6lssjr7cWJRicMgBSnua5Ax2ja78ZLHyJwVAXifP5W1ZSU2phST2qHxQCWnsV/+s3R3notT48ES08j5+q9CdpBVwpCYVC/OKlVk51Ba1fzx8o/mTH0RoWRbl+QznG+AgKtwJNzUlOtsdmHwBNZ5K8kwn+RsWAAJPR/Bq7h7+7fQPrl5ZmhC8zdfuBH23glXdjfO6+/TxxyAyN7meCzFQuCqaCy8I2Td0W33nsOMAgVxAEg0GtAD62aw1RJ5VnLDB0YSfPpNnf1DX7ADjdk6Qlg/TRv0AghWRBKMXd721gUZnICX842bbNr19u5esPHydBWaZJM4PCH8TkyX6jEAJLCCKRCC8e6uHt5mTOFQSPYvA8D601EdfifTsXTSoW8LXk5SPtsw+AVxp78ZNmNCsVdNKEIWy6ueeWZVy8snyMVr+gJ6752kON3PdkL3G/NCgmzWhqZybl+0deEKS3UVeinXJ+8Luj9CZ8tNYkU0ERy/d9lNIo5XPjlkUsq9aQ6XeYPC2TLS2e3R+bMnumDIC3jveOsU6BkBaW6uPDly3kgqVRpNC5Aki2oidEUMP/nw8d4okDSSzHHajgzWReX9SvCqxA2LV4qznFW8d6gEzPQutchRBgaXWYi+tCQQO0oE6foL0nSXssPXsASHmafUf7RwaAQiCkwE/38uHtldx8yQKk0Ln9dLkvlxbHOtJ88Xt/4NXTTuDvjRk6OJHpkU+v5k/B9I8FUiFxpCCpw9z32En8TNslkwmilEIpjZSCO/ZsAD+GkGONmI3+HZYV4o0jUysKTQkAzd1JfD364rT22LTE5uYddUihEGJAA7QOYoDufsVXH3iHo11O5vAFPfr26mmW/7SQCBpGZRGXpm6Lp/c356xA1vxnq4O1FTaXNESDI+pEIV9hc/D41ALBKQHgzZN9yGEDlUiBwbCyLMGndy/HlXrElmvbdth/KsWXvr+f5mQZUjrByRvD5GJGaFoxpTVS84uh/WaIgIIKYSgU4sHnOjjd4wejX5kiXiqVROtg2PR92xdhSW/0lHCMhdnS5u1TcTw1+XrAlADQ0hlHajHogYMedjoV4/ar61ha5eLYQwNcy7Jpiyn+6ZeHaE6UIJDocXy9GfHLVIGQud7MjIFBCKIhSWOHYe/RXqSQ+MrPYSdbJFrfUE3DAoEpcOKnL6WJJSZfFp4SAI60xrGGp3MqxW3bKti6siJn+nNfJiXvno7zt/93P6eT5QjhYPTEhz+ZUU1DoUAYJPhiCD+PE8OySmFLC2mH+eFTp3KxQFAcCnoEWhtqKxy21IYQmGFxwPgr7I97dPUmZh4AKU/TN7j1KwVGwMryFDdtW5jR9qGmP+0LvvWrIzQnghFnU0BJ14wFhCGdwGE/QxoLIwU/ec0vqEgcjIe5Fqd7LV453B1ovgq2rCnl56zATdvr0F4ilxLmJYe0T3o2XEDK1/QnvKGPqmLctWcFlVEb29JDFKUzIfm7nxzkWF/JwGlbkzfg4/9xnA9NPZIwEx4cOYoZwJHB4MivXjxFPB1sGE17AX+CwpBh9dJyVi0Yuqt9osXG09CTVJN+mkkDoD/l50qaQgiMn+A960pZsyiEbZkhlT7bdvje75t4u01mzP7Uva7JQ975fKYYyj/xfYO6gOtYvN3m0dgSTA7pzFib73uZw6sMV21egFFp8k0Hksrge7MQA/ja4PkiMP1SUF9l+NDOxcFNpRg0uiW5/6lTPHPYQ1phTLBNdlry+6ILe4Tm5+f3R71WCMKWpC/t8us3uoJDqzNtYq01nheAYMfqSsoiBG4gj0KY8jT+bGUBEBzJ6qWS3LCpmsXlEntQVUhKyRtHe/nl3u5ckWcS3JsbNNXEg2DaKeQ4vH64m3imgJcdDs3GAUuqwqyolnn3BpQWuZdfzKwFyOyk9bViRUWaG7dW5/6mdeACWnsN//jwCfr9EoxSowd9017pmx7NzxsTg64VQhBxoDNp8/ibHQCkffB9lekPKCqiLmsXZbIBOf0HSk76G+xMC1OaNDdduhhfKWw58LCptOZHT50kQRkms4su30bH2aD5k12yFEFhaO/RbpK+QCuVwclAn+DyjbVBNjADRwhOHgCZVGVjrWDbylJsOdDosSyLB59v5emDyUABBvkoM66mzCUkTFHzR70+ODUs7Fq82aw51p7MWQGtTa4yeFFDFEvH83IDljSE7MlbiklfaUmJ5fVzw0VVlIYzO2ozJv5Ye5pH3uxD2JHCGGjmijkwU9f8MT8YTA31JRRHmvsCvmUCQd8PzjCyLIvVS0rzGn2znJHb02cEAGFHUhX2uGJ9FVqpnPZ3xw33PdpISmT2s+sCtcjMpjUw424mMYXcZyzxiyAYlHaY3+7tQFoWalCTLJsZXH5hNeBPODoetgSRsDPzAIi4waW+GihCSCl55kA3jZ3WuMLPi6EzCgQz4S6igoQ/0YczNYHj7Sna+7KnlAR89P1gWmh5ZX5CLXGhxJkFC2BLyYKq0twDSCnp6FX88KlTpEUElMqXXQUAocjdwDwFX0zhZ71cyBKkZJQXDpzGkhKlZcYN+GitqK2JUlM+cToYcm0qSmbBAgBUlUZo705gSY2vBD97oRnjVIMuptEcJokRdf/JCNzkdXlhcCtgH6IAKQQhx2FfUwKlg3MHgEx72FAZsagOKXKnUo1BlRFNacnkD5acEgA2NVTy7uluhOXyytE+nj3sASLzMgUKDuoKEukUm0FFW0cBwh88LmcQuLbgcAec7EqjlcpVBZXyKQ3bVLpmXOFro6mrCE/pBVVTAsCFDTU0dqYJuS7/78VW0jo08my+SUT2kzb2U6wFT+6yQoWfMwI4tsWZPk17b+Aug3QwOOjCtgzVleHcOUSjkdIeK2undmzMpAEgBNRXRUh5gl+90kZjBxgpx+7KTI61MxUCMune5CSEn0VAlvn7T8SQlpUrCgWWQLGytjTTGBr9nkol2bp24ewAIEuVkRA/e7EdaYUReqJoamot4GIBoij3M1MQfhYBxmCEwzsnE1iZNDrrBrTW1FeHMFqNmwpe0DC1wyKmBAAh4KJNy+jRkcxe+HzP3plyRz5vIRa/JZz/XoV8kuCwa3HgVJy4NxIAtVUleL43YkAkKK76bFpZPuXzhKdsAS6oDVPh5Pf2rKHPPr2t4OlrCRfwiHl8wLYEvnBp743n/hSAwFAelgg/PbBDaoge+exYWznlJ5oyAFYtLmdpfTT/Bx8isbneCRym9UUT/qC9hEaghMO+pp6c8CEIBsOuIeSK3ODI4HuXOIad66b+5rEpA6Cm1GHtkmjwQqRCQTAECHNV9oWdM2Qm8YmQ43C0xcsBYLAbqI7ao6aCy6otVi2e+sGRUwaAJQUf2l6LZ5IFMmI0Rs8VizC5I2fyEv6wDwkRuIGOmEcq7aH0wMnivq9YVBECE2wezV6qtM/29dVFOTm0KBMHG5eWsbQyNMQKTAoEQyzCTIMhv9JwMYWfgQBSWnQlFGeSA4EgBG4gEh75Iinf72fXtvqiPHVRAOBYkg9eVT/qCxqmXtSZob2B01o8Gh9UlhR0Jm0SaZEbnci6gZJQptWOyWn/hXWRop0VWLSZo8vWVrG4UkyRURNYhfHKvhMjiZHl4cmfI5j38+TxHZbRxBKavqQ/xAIAweHYZmDzjNEp3ndZXdHgXzQAbK4vZ+fmhSPcQOGmslALMQZAhvcAimhIJj8RNDplt4WfiQ0IPhsM2nbQ6csWg9bXOly7ecncA8BYwWDRrcEsUsHNqkLuLRxi8UwmMCgQdOwBq+qrFDsvLGfpwrK5BwCArcsruHHHEnzlFZ+hZ43gJ3GqiQnmKdr7AhegVXqIGwg+oyl143zmxi1FPTK+6HPHt2yrpbpMFBS8zUbMX/w1TeE4m4x57+kfqjhKKaQOgOCpFLdetmxKrd8ZAcAVayrZs30BCj2zreDZ0PYhwp/a99qWGAKA7OERWdpYZ3Pn9auL/rxFB4BjST5x7SrCbnqAMWZSIxYzYhmm9j1TyyRyBoDguJz+dGYuwBvIBlJakk4nue3qepZUF/+VMdOy9WRJZZi/uHUdQuphnJ5S533KoChes6g4gs/dLeM6ehNqxHnJyWSCK9Y7/NGVqyf1/uxZAQDAey9azKVrQoErGCGFojVmC/opir2YhncQGIIsKpUeeuPs+Qp37rpgusQ0fQCoLnX5m49eRGXEY8w91edoN7BQ4WcpkVaDN1HxwtEkW1dXF/09QTMCAIBl1RHu2rNsqCsYCwhzdWvYNL51ZLzbdqTCnGzr4v1XrZvWp5z27acfuXI1t19dTYpkfhyZVTBMv9BzjznO3x23hBfeOc2n3rdz2t8gPu0ACDmST+/ZwNaGkiGDDQWBwUzjVKCZGaHno/UA0i3l4b2t3HTZBpYtKp/29Uz/BnSgPGLz5Tu3sHGFXRgIxpDZ+E2hMX7G6g/MnG3J6+ue2Heayzcs4bJNy6Yl6p8VAACsXFjC39y2gYoSb/IgmBAYzNRwYFG1XmCQJqgBLFtcxdXbN8zY2qbt5dFj0WuNZ/hv9+/nWFtwjPy5TvkIXxuDY3r5zJ4GPnXzphld34xLYOuKav7L7RsJhdLFtQRzUPBmAsFnhR9P9PCZPQ3cfsOGGV/njFuALO093sNXH9jHoZPmnLIE+TBTZF4Zr4wi6sS4+8a1fPyG9bOy3lkDgDHQeLqHL37vTRpbDba0OZsp/43BA8InHeN/fHIj11/cQMiZHSWYNQBkqa03zbd+9Sa/eaUHIcLMyMlIsyh4g0Fpj411Fv/pjzZw6brFs7r+WQcABKeOfvu37/DTp06jTeSsAEEhgoeBUYGU18uONSX8/R2XsGxR+YykenMeAFnKZgjH2xXgnrVCH03wvk5RGdZ8+uYVfOTK1bNm8uc0AACOt/by06eP8oMnT+E6ZbMeIE6GOVlzH1xvUCrB1nqXT968jms21c261s9pAGTpxcMdfP93R3j5YAxDaEaBMFmhD9b4rOBXLrS5bWctH9t9QVFn+c55AEDwSvpHXm3i/idPcLLT4FghihUfFOuhhwsewNdpwiLB7h2L+JPr17GitnxOCn/OAyBLntLc/+RhHnmjncMnkyjjYM1y2jiWxtfX2Fyytow/v2UzSyrDs826cwMAWUa39CR5fv8pHn7xNC8f6cW2ozMKhNG03WBIezGWlEluvLyem7YtZVVtxZwJ8s4ZAAynAye6+M1rp3j1wBmOdvnEE8Fr1IoNiFE1XaexpaG2UrK5zuX6HSu4YcvSOWvmz0kAZKn5TB+NrX28dKiDVw+c4a0Twds4bDuKLS1MATHD4BO5BnNFGYXv9+P7mmVVNpesqea6LQtZsaSSNXUVONbZW8o+6wEwnHoTPm8d7eD1w+0cbe6jpTtNPK3oSUIypYmnx29AhRxBxIbSEouoI6ipgPrqCratrWJjQw3LF5efS+w69wAwmJQ2dMUS9PR7dCd9EkmP/pRPXzxF3NOYQW/aiEZsShxJJBKiNGQRjbhUlDjUlJecNf58HgDzVDCd+xMZ8zQPgHmaB8A8jQOA1DwbzltKSaB1ng/nLbVK4Pl5Ppy39LwEHgf8850T5yH5wOMSeAx4cZ4f5x29BDwmgZPAvfP8OO/o28BJKYTQQogfAd+AfLbwztNZTkngG0KIHwkh9OA6wFczqJinc1/zv5r9ZUSv1BhzJ3A3sBM4u3drzFOWfAKf/+2MtWc8AEigHtgN7AKuABYDoXk+nlWUIqjxPE+Q6T0GnBRCDOmH/3+2+rtnoNoGPAAAAABJRU5ErkJggg=="},obYe:function(e,t){},rDvn:function(e,t){},tDCX:function(e,t){},tvR6:function(e,t){},u19V:function(e,t){},x9ll:function(e,t){},xkJd:function(e,t){},yb1D:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6fc5ce2dc710b12302f2.js.map