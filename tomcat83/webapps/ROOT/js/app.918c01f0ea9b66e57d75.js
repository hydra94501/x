webpackJsonp([1],{0:function(e,t){},"7YlK":function(e,t){},"9sed":function(e,t){},G4uj:function(e,t){},Kkgl:function(e,t){},"Me+y":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),o=a("mtWM"),s=a.n(o),i=void 0;i=(Object({NODE_ENV:"production"}).type,"http://localhost:8585"),s.a.defaults.timeout=6e3,s.a.defaults.baseURL=i,s.a.defaults.withCredentials=!1;var l=s.a,n=a("mw3O"),c=a.n(n);var d={el:"#app",name:"login",created:function(){},data:function(){return{loginForm:{userName:"",password:"",googleCode:""}}},methods:{login:function(){var e,t=this;(e=t.loginForm,l({url:"/user/login",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){if(console.log(t.$router),0===e.data.code){var a=e.data.data;1===a?t.$router.push("/index"):-1===a?t.$message.error("账户不存在"):-2===a?t.$message.error("账户未打开"):-3===a?t.$message.error("密码错误"):-4===a?t.$message.error("未填写谷歌验证码"):-5===a&&t.$message.error("谷歌验证码错误")}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"app"}},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-light login-panel"},[a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"谷歌秘钥"}},[a("el-input",{model:{value:e.loginForm.googleCode,callback:function(t){e.$set(e.loginForm,"googleCode",t)},expression:"loginForm.googleCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,u,!1,function(e){a("z8E8")},"data-v-f069ecdc",null).exports,p={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var f=a("VU/8")({name:"app",components:{}},p,!1,function(e){a("UQ6X")},null,null).exports,h=a("/ocq"),g=a("BO1k"),v=a.n(g);var y=a("//Fk"),b=a.n(y),w=a("Xxa5"),_=a.n(w),F=a("exGp"),x=a.n(F);function C(e){return l({url:"/cpinfo/changeCpInfoConfirmMin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}function k(e){return l({url:"/dictionary/queryDictionaryPageListByType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}var S="0123456789";function T(e,t,a){var r=2,o=!0;if(null!=t&&"number"==typeof t&&(r=t),null!=a&&"boolean"==typeof a&&(o=a),null!=e&&"number"==typeof e){var s=.01*e,i=(s=s.toFixed(r)).toString();if(""!=i){i.split(",").length,new RegExp("^-?0(\\.\\d+)?$|^-?[1-9]\\d*(\\.\\d+)?$|^-?([1-9][0-9]{0,2},)(\\d{3},)*(\\d{3})(\\.\\d+)?$","g");for(var l=new RegExp("^[0-9.-]*$","g"),n=i.replace(/,/,"");n.indexOf(",")>=0;)n=n.replace(/,/,"");var c="";if(l.test(n)){for(var d,u,m=0,p=0,f=0;m<n.length&&!(S.indexOf(n.substring(m,m+1))>=0);m++)c=c.concat(n.substring(m,m+1));var h=n.indexOf(".");u=((p=h>=0?h:n.length)-m)%3,d=parseInt((p-m)/3);for(var g=0;g<u;g++)c=c.concat(n.substring(m+g,m+g+1));d>0&&u>0&&(c=c.concat(","));for(g=u+m;g<p;g++)c=c.concat(n.substring(g,g+1)),3==++f&&g+1!=p&&(f=0,c=c.concat(","));for(g=p;g<n.length;g++)c=c.concat(n.substring(g,g+1))}else c=i;return o?""+c:c}}return"Value is null or not a number."}function N(e){return isNaN(e)?0:parseFloat((e/100).toFixed(2))}function I(e){if(!e)return"";var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate();r=r<10?"0"+r:r;var o=e.getHours();o=o<10?"0"+o:o;var s=e.getMinutes();s=s<10?"0"+s:s;var i=e.getSeconds();return t+"-"+a+"-"+r+" "+o+":"+s+":"+(i=i<10?"0"+i:i)}var $=a("XLwt"),D={name:"Home",created:function(){var e=this;return x()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.countrySelect="IND",t.next=3,e.homeStatistics();case 3:e.fullscreenLoading=!1,e.homeWarningInfo(),e.myChart=$.init(document.getElementById("cpinfoDailyStatistics")),e.myCpinfoHour24Chart=$.init(document.getElementById("cpinfoHour24Statictics")),e.queryCountryPageList(),e.queryCpInfoByCountrySelectList(),e.cpinfoDailyStatistics(),e.cpinfoHour24Statistics();case 11:case"end":return t.stop()}},t,e)}))()},data:function(){return{timer:"",value:20,fullscreenLoading:!0,showData:{todayPay:0,todayPayFee:0,todayPayNum:0,todayWithdraw:0,todayWithdrawFee:0,todayWithdrawNum:0,totalPay:0,totalPayFee:0,totalPayNum:0,totalWithdraw:0,totalWithdrawFee:0,totalWithdrawNum:0,yestodayPay:0,yestodayPayFee:0,yestodayPayNum:0,yestodayWithdraw:0,yestodayWithdrawFee:0,yestodayWithdrawNum:0},myChart:{},polar:{title:{text:"今日商户数据展示"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!0,type:"plain",zlevel:1,icon:"circle",top:"5%",right:"5%",width:"auto",height:"auto",orient:"horizontal",align:"auto",padding:5,itemWidth:12,itemGap:20,itemHeight:14,symbolKeepAspect:!0,formatter:function(e){return e},selectedMode:!0,inactiveColor:"#ccc",textStyle:{color:"#556677",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,lineHeight:20,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderRadius:0,padding:0,shadowColor:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"transparent",textBorderWidth:0,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,rich:{a:{color:"red",lineHeight:10},b:{color:"#fff",lineHeight:10}}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"代收",type:"bar",data:[],itemStyle:{normal:{color:"rgb(151,207,124)",label:{show:!0,position:"top",textStyle:{color:"rgb(151,207,124)",fontSize:14},formatter:function(e){return T(100*e.data)}}}}},{name:"代付",type:"bar",data:[],itemStyle:{normal:{color:"#f03e41",label:{show:!0,position:"top",textStyle:{color:"#f03e41",fontSize:14},formatter:function(e){return T(100*e.data)}}}}}],dataZoom:[{type:"inside",disabled:!1,xAxisIndex:0,zoomLock:!0,preventDefaultMouseMove:!1,filterMode:"empty",startValue:0,endValue:4,start:null,end:null}]},myCpinfoHour24Chart:{},cpinfoHour24:{title:{text:"商户24小时数据变化图"},tooltip:{trigger:"axis",axisPointer:{type:"line"}},legend:{show:!0,type:"plain",zlevel:1,icon:"circle",top:"5%",right:"5%",width:"auto",height:"auto",orient:"horizontal",align:"auto",padding:5,itemWidth:12,itemGap:20,itemHeight:14,symbolKeepAspect:!0,formatter:function(e){return e},selectedMode:!0,inactiveColor:"#ccc",textStyle:{color:"#556677",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,lineHeight:20,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderRadius:0,padding:0,shadowColor:"transparent",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"transparent",textBorderWidth:0,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,rich:{a:{color:"red",lineHeight:10},b:{color:"#fff",lineHeight:10}}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"代收",type:"line",smooth:!0,data:[],label:{normal:{show:!1,position:"top"}},itemStyle:{normal:{color:"rgb(151,207,124)"}}},{name:"代付",type:"line",smooth:!0,data:[],itemStyle:{normal:{color:"#f03e41"}}}],cpinfo:{country:"",appId:""},dataZoom:[{type:"inside",disabled:!1,xAxisIndex:0,zoomLock:!0,preventDefaultMouseMove:!1,filterMode:"empty",startValue:20,endValue:28,start:null,end:null}]},warnData:[],options:[],cpInfoOptions:[],countrySelect:"",cpInfoSelect:""}},methods:{homeStatistics:function(){var e,t=this;(e={country:t.countrySelect,appId:t.cpInfoSelect},l({url:"/cpinfo/getHomeStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code&&(t.showData=e.data.data)})},homeWarningInfo:function(){var e=this;return new b.a(function(t){var a;l({url:"/cpinfo/queryCpInfoWarnInfoPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)}).then(function(t){0===t.data.code&&(e.warnData=t.data.data)})})},cpinfoDailyStatistics:function(){var e=this;return new b.a(function(t){var a;(a={country:e.countrySelect,appId:e.cpInfoSelect},l({url:"/cpinfo/getCpInfoDailyStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data,r=[],o=[],s=[],i=!0,l=!1,n=void 0;try{for(var c,d=v()(a);!(i=(c=d.next()).done);i=!0){var u=c.value;r.push(u.appId),o.push(u.payAmount),s.push(u.withdrawAmount)}}catch(e){l=!0,n=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw n}}e.polar.legend.data=t.data.data.legend,e.polar.xAxis[0].data=[],e.polar.series[0].data=[],e.polar.series[1].data=[],e.polar.xAxis[0].data=r,e.polar.series[0].data=o,e.polar.series[1].data=s,e.myCpinfoHour24Chart.setOption(e.polar)}})})},cpinfoHour24Statistics:function(){var e=this;return new b.a(function(t){var a;(a={country:e.countrySelect,appId:e.cpInfoSelect},l({url:"/cpinfo/getCpInfoHour24Statistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data,r=[],o=[],s=[],i=!0,l=!1,n=void 0;try{for(var c,d=v()(a);!(i=(c=d.next()).done);i=!0){var u=c.value;r.push(u.time),o.push(u.payAmount),s.push(u.withdrawAmount)}}catch(e){l=!0,n=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw n}}e.cpinfoHour24.xAxis[0].data=[],e.cpinfoHour24.series[0].data=[],e.cpinfoHour24.series[1].data=[],e.cpinfoHour24.xAxis[0].data=r,e.cpinfoHour24.series[0].data=o,e.cpinfoHour24.series[1].data=s,e.myChart.setOption(e.cpinfoHour24)}})})},queryCountryPageList:function(){var e=this;return e.options=[],new b.a(function(t){k({type:"country"}).then(function(t){0===t.data.code&&(e.options=[],t.data.data.forEach(function(t,a){e.options.push({label:t.name,value:t.value})}))})})},queryCpInfoByCountrySelectList:function(){var e=this;return new b.a(function(t){var a;(a={country:e.countrySelect},l({url:"/cpinfo/queryCpInfoSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){e.cpInfoOptions=[],0===t.data.code&&t.data.data.forEach(function(t,a){e.cpInfoOptions.push({label:t.appId+" "+t.userName,value:t.appId})})})})},changeCountry:function(){this.homeStatistics(),this.cpinfoDailyStatistics(),this.cpinfoHour24Statistics(),this.queryCpInfoByCountrySelectList()},changeCpInfo:function(){this.homeStatistics(),this.cpinfoDailyStatistics(),this.cpinfoHour24Statistics()}},mounted:function(){var e=this;this.timer=setInterval(function(){e.homeStatistics(),e.cpinfoDailyStatistics(),e.cpinfoHour24Statistics()},2e4)},beforeDestroy:function(){clearInterval(this.timer)}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[a("div",{staticClass:"header-title"},[e._v("支付管理平台")]),e._v(" "),a("div",{staticClass:"country_select"},[[a("el-select",{staticStyle:{width:"6rem"},attrs:{placeholder:"请选择国家"},on:{change:function(t){return e.changeCountry()}},model:{value:e.countrySelect,callback:function(t){e.countrySelect=t},expression:"countrySelect"}},e._l(this.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"12rem"},attrs:{placeholder:"请选择商户"},on:{change:function(t){return e.changeCpInfo()}},model:{value:e.cpInfoSelect,callback:function(t){e.cpInfoSelect=t},expression:"cpInfoSelect"}},[a("el-option",{attrs:{value:""}},[e._v("请选择商户")]),e._v(" "),e._l(this.cpInfoOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)]],2),e._v(" "),a("el-row",{staticStyle:{"margin-top":"0.5rem"},attrs:{span:24,gutter:12}},[a("div",[a("el-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("div",[a("el-row",[a("el-col",{attrs:{xl:8,lg:8,md:12,sm:12,xs:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("今日")]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收")]),a("span",[e._v(e._s(Number(e.showData.todayPay/100).toFixed(2).toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收手续费")]),a("span",[e._v(e._s(Number(e.showData.todayPayFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收订单数")]),a("span",[e._v(e._s(e.showData.todayPayNum))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付")]),a("span",[e._v(e._s(Number(e.showData.todayWithdraw/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付手续费")]),a("span",[e._v(e._s(Number(e.showData.todayWithdrawFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付订单数")]),a("span",[e._v(e._s(e.showData.todayWithdrawNum))])])])],1),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:12,sm:12,xs:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("昨日")]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收")]),a("span",[e._v(e._s(Number(e.showData.yestodayPay/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收手续费")]),a("span",[e._v(e._s(Number(e.showData.yestodayPayFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收订单数")]),a("span",[e._v(e._s(e.showData.yestodayPayNum))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付")]),a("span",[e._v(e._s(Number(e.showData.yestodayWithdraw/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付手续费")]),a("span",[e._v(e._s(Number(e.showData.yestodayWithdrawFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付订单数")]),a("span",[e._v(e._s(e.showData.yestodayWithdrawNum))])])])],1),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:12,sm:12,xs:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("全部")]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收")]),a("span",[e._v(e._s(Number(e.showData.totalPay/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收手续费")]),a("span",[e._v(e._s(Number(e.showData.totalPayFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代收订单数")]),a("span",[e._v(e._s(e.showData.totalPayNum))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付")]),a("span",[e._v(e._s(Number(e.showData.totalWithdraw/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付手续费")]),a("span",[e._v(e._s(Number(e.showData.totalWithdrawFee/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]),e._v(" "),a("div",{staticClass:"card-item"},[a("span",[e._v("代付订单数")]),a("span",[e._v(e._s(e.showData.totalWithdrawNum))])])])],1)],1)],1)])],1),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:8,sm:8,xs:8}}),e._v(" "),a("el-col",{attrs:{xl:8,lg:8,md:8,sm:8,xs:8}})],1),e._v(" "),a("el-row",{staticStyle:{"padding-top":"30px"},attrs:{span:24,gutter:12}},[a("div",{staticStyle:{width:"auto",height:"400px"},attrs:{id:"cpinfoDailyStatistics"}})]),e._v(" "),a("el-row",{staticStyle:{"padding-top":"30px"},attrs:{span:24,gutter:12}},[a("div",{staticStyle:{width:"auto",height:"400px"},attrs:{id:"cpinfoHour24Statictics"}})]),e._v(" "),a("el-row",{staticStyle:{"padding-top":"20px"},attrs:{gutter:12}},[a("el-col",{attrs:{span:16}},[a("div",{staticStyle:{height:"400px",width:"100%"},attrs:{id:"main"}})]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.warnData,stripe:"","max-height":"390px"}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),a("el-table-column",{attrs:{label:"类别",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"info",label:"详情"}})],1)],1)],1)],1)},staticRenderFns:[]};var P=a("VU/8")(D,L,!1,function(e){a("z+5J"),a("eavT")},"data-v-02d37dd2",null).exports;function R(e){return l({url:"/paytype/queryPayTypeSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}var W={name:"payLogList",data:function(){return{fullscreenLoading:!1,centerDialogVisible:!1,innerVisible:!1,sendNotifyDrawerVisable:!1,direction:"rtl",password:"",verifyCode:"",notifyId:"",createTime:[],payTime:[],countryOptions:[],payTypeOptions:[],searchFormOri:{},searchForm:{id:"",appId:"",orderId:"",transactionNum:"",payTypeId:"",type:"",status:"",status1:"",syncCnt:"",startCreateTime:"",endCreateTime:"",startPayTime:"",endPayTime:"",country:"",clabe:"",rastreo:"",amount:"",page:1,limit:10,rowindex:0},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""}},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}]}},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.searchForm.startCreateTime)var t=new Date(this.searchForm.startCreateTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},pickerOptionsStartPay:{},pickerOptionsEndPay:{disabledDate:function(e){if(this.searchForm.startPayTime)var t=new Date(this.searchForm.startPayTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1,searchStatictics:{needPayAmount:0,payAmount:0,payFee:0,payNum:0}}},created:function(){this.searchFormOri=this.searchForm,this.queryAllPayLog(),this.queryCountryPageList(),this.queryAllPaytypeList()},methods:{queryAllPayLog:function(){var e=this;return e.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.createTime?"":this.createTime[0],this.searchForm.endCreateTime=""===this.createTime?"":this.createTime[1],this.searchForm.startPayTime=""===this.payTime?"":this.payTime[0],this.searchForm.endPayTime=""===this.payTime?"":this.payTime[1],new b.a(function(t){var a;(a=e.searchForm,l({url:"/paylog/queryPayLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=[],r=t.data.data.statictics,o=t.data.data.list,s=!0,i=!1,l=void 0;try{for(var n,c=v()(o);!(s=(n=c.next()).done);s=!0){var d=n.value;d.type=(void 0,void 0,g=(h=d).currency,y=h.type,"MXN"===g?1===y?"银行卡":4===y?"Clabe":7===y?"HTML":"":"BRL"===g?1===y?"银行卡":2===y?"电子钱包":4===y?"PIX":"":"INR"===g?1===y?"银行卡":2===y?"电子钱包":3===y?"UPI":"":void 0),d.amount=N(d.amount),d.platformFee=N(d.platformFee),d.thirdFee=N(d.thirdFee);var u=d.status;u=1===u?"成功":0===u?"待处理":"失败",d.status=u;var m=d.status1;m=1===m?"成功":0===m?"待处理":"失败",d.status1=m;var p=d.syncCnt;p=1===p?"同步成功":0===p?"未回调":"同步失败"+-1*p+"次",d.syncCnt=p;var f=d.validStatus;f=1===f?"已结算":"未结算",d.validStatus=f,d.createTime=I(d.createTime),d.payTime=I(d.payTime),a.push(d)}}catch(e){i=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw l}}e.searchStatictics.needPayAmount=N(r.needPayAmount),e.searchStatictics.payAmount=N(r.payAmount),e.searchStatictics.payFee=N(r.payFee),e.searchStatictics.payNum=r.payNum,e.tableData=a,e.total=r.allPayNum,e.fullscreenLoading=!1}var h,g,y})})},queryCountryPageList:function(){var e=this;return new b.a(function(t){k({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},queryAllPaytypeList:function(){var e=this;R().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,o=!1,s=void 0;try{for(var i,l=v()(a);!(r=(i=l.next()).done);r=!0){var n=i.value;e.payTypeOptions.push({label:n.name,value:n.id})}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}})},search:function(){this.searchForm.page=1,this.searchForm.limit=10,this.queryAllPayLog()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[],this.payTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryAllPayLog()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},changeStatus:function(e){this.centerDialogVisible=!0,this.notifyId=e.row.id},checkPassword:function(){var e,t=this;(e={password:t.password},l({url:"/user/checkPassword",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?(console.log(e.data),t.innerVisible=!0):t.$message("CHECK PSSWORD FAIL")})},checkVerifyCode:function(){var e,t=this;(e={verifyCode:t.verifyCode},l({url:"/user/checkVerifyCode",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){var a;0===e.data.code?(a={id:t.notifyId},l({url:"/paylog/changePayLogStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(e){console.log(e.data),0===e.data.code&&(t.$message(e.data.msg),t.notifyId="",t.centerDialogVisible=!1,t.innerVisible=!1,t.queryAllPayLog())}):t.$message("VERIFY FAIL")})},handleClose:function(e){e()},handleSizeChange:function(e){this.searchForm.limit=e,this.queryAllPayLog()},openSendNotifyMsgDrawer:function(e){var t,a=this;(t={id:e.id},l({url:"/paylog/sendNotifyMsg",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0!==e.data.code&&-1!==e.data.code||a.queryAllPayLog(),a.sending=!1})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"系统订单号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户订单号",prop:"orderId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"三方订单号",prop:"transactionNum"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.transactionNum,callback:function(t){e.$set(e.searchForm,"transactionNum",t)},expression:"searchForm.transactionNum"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"实际状态",prop:"status1"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status1,callback:function(t){e.$set(e.searchForm,"status1",t)},expression:"searchForm.status1"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.payTypeId,callback:function(t){e.$set(e.searchForm,"payTypeId",t)},expression:"searchForm.payTypeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"同步状态",prop:"syncCnt"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.syncCnt,callback:function(t){e.$set(e.searchForm,"syncCnt",t)},expression:"searchForm.syncCnt"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"同步成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未回调",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败重试",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"clabe",prop:"clabe"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.clabe,callback:function(t){e.$set(e.searchForm,"clabe",t)},expression:"searchForm.clabe"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"Rastreo",prop:"rastreo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.rastreo,callback:function(t){e.$set(e.searchForm,"rastreo",t)},expression:"searchForm.rastreo"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"金额",prop:"amount"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.amount,callback:function(t){e.$set(e.searchForm,"amount",t)},expression:"searchForm.amount"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"支付时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartPay},model:{value:e.payTime,callback:function(t){e.payTime=t},expression:"payTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{"margin-left":"30px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          订单总额："+e._s(e.searchStatictics.needPayAmount)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          实收订单总额："+e._s(e.searchStatictics.payAmount)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          实收手续费："+e._s(e.searchStatictics.payFee)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:6,lg:6,md:6,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          实收订单数："+e._s(e.searchStatictics.payNum)+"\n                      ")])])])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"跳转地址"}},[a("span",[e._v(e._s(t.row.callbackUrl))])]),e._v(" "),a("el-form-item",{attrs:{label:"回调地址"}},[a("span",[e._v(e._s(t.row.notifyUrl))])]),e._v(" "),a("el-form-item",{attrs:{label:"Ip"}},[a("span",[e._v(e._s(t.row.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("span",[e._v(e._s(t.row.description))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"下游订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transactionNum",label:"第三方订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"platformFee",label:"商户手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdFee",label:"第三方手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTypeName",label:"充值通道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"充值类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["成功"===t.row.status?a("span",{staticStyle:{color:"red","font-weight":"bolder"}},[e._v(e._s(t.row.status))]):a("span",{staticStyle:{color:"#606972"}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"实际状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["成功"===t.row.status1?a("span",{staticStyle:{color:"red","font-weight":"bolder"}},[e._v(e._s(t.row.status1))]):a("span",{staticStyle:{color:"#606972"}},[e._v(e._s(t.row.status1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"syncCnt",label:"回调状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"validStatus",label:"结算状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTime",label:"支付时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"结算日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clabe",label:"clabe"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rastreo",label:"rastreo"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!("待处理"===t.row.status),type:"danger",round:""},on:{click:function(a){return e.changeStatus(t)},change:function(e){}}},[e._v("回调\n          ")]),e._v(" "),a("el-button",{attrs:{disabled:"待处理"===t.row.status,type:"success",round:""},on:{click:function(a){return e.openSendNotifyMsgDrawer(t.row)},change:function(e){}}},[e._v("补发通知\n          ")])]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"请输入密码",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-dialog",{attrs:{width:"30%",title:"请输入验证码",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-input",{attrs:{placeholder:""},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),a("el-button",{on:{click:function(t){e.innerVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkVerifyCode()}}},[e._v("确 定")])],1),e._v(" "),a("el-input",{attrs:{placeholder:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.checkPassword()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-drawer",{staticStyle:{"overflow-y":"auto"},attrs:{visible:e.sendNotifyDrawerVisable,direction:e.direction,"before-close":e.handleClose,"close-on-click-modal":!1,"show-close":!1,"custom-class":"demo-drawer",size:"50%"},on:{"update:visible":function(t){e.sendNotifyDrawerVisable=t}}},[a("div",{staticStyle:{padding:"20px"}},[a("el-form",[a("el-form-item",{attrs:{label:"回调单号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.id,callback:function(t){e.$set(e.sendNotifyMsgForm,"id",t)},expression:"sendNotifyMsgForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.url,callback:function(t){e.$set(e.sendNotifyMsgForm,"url",t)},expression:"sendNotifyMsgForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调数据","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyData,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyData",t)},expression:"sendNotifyMsgForm.notifyData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调响应","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:12,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyResp,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyResp",t)},expression:"sendNotifyMsgForm.notifyResp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调分析","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:3,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyAnalyze,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyAnalyze",t)},expression:"sendNotifyMsgForm.notifyAnalyze"}})],1)],1),e._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{attrs:{disable:e.sending,type:"success"},on:{click:function(t){return e.sendNotifyMsg(e.sendNotifyMsgForm.id)}}},[e._v(e._s(e.sending?"发送中...":"发送")+"\n        ")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelNotifyMsgDrawer()}}},[e._v("取 消")])],1)],1)])],1)},staticRenderFns:[]};var z=a("VU/8")(W,O,!1,function(e){a("uXPX")},"data-v-6586f7b2",null).exports,A=a("c/Tr"),M=a.n(A);function q(e){return l({url:"/withdrawtype/queryWithdrawTypeSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}var E={name:"withdrawLogList",data:function(){return{fullscreenLoading:!1,sendNotifyDrawerVisable:!1,direction:"rtl",createTime:[],withdrawTime:[],countryOptions:[],searchForm:{id:"",appId:"",orderId:"",bankCardNo:"",pixKey:"",cpf:"",transactionNum:"",withdrawTypeId:"",type:"",status:"",syncCnt:"",confirmStatus:"",startCreateTime:"",endCreateTime:"",startWithdrawTime:"",endWithdrawTime:"",country:"",page:1,limit:10,rowIndex:0},searchStatictics:{totalWithdrawAmount:0,totalWithdrawNum:0,totalWithdrawSuccessAmount:0,totalWithdrawSuccessFee:0,totalWithdrawSuccessNum:0,totalWithdrawProcessAmount:0,totalWithdrawFailAmount:0},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{appId:0,UserName:"",UserPass:"",checkPass:"",PhoneNo:"",payRange:"",withdrawRange:"",SubRatio:0,RemainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",AgentpayFeeFix:"0",AgentpayFeeRate:"0",AgentwithdrawFeeFix:"0",AgentwithdrawFeeRate:"0",platformId:"",country:""},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""}},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}]}},tableData:[],total:0,dateStart:"",dateEnd:"",pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.searchForm.startCreateTime)var t=new Date(this.searchForm.startCreateTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},pickerOptionsStartPay:{},pickerOptionsEndPay:{disabledDate:function(e){if(this.searchForm.startWithdrawTime)var t=new Date(this.searchForm.startWithdrawTime).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},withdrawTypeOptions:[],sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1,showCheckBox:!0,multipleSelection:[],showExtra:!1}},created:function(){this.queryAllWithdrawLog(),this.queryCountryPageList(),this.queryAllWithdrawTypeList()},methods:{queryAllWithdrawLog:function(){var e,t=this;t.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.createTime||null===this.createTime?"":this.createTime[0],this.searchForm.endCreateTime=""===this.createTime||null===this.createTime?"":this.createTime[1],this.searchForm.startWithdrawTime=""===this.withdrawTime||null===this.withdrawTime?"":this.withdrawTime[0],this.searchForm.endWithdrawTime=""===this.withdrawTime||null===this.withdrawTime?"":this.withdrawTime[1],(e=t.searchForm,l({url:"/withdrawlog/queryWithdrawLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=[],r=e.data.data.list,o=e.data.data.statictics,s=!0,i=!1,l=void 0;try{for(var n,c=v()(r);!(s=(n=c.next()).done);s=!0){var d=n.value;d.type=(void 0,void 0,f=(p=d).currency,h=p.type,"MXN"===f?1===h?"银行卡":4===h?"Clabe":"":"BRL"===f?1===h?"银行卡":2===h?"电子钱包":4===h?"PIX":"":"INR"===f?1===h?"银行卡":2===h?"电子钱包":3===h?"UPI":"":void 0),d.amount=N(d.amount),d.platformFee=N(d.platformFee),d.thirdFee=N(d.thirdFee);var u=d.status;u=2===u?"成功":-2===u?"失败":-1===u?"失败重试":0===u?"待处理":"处理中",d.status=u;var m=d.syncCnt;m=1===m?"同步成功":0===m?"未回调":"同步失败"+-1*m+"次",d.syncCnt=m,d.createTime=I(d.createTime),d.withdrawTime=I(d.withdrawTime),a.push(d)}}catch(e){i=!0,l=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw l}}t.tableData=a,t.searchStatictics.totalWithdrawAmount=N(o.totalWithdrawAmount),t.searchStatictics.totalWithdrawSuccessAmount=N(o.totalWithdrawSuccessAmount),t.searchStatictics.totalWithdrawSuccessFee=N(o.totalWithdrawSuccessFee),t.searchStatictics.totalWithdrawSuccessNum=o.totalWithdrawSuccessNum,t.searchStatictics.totalWithdrawProcessAmount=N(o.totalWithdrawProcessAmount),t.searchStatictics.totalWithdrawFailAmount=N(o.totalWithdrawFailAmount),t.total=o.totalWithdrawNum,t.fullscreenLoading=!1}var p,f,h})},queryCountryPageList:function(){var e=this;return new b.a(function(t){k({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},search:function(){this.searchForm.page=1,this.searchForm.limit=10,this.queryAllWithdrawLog()},resetForm:function(e){this.$refs.searchForm.resetFields(),this.createTime=[],this.withdrawTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryAllWithdrawLog()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0},queryAllWithdrawTypeList:function(){var e=this;q().then(function(t){if(0===t.data.code){e.withdrawTypeOptions=[],console.log(t.data.data);var a=t.data.data,r=!0,o=!1,s=void 0;try{for(var i,l=v()(a);!(r=(i=l.next()).done);r=!0){var n=i.value;e.withdrawTypeOptions.push({label:n.name,value:n.id})}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}})},changeStatus:function(e){var t,a=this;(t={id:e.id},l({url:"/withdrawlog/changeWithdrawLogStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code&&a.queryAllWithdrawLog()})},handleClose:function(e){e()},cancelNotifyMsgDrawer:function(){this.sendNotifyDrawerVisable=!1,this.sendNotifyMsgForm.notifyData="",this.sendNotifyMsgForm.notifyResp="",this.sendNotifyMsgForm.notifyAnalyze=""},handleSelectionChange:function(){},batchPassWithdrawLog:function(){var e=[];e=M()(this.$refs.multipleTable.selection,function(e){return e.id}),this.pass(e.toString())},singlePassWithdrawLog:function(e){this.pass(e)},batchRejectWithdrawLog:function(){var e=[];e=M()(this.$refs.multipleTable.selection,function(e){return e.id}),this.reject(e.toString())},singleRejectWithdrawLog:function(e){this.reject(e)},pass:function(e){var t,a=this;this.fullscreenLoading=!0,(t={ids:e},l({url:"/withdrawlog/updateWithdrawLogConfirmStatusPass",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){e.data.code,a.$message(e.data.msg),a.queryAllWithdrawLog()})},reject:function(e){var t,a=this;this.fullscreenLoading=!0,(t={ids:e},l({url:"/withdrawlog/updateWithdrawLogConfirmStatusReject",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){e.data.code,a.$message(e.data.msg),a.queryAllWithdrawLog()})},handleSizeChange:function(e){this.searchForm.limit=e,this.queryAllWithdrawLog()}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[[a("div",[a("el-row",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"系统订单号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"商户订单号",prop:"orderId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"三方订单号",prop:"transactionNum"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.transactionNum,callback:function(t){e.$set(e.searchForm,"transactionNum",t)},expression:"searchForm.transactionNum"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"订单状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"成功",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"处理中",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未处理",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败重试",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"失败",value:"-2"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"商户",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:5,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.bankCardNo,callback:function(t){e.$set(e.searchForm,"bankCardNo",t)},expression:"searchForm.bankCardNo"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"CPF",prop:"cpf"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.cpf,callback:function(t){e.$set(e.searchForm,"cpf",t)},expression:"searchForm.cpf"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"Pix账号",prop:"pixKey"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.pixKey,callback:function(t){e.$set(e.searchForm,"pixKey",t)},expression:"searchForm.pixKey"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"通道",prop:"withdrawTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.withdrawTypeId,callback:function(t){e.$set(e.searchForm,"withdrawTypeId",t)},expression:"searchForm.withdrawTypeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.withdrawTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"同步状态",prop:"syncCnt"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.syncCnt,callback:function(t){e.$set(e.searchForm,"syncCnt",t)},expression:"searchForm.syncCnt"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"同步成功",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未回调",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"失败重试",value:"-1"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:4,md:6,sm:8,xs:12}},[a("el-form-item",{attrs:{label:"审核状态",prop:"confirmStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.confirmStatus,callback:function(t){e.$set(e.searchForm,"confirmStatus",t)},expression:"searchForm.confirmStatus"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"通过",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"驳回",value:"-1"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:12,lg:12,md:12,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置\n            ")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-plus",type:"warning"},on:{click:function(t){e.showExtra=!e.showExtra}}},[e._v("\n              展开\n            ")]),e._v(" "),e.showExtra?a("el-button",{attrs:{size:"medium",icon:"el-icon-check",type:"warning"},on:{click:e.batchPassWithdrawLog}},[e._v("\n              批量通过\n            ")]):e._e(),e._v(" "),e.showExtra?a("el-button",{attrs:{size:"medium",icon:"el-icon-close",type:"warning"},on:{click:e.singleRejectWithdrawLog}},[e._v("\n              批量驳回\n            ")]):e._e()],1)],1)],1),e._v(" "),a("el-row",[a("div",{staticStyle:{"margin-left":"30px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          提单总额："+e._s(e.searchStatictics.totalWithdrawAmount)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          成功总额："+e._s(e.searchStatictics.totalWithdrawSuccessAmount)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          成功手续费："+e._s(e.searchStatictics.totalWithdrawSuccessFee)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:3,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          成功订单数："+e._s(e.searchStatictics.totalWithdrawSuccessNum)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          处理中总额："+e._s(e.searchStatictics.totalWithdrawProcessAmount)+"\n                      ")])])]),e._v(" "),a("el-col",{attrs:{xl:4,lg:4,md:8,sm:8,xs:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"show-statictics-span"},[e._v("\n                          失败总额："+e._s(e.searchStatictics.totalWithdrawFailAmount)+"\n                      ")])])])],1)],1)]),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"},on:{"selection-change":e.handleSelectionChange}},[e.showCheckBox?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"expand",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"代理商"}},[a("span",[e._v(e._s(t.row.agentName))])]),e._v(" "),a("el-form-item",{attrs:{label:"回调地址"}},[a("span",[e._v(e._s(t.row.notifyUrl))])]),e._v(" "),a("el-form-item",{attrs:{label:"ip"}},[a("span",[e._v(e._s(t.row.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("span",[e._v(e._s(t.row.bankAccountName))])]),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("span",[e._v(e._s(t.row.email))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("span",[e._v(e._s(t.row.mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"失败原因"}},[a("span",[e._v(e._s(t.row.failReason))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"订单号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"下游订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transactionNum",label:"第三方订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"platformFee",label:"商户手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdFee",label:"第三方手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"提现通道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"到账类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankCardNo",label:"银行账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankCode",label:"银行编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"branchCode",label:"分行编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pixKey",label:"Pix账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"documentId",label:"Cpf"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["成功"===t.row.status?a("span",{staticStyle:{color:"red","font-weight":"bolder"}},[e._v(e._s(t.row.status))]):a("span",{staticStyle:{color:"#606972"}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"syncCnt",label:"回调状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.confirmStatus&&"成功"!==t.row.status&&"失败"!==t.row.status?a("span",{staticClass:"log-confirm-success"},[a("a",{staticStyle:{"text-decoration":"none",color:"#21BA45","font-size":"0.88rem","font-weight":"bolder"},attrs:{href:"#"},on:{click:function(a){return e.singlePassWithdrawLog(t.row.id)}}},[e._v("通过")])]):e._e(),e._v(" "),0===t.row.confirmStatus&&"成功"!==t.row.status&&"失败"!==t.row.status?a("span",{staticClass:"log-confirm-fail"},[a("a",{staticStyle:{"text-decoration":"none",color:"#21BA45","font-size":"0.88rem","font-weight":"bolder"},attrs:{href:"#"},on:{click:function(a){return e.singleRejectWithdrawLog(t.row.id)}}},[e._v("驳回")])]):e._e(),e._v(" "),1===t.row.confirmStatus?a("span",{staticClass:"log-confirm-success"},[e._v("\n                              已通过\n                          ")]):e._e(),e._v(" "),-1===t.row.confirmStatus?a("span",{staticClass:"log-confirm-fail"},[e._v("\n                              已驳回\n                          ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[1e4===t.row.appId?a("el-button",{attrs:{type:"danger",round:""},on:{click:function(a){return e.changeStatus(t.row)},change:function(e){}}},[e._v("回调\n              ")]):e._e(),e._v(" "),a("el-button",{attrs:{disabled:"成功"!==t.row.status&&"失败"!==t.row.status,type:"success",round:""},on:{click:function(a){return e.openSendNotifyMsgDrawer(t.row)},change:function(e){}}},[e._v("补发通知\n              ")])]}}])})],1)],1),e._v(" "),a("el-row",[a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":[10,20,50,100,200],"page-size":e.searchForm.limit,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)]),e._v(" "),a("el-row",[a("el-drawer",{staticStyle:{"overflow-y":"auto"},attrs:{visible:e.sendNotifyDrawerVisable,direction:e.direction,"before-close":e.handleClose,"close-on-click-modal":!1,"show-close":!1,"custom-class":"demo-drawer",size:"50%"},on:{"update:visible":function(t){e.sendNotifyDrawerVisable=t}}},[a("div",{staticStyle:{padding:"20px"}},[a("el-form",[a("el-form-item",{attrs:{label:"回调单号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.id,callback:function(t){e.$set(e.sendNotifyMsgForm,"id",t)},expression:"sendNotifyMsgForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.url,callback:function(t){e.$set(e.sendNotifyMsgForm,"url",t)},expression:"sendNotifyMsgForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调数据","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyData,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyData",t)},expression:"sendNotifyMsgForm.notifyData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调响应","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:12,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyResp,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyResp",t)},expression:"sendNotifyMsgForm.notifyResp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调分析","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",readonly:"",rows:3,autocomplete:"off"},model:{value:e.sendNotifyMsgForm.notifyAnalyze,callback:function(t){e.$set(e.sendNotifyMsgForm,"notifyAnalyze",t)},expression:"sendNotifyMsgForm.notifyAnalyze"}})],1)],1),e._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{attrs:{disable:e.sending,type:"success"},on:{click:function(t){return e.sendNotifyMsg(e.sendNotifyMsgForm.id)}}},[e._v("\n                "+e._s(e.sending?"发送中...":"发送")+"\n              ")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancelNotifyMsgDrawer()}}},[e._v("取 消")])],1)],1)])],1)],1)]],2)},staticRenderFns:[]};var U=a("VU/8")(E,B,!1,function(e){a("V46G")},"data-v-38c9678b",null).exports;var V={name:"operaLogList",data:function(){return{fullscreenLoading:!1,createTime:[],searchForm:{id:null,userName:"",operation:"",module:"",function:"",method:"",startCreateTime:"",endCreateTime:"",page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",formLabelWidth:120,sending:!1}},created:function(){this.queryOperateLogPageList()},methods:{queryOperateLogPageList:function(){var e=this;return this.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.createTime?"":this.createTime[0],this.searchForm.endCreateTime=""===this.createTime?"":this.createTime[1],new b.a(function(t){var a;(a=e.searchForm,l({url:"/operatelog/queryOperateLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],o=!0,s=!1,i=void 0;try{for(var l,n=v()(a);!(o=(l=n.next()).done);o=!0){var c=l.value;r.push(c)}}catch(e){s=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw i}}e.tableData=r,e.fullscreenLoading=!1}})})},search:function(){this.searchForm.page=1,this.queryOperateLogPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryOperateLogPageList()}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"记录编号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"用户",prop:"userName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"操作关键词",prop:"operation"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.operation,callback:function(t){e.$set(e.searchForm,"operation",t)},expression:"searchForm.operation"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:8,md:8,sm:12,xs:24}},[a("el-form-item",{attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStartCreate},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"记录编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户账号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作","min-width":"500",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"结果",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"useTime",label:"处理时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var X=a("VU/8")(V,H,!1,function(e){a("G4uj")},"data-v-6154a690",null).exports;var j={name:"moneyLogList",data:function(){return{fullscreenLoading:!1,centerDialogVisible:!1,innerVisible:!1,sendNotifyDrawerVisable:!1,direction:"rtl",password:"",verifyCode:"",notifyId:"",early:[],countryOptions:[],payTypeOptions:[],searchFormOri:{},searchForm:{id:null,appId:"",orderId:"",type:"",sceneInfo:"",money:"",startCreateTime:"",endCreateTime:"",page:1,limit:10,rowIndex:0},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""}},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}]}},tableData:[],total:0,dateStart:"",dateEnd:"",pickerOptionsStart:{},pickerOptionsEnd:{disabledDate:function(e){if(this.dateStart)var t=new Date(this.dateStart).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1}},created:function(){},methods:{queryMoneyLogPageList:function(){var e=this;return this.fullscreenLoading=!0,this.searchForm.startCreateTime=""===this.early?"":this.early[0],this.searchForm.endCreateTime=""===this.early?"":this.early[1],new b.a(function(t){var a;(a=e.searchForm,l({url:"/moneylog/queryMoneyLogPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],o=!0,s=!1,i=void 0;try{for(var l,n=v()(a);!(o=(l=n.next()).done);o=!0){var c=l.value,d=c.type;d=1===d?"增加":"减少",c.type=d;var u=c.sceneInfo;u=1===u?"商户充值":2===u?"管理员操作":3===u?"商户提现":"转赠",c.sceneInfo=u,c.frontMoney=formatAmount(c.frontMoney),c.money=formatAmount(c.money),c.queenMoney=formatAmount(c.queenMoney),c.createTime=dateFormate(c.createTime),r.push(c)}}catch(e){s=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw i}}e.tableData=r,e.fullscreenLoading=!1}})})},search:function(){this.searchForm.page=1,this.searchForm.limit=10,this.queryMoneyLogPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.dateStart="",this.dateEnd=""},pageChange:function(e){this.searchForm.page=e,this.queryMoneyLogPageList()}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"记录编号",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户订单号",prop:"orderId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.orderId,callback:function(t){e.$set(e.searchForm,"orderId",t)},expression:"searchForm.orderId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"增加",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"减少",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"场景",prop:"sceneInfo"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.sceneInfo,callback:function(t){e.$set(e.searchForm,"sceneInfo",t)},expression:"searchForm.sceneInfo"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"商户充值",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"管理员操作",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"商户提现",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"转赠",value:"4"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"金额",prop:"money"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.money,callback:function(t){e.$set(e.searchForm,"money",t)},expression:"searchForm.money"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:4,lg:8,md:8,sm:12,xs:24}},[a("el-form-item",{attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!0,"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择起始日期","picker-options":e.pickerOptionsStart},model:{value:e.early,callback:function(t){e.early=t},expression:"early"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"记录编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户Id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sceneInfo",label:"场景"}}),e._v(" "),a("el-table-column",{attrs:{prop:"frontMoney",label:"变动前金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"变动金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"queenMoney",label:"变动后金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"details",label:"说明"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"商户单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var K=a("VU/8")(j,G,!1,function(e){a("sjUr")},"data-v-5d35c211",null).exports,Y=a("pFYg"),J=a.n(Y),Z=a("fZjL"),Q=a.n(Z);var ee={name:"cpinfoList",data:function(){var e=this,t=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fullscreenLoading:!0,searchForm:{userName:"",agentId:"",status:null,canOver:null,agentOptions:[],platformOptions:[],country:""},dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{appId:0,userName:"",userPass:"",checkPass:"",payRange:"",withdrawRange:"",subRatio:0,remainDelayDay:"0",payFeeFix:"0",payFeeRate:"0",withdrawFeeFix:"0",withdrawFeeRate:"0",agentPayFeeFix:"0",agentPayFeeRate:"0",agentWithdrawFeeFix:"0",agentWithdrawFeeRate:"0",country:""},rules:{userName:[{validator:function(t,a,r){if(!a)return r(new Error("用户名不能为空"));var o;e.dialog.isInsert?(o={userName:a},l({url:"/cpinfo/queryCpInfoByUserName",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(o)})).then(function(e){0===e.data.code?r():r(new Error("用户名已被使用。"))}):r()},trigger:"blur"}],userPass:[{required:!0,message:"请输入账号密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.dialog.form.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.dialog.form.userPass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],subRatio:[{required:!0,message:"请输入",trigger:"blur"}],remainDelayDay:[{required:!0,message:"请输入",trigger:"blur"}],agentPayFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],agentPayFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],agentWithdrawFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],agentWithdrawFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",verifyCode:"",remain:0,notes:""},creditForm:{password:"",verifyCode:"",remain:"0"},agentForm:{agentId:""},confirmForm:{confirmStatus:"",confirmMin:""},typeForm:{defaultPayTypeId:[],defaultWithdrawTypeId:[]},ipForm:{ip:""},rules:{userName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:t,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:t,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[],page:{pageSize:10,total:0,cur:1},countryOptions:[],agentOptions:[],filterList:[],whiteIps:""}},created:function(){this.refresh(),this.findType(),this.findAgent(),this.queryCountryPageList()},methods:{findType:function(){var e=this;R().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var o={};o.id=t.data.data[r].id+"",o.name=t.data.data[r].name+"",o.status=t.data.data[r].status+"",a.push(o)}e.settings.payTypeOptions=a}}),q().then(function(t){if(0===t.data.code){for(var a=[],r=0;r<t.data.data.length;r++){var o={};o.id=t.data.data[r].id+"",o.name=t.data.data[r].name+"",o.status=t.data.data[r].status+"",a.push(o)}e.settings.withdrawTypeOptions=a}})},findAgent:function(){var e,t=this;l({url:"/agent/queryAgentSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)}).then(function(e){0===e.data.code&&(t.searchForm.agentOptions=e.data.data)})},refresh:function(){var e=this;e.fileList=[];var t,a=[],r=/^,|，| $/,o=String(e.searchForm.userName);""!==o?r.test(o)?a=o.split(r):(a=[]).push(o):a=null,(t={page:this.page.cur,limit:this.page.pageSize,userNames:a,agentId:this.searchForm.agentId,status:this.searchForm.status,canOver:this.searchForm.canOver,country:this.searchForm.country},l({url:"/cpinfo/queryCpInfoPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(t){if(e.fullscreenLoading=!1,0===t.data.code){e.tableData=t.data.data,e.page.total=t.data.count;var a=!0,r=!1,o=void 0;try{for(var s,i=v()(t.data.data);!(a=(s=i.next()).done);a=!0){var l=s.value;e.filterList.push({text:l.appId,value:l.appId})}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}}})},pageChange:function(e){this.page.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e?t.saveCpInfo():"balanceForm"===e?t.saveBalance():"creditForm"===e?t.saveCredit():"agentForm"===e?t.saveAgent():"typeForm"===e?t.saveType():"confirmForm"===e?t.saveConfirmMin():"ipForm"===e&&t.saveIp()})},saveCpInfo:function(){var e=this.dialog.isInsert?"添加":"编辑",t=this;this.$confirm("确定"+e+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(t.dialog.isInsert?(a=t.dialog.form,l({url:"/cpinfo/addCpInfo",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})):function(e){return l({url:"/cpinfo/updateCpInfo",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(t.dialog.form)).then(function(a){0===a.data.code?t.$message({message:e+"成功",type:"success"}):(e=e+"失败，"+a.data.msg,t.$message.error(e)),t.refresh(),t.closeDialog()})})},saveBalance:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.balanceForm;a.remain<0&&(a.remain=Math.abs(a.remain)),a.appId=e.settings.appId(e.settings.balanceForm.remain>=0?(t=a,l({url:"/cpinfo/addCpInfoRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})):function(e){return l({url:"/cpinfo/subtractCpInfoRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(a)).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveCredit:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"账户信用吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.creditForm;a.appId=e.settings.appId,(t=a,l({url:"/cpinfo/updateCpInfoCredit",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveConfirmMin:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"需要人工审核的最低额度吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.settings.confirmForm;t.appId=e.settings.appId,C(t).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveAgent:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户绑定代理商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.agentForm;a.appId=e.settings.appId,(t=a,l({url:"/cpinfo/updateCpInfoAgentId",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveType:function(){var e=this;this.$confirm("确定为"+this.settings.userName+"账户指定通道吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.typeForm;a.appId=e.settings.appId,a.defaultPayTypeId=e.settings.typeForm.defaultPayTypeId.toString(),a.defaultWithdrawTypeId=e.settings.typeForm.defaultWithdrawTypeId.toString(),(t=a,l({url:"/cpinfo/updateCpInfoDefaultType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},saveIp:function(){var e=this;this.$confirm("确定修改"+this.settings.userName+"的ip地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,a=e.settings.ipForm;a.appId=e.settings.appId,(t=a,l({url:"/cpinfo/updateCpInfoIp",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(t){0===t.data.code?e.$message({message:t.data.msg,type:"success"}):e.$message.error(t.data.msg),e.refresh(),e.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),Q()(e).forEach(function(t){var a=J()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;Q()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.userName=t.userName,this.dialog.form.checkPass=t.userPass,this.dialog.form.payFeeFix=t.payFeeFix/100,this.dialog.form.withdrawFeeFix=t.withdrawFeeFix/100,this.dialog.form.agentPayFeeFix=t.agentPayFeeFix/100,this.dialog.form.agentWithdrawFeeFix=t.agentWithdrawFeeFix/100,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={appId:t.appId},l({url:"/cpinfo/deleteCpInfo",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t,a=this;(t={appId:e.appId,status:e.status},l({url:"/cpinfo/changeCpInfoStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeConfirmStatus:function(e){var t,a=this;(t={appId:e.appId,confirmStatus:e.confirmStatus},l({url:"/cpinfo/changeCpInfoConfirmStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeConfirmMin:function(e){var t=this;C({appId:e.appId,confirmMin:e.status}).then(function(e){0===e.data.code?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.refresh()})},changeCanWithdraw:function(e){var t,a=this;(t={appId:e.appId,canWithdraw:e.canWithdraw},l({url:"/cpinfo/changeCpInfoCanWithdraw",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeCanOver:function(e){var t,a=this;(t={appId:e.appId,canOver:e.canOver},l({url:"/cpinfo/changeCpInfoCanOver",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:e.data.msg,type:"success"}):a.$message.error(e.data.msg),a.refresh()})},changeSettings:function(e){var t=this;if(this.settings.visible=!0,e.defaultPayTypeId.length>0&&0!==e.defaultPayTypeId){for(var a=e.defaultPayTypeId.split(","),r=[],o=0;o<a.length;o++)r.push(a[o]+"");this.settings.typeForm.defaultPayTypeId=r}else this.settings.typeForm.defaultPayTypeId=[];if(e.defaultWithdrawTypeId.length>0&&0!==e.defaultWithdrawTypeId){for(var s=e.defaultWithdrawTypeId.split(","),i=[],l=0;l<s.length;l++)i.push(s[l]+"");this.settings.typeForm.defaultWithdrawTypeId=i}else this.settings.typeForm.defaultWithdrawTypeId=[];this.settings.userName=e.userName,this.settings.appId=e.appId,this.settings.payFeeFix=e.payFeeFix,this.settings.payFeeRate=e.payFeeRate,this.settings.withdrawFeeFix=e.withdrawFeeFix,this.settings.withdrawFeeRate=e.withdrawFeeRate,this.settings.agentForm.agentId=e.agentId,this.$nextTick(function(){t.settings.confirmForm.confirmStatus=e.confirmStatus,t.settings.confirmForm.confirmMin=Number(.01*e.confirmMin).toFixed(0),t.settings.ipForm.ip=e.whiteIps})},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryCountryPageList:function(){var e=this;return new b.a(function(t){k({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()},handleSizeChange:function(e){this.page.pageSize=e,this.refresh()},filterHandler:function(e,t,a){var r=a.property;return String(t[r])===String(e)},resetGoogleSecret:function(e){console.log(e);var t,a=this;(t={appId:e.appId},l({url:"/cpinfo/resetGoogleSecret",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code&&a.$message(e.data.msg)})},changeWhiteIps:function(e){var t,a=this;(t={appId:e.appId,whiteIps:e.whiteIps},l({url:"/cpinfo/changeWhiteIps",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code&&a.$message(e.data.msg)})}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"商户",prop:"userName"}},[a("el-input",{attrs:{placeholder:"商户ID或名称"},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理商",prop:"agentId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.agentId,callback:function(t){e.$set(e.searchForm,"agentId",t)},expression:"searchForm.agentId"}},e._l(e.searchForm.agentOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"超额状态",prop:"canOver"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.canOver,callback:function(t){e.$set(e.searchForm,"canOver",t)},expression:"searchForm.canOver"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){return e.addCpinfo()}}},[e._v("添加商户")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"密匙"}},[a("span",[e._v(e._s(t.row.key))])]),e._v(" "),a("el-form-item",{attrs:{label:"谷歌秘钥"}},[a("span",[e._v(e._s(t.row.googleSecret))]),e._v(" "),a("el-link",{attrs:{disabled:""===t.row.googleSecret,underline:!1},on:{click:function(a){return e.resetGoogleSecret(t.row)}}},[e._v("重置\n            ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("span",[e._v(e._s(t.row.userPass))])]),e._v(" "),a("el-form-item",{attrs:{label:"信用额度"}},[a("span",[a("i",{staticClass:"el-icon-s-finance"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(Number(t.row.creditRemain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])])]),e._v(" "),a("el-form-item",{attrs:{label:"冻结"}},[a("span",[a("i",{staticClass:"el-icon-ice-cream-square"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(Number(t.row.frozenRemain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])])]),e._v(" "),a("el-form-item",{attrs:{label:"绑定Ip："}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{model:{value:t.row.whiteIps,callback:function(a){e.$set(t.row,"whiteIps",a)},expression:"props.row.whiteIps"}}),e._v(" "),a("el-link",{attrs:{underline:!1},on:{click:function(a){return e.changeWhiteIps(t.row)}}},[e._v("保存\n                ")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审核额度"}},[a("span",[a("i",{staticClass:"el-icon-ice-cream-square"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(Number(t.row.confirmMin/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])])]),e._v(" "),a("el-form-item",{attrs:{label:"扣减率"}},[a("span",[e._v(e._s(t.row.subRatio)+"%")])]),e._v(" "),a("el-form-item",{attrs:{label:"T+n"}},[a("span",[e._v(e._s(t.row.remainDelayDay))])]),e._v(" "),a("el-form-item",{attrs:{label:"代理商"}},[a("span",[e._v("\n                              "+e._s(t.row.agentUserName)+"\n                          ")])]),e._v(" "),a("el-form-item",{attrs:{label:"代理手续费"}},[a("span",[a("el-tag",{staticStyle:{"margin-bottom":"2px"},attrs:{type:"success",size:"small"}},[e._v(e._s(Number(t.row.agentPayFeeFix/100).toFixed(2))+"+"+e._s(t.row.agentPayFeeRate)+"%")]),e._v(" "),a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(Number(t.row.agentWithdrawFeeFix/100).toFixed(2))+"+"+e._s(t.row.agentWithdrawFeeRate)+"%")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"单笔范围"}},[a("span",[t.row.payRange&&""!=t.row.payRange?a("el-tag",{staticStyle:{"margin-bottom":"2px"},attrs:{type:"success",size:"small"}},[e._v(e._s(t.row.payRange))]):e._e(),e._v(" "),t.row.withdrawRange&&""!=t.row.withdrawRange?a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(t.row.withdrawRange))]):e._e()],1)])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"商户ID",sortable:"","column-key":"appId",filters:e.filterList,"filter-method":e.filterHandler,"min-width":"120"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家"}}),e._v(" "),a("el-table-column",{attrs:{label:"余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-rs"}),e._v(" "),a("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(Number(t.row.remain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"可用余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-rs"}),e._v(" "),a("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(Number(t.row.actualRemain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"待结算"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"1px"}},[e._v(e._s(Number((t.row.remain-t.row.actualRemain)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"充值/提现手续费","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{"margin-bottom":"2px"},attrs:{type:"success",size:"small"}},[e._v("\n          "+e._s(Number(t.row.payFeeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.payFeeRate).toFixed(0))+"%\n        ")]),e._v(" "),a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(Number(t.row.withdrawFeeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.withdrawFeeRate).toFixed(0))+"%\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.DefaultPayTypeId?a("span",[e._v("默认")]):[a("span",{staticStyle:{display:"block"}},[e._v("通道 "+e._s(t.row.defaultPayTypeId))]),e._v(" "),a("span",[e._v(e._s(t.row.payTypeName))])]]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"提现通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.defaultWithdrawTypeId?a("span",[e._v("默认")]):[a("span",{staticStyle:{display:"block"}},[e._v("通道 "+e._s(t.row.defaultWithdrawTypeId))]),e._v(" "),a("span",[e._v(e._s(t.row.withdrawTypeName))])]]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用提现"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.canWithdraw?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(a){return e.changeCanWithdraw(t.row)}},model:{value:t.row.canWithdraw,callback:function(a){e.$set(t.row,"canWithdraw",a)},expression:"scope.row.canWithdraw"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用超额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.canOver?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(a){return e.changeCanOver(t.row)}},model:{value:t.row.canOver,callback:function(a){e.$set(t.row,"canOver",a)},expression:"scope.row.canOver"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.changeSettings(t.row)}}},[e._v("设置")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{"current-page":e.page.cur,"page-sizes":[10,20,50,100,200],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.page,"cur",t)},"update:current-page":function(t){return e.$set(e.page,"cur",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加商户",modal:!1,visible:e.dialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"商户名称","label-width":e.dialog.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{autocomplete:"new-password"},model:{value:e.dialog.form.userName,callback:function(t){e.$set(e.dialog.form,"userName",t)},expression:"dialog.form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.dialog.formLabelWidth,prop:"userPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"new-password"},model:{value:e.dialog.form.userPass,callback:function(t){e.$set(e.dialog.form,"userPass",t)},expression:"dialog.form.userPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.dialog.formLabelWidth,prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.checkPass,callback:function(t){e.$set(e.dialog.form,"checkPass",t)},expression:"dialog.form.checkPass"}})],1),e._v(" "),this.dialog.isInsert?a("el-form-item",{attrs:{label:"所属国家","label-width":e.dialog.formLabelWidth,prop:"checkCountry"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.country,callback:function(t){e.$set(e.dialog.form,"country",t)},expression:"dialog.form.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"充值范围","label-width":e.dialog.formLabelWidth,prop:"payRange"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.payRange,callback:function(t){e.$set(e.dialog.form,"payRange",t)},expression:"dialog.form.payRange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提现范围","label-width":e.dialog.formLabelWidth,prop:"withdrawRange"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.withdrawRange,callback:function(t){e.$set(e.dialog.form,"withdrawRange",t)},expression:"dialog.form.withdrawRange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"扣减率","label-width":e.dialog.formLabelWidth,prop:"subRatio"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.subRatio,callback:function(t){e.$set(e.dialog.form,"subRatio",e._n(t))},expression:"dialog.form.subRatio"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"T+n","label-width":e.dialog.formLabelWidth,prop:"remainDelayDay"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.remainDelayDay,callback:function(t){e.$set(e.dialog.form,"remainDelayDay",e._n(t))},expression:"dialog.form.remainDelayDay"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付固定手续费","label-width":e.dialog.formLabelWidth,prop:"payFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.payFeeFix,callback:function(t){e.$set(e.dialog.form,"payFeeFix",t)},expression:"dialog.form.payFeeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付手续费费率","label-width":e.dialog.formLabelWidth,prop:"payFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.payFeeRate,callback:function(t){e.$set(e.dialog.form,"payFeeRate",t)},expression:"dialog.form.payFeeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提现固定手续费","label-width":e.dialog.formLabelWidth,prop:"withdrawFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.withdrawFeeFix,callback:function(t){e.$set(e.dialog.form,"withdrawFeeFix",t)},expression:"dialog.form.withdrawFeeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提现手续费费率","label-width":e.dialog.formLabelWidth,prop:"withdrawFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.withdrawFeeRate,callback:function(t){e.$set(e.dialog.form,"withdrawFeeRate",t)},expression:"dialog.form.withdrawFeeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理支付固定手续费","label-width":e.dialog.formLabelWidth,prop:"agentPayFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentPayFeeFix,callback:function(t){e.$set(e.dialog.form,"agentPayFeeFix",t)},expression:"dialog.form.agentPayFeeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理支付手续费费率","label-width":e.dialog.formLabelWidth,prop:"agentPayFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentPayFeeRate,callback:function(t){e.$set(e.dialog.form,"agentPayFeeRate",t)},expression:"dialog.form.agentPayFeeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理提现固定手续费","label-width":e.dialog.formLabelWidth,prop:"agentWithdrawFeeFix"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentWithdrawFeeFix,callback:function(t){e.$set(e.dialog.form,"agentWithdrawFeeFix",t)},expression:"dialog.form.agentWithdrawFeeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理提现手续费费率","label-width":e.dialog.formLabelWidth,prop:"agentWithdrawFeeRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.agentWithdrawFeeRate,callback:function(t){e.$set(e.dialog.form,"agentWithdrawFeeRate",t)},expression:"dialog.form.agentWithdrawFeeRate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置",modal:!1,visible:e.settings.visible,width:"35rem","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.settings,"visible",t)},closed:e.closeSettingsDialog}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(e){}},model:{value:e.settings.activeName,callback:function(t){e.$set(e.settings,"activeName",t)},expression:"settings.activeName"}},[a("el-tab-pane",{attrs:{label:"余额调整",name:"first"}},[a("el-form",{ref:"balanceForm",attrs:{model:e.settings.balanceForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.password,callback:function(t){e.$set(e.settings.balanceForm,"password",t)},expression:"settings.balanceForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.verifyCode,callback:function(t){e.$set(e.settings.balanceForm,"verifyCode",t)},expression:"settings.balanceForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余额(-/+)",prop:"remain"}},[a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.settings.balanceForm.remain,callback:function(t){e.$set(e.settings.balanceForm,"remain",t)},expression:"settings.balanceForm.remain"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{span:13}},[a("el-tag",{attrs:{type:"success"}},[e._v("\n                "+e._s(Number(e.settings.payFeeFix/100).toFixed(2))+"+"+e._s(e.settings.payFeeRate)+"%\n              ")]),e._v(" "),a("el-tag",{attrs:{type:"danger"}},[e._v("\n                "+e._s(Number(e.settings.withdrawFeeFix/100).toFixed(2))+"+"+e._s(e.settings.withdrawFeeRate)+"%\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"修改说明",prop:"notes"}},[a("el-input",{model:{value:e.settings.balanceForm.notes,callback:function(t){e.$set(e.settings.balanceForm,"notes",t)},expression:"settings.balanceForm.notes"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("balanceForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("balanceForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"信用设置",name:"second"}},[a("el-form",{ref:"creditForm",attrs:{model:e.settings.creditForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.creditForm.password,callback:function(t){e.$set(e.settings.creditForm,"password",t)},expression:"settings.creditForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.creditForm.verifyCode,callback:function(t){e.$set(e.settings.creditForm,"verifyCode",t)},expression:"settings.creditForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"信用额度",prop:"remain"}},[a("el-input",{model:{value:e.settings.creditForm.remain,callback:function(t){e.$set(e.settings.creditForm,"remain",t)},expression:"settings.creditForm.remain"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("creditForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("creditForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"人工审核",name:"third"}},[a("el-form",{ref:"confirmForm",attrs:{model:e.settings.confirmForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"重复提现审核"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.settings.confirmForm.confirmStatus,callback:function(t){e.$set(e.settings.confirmForm,"confirmStatus",t)},expression:"settings.confirmForm.confirmStatus"}},[a("el-option",{attrs:{label:"开启",value:1}}),e._v(" "),a("el-option",{attrs:{label:"关闭",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"起点额度",prop:"confirmMin"}},[a("el-input",{model:{value:e.settings.confirmForm.confirmMin,callback:function(t){e.$set(e.settings.confirmForm,"confirmMin",t)},expression:"settings.confirmForm.confirmMin"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("confirmForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("confirmForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"代理商配置",name:"fourth"}},[a("el-form",{ref:"agentForm",attrs:{model:e.settings.agentForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"代理商",prop:"agentId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.settings.agentForm.agentId,callback:function(t){e.$set(e.settings.agentForm,"agentId",t)},expression:"settings.agentForm.agentId"}},e._l(e.searchForm.agentOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("agentForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("agentForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"通道指定",name:"fifth"}},[a("el-form",{ref:"typeForm",attrs:{model:e.settings.typeForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"支付通道"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"",filterable:""},model:{value:e.settings.typeForm.defaultPayTypeId,callback:function(t){e.$set(e.settings.typeForm,"defaultPayTypeId",t)},expression:"settings.typeForm.defaultPayTypeId"}},[a("el-option",{attrs:{label:"请选择",value:"0"}}),e._v(" "),e._l(e.settings.payTypeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:0==t.status}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name))])])})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现通道"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"",filterable:""},model:{value:e.settings.typeForm.defaultWithdrawTypeId,callback:function(t){e.$set(e.settings.typeForm,"defaultWithdrawTypeId",t)},expression:"settings.typeForm.defaultWithdrawTypeId"}},[a("el-option",{attrs:{label:"请选择",value:"0"}}),e._v(" "),e._l(e.settings.withdrawTypeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:0==t.status}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name))])])})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("typeForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("typeForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"绑定IP",name:"sixth"}},[a("el-form",{ref:"ipForm",attrs:{model:e.settings.ipForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Ip地址"}},[a("el-input",{model:{value:e.settings.ipForm.ip,callback:function(t){e.$set(e.settings.ipForm,"ip",t)},expression:"settings.ipForm.ip"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ipForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ipForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var ae={name:"agentList",data:function(){return{fullscreenLoading:!0,searchForm:{userName:"",status:"",canOver:"",country:"",page:0,limit:10},tableData:[],dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",userName:"",password:"",passwordNew:"",country:""}},page:{pageSize:10,total:0,cur:1},countryOptions:[],agentOptions:[],settings:{visible:!1,activeName:"first",userName:"",id:0,balanceForm:{password:"",verifyCode:"",remain:0,notes:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()},trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]}}},created:function(){this.refresh(),this.queryCountryPageList()},methods:{refresh:function(){var e,t=this;(e=t.searchForm,l({url:"/agent/queryAgentPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},pageChange:function(e){this.page.cur=e,this.refresh()},search:function(){this.page.cur=1,this.refresh()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e?t.saveAgent():"balanceForm"===e?t.saveBalance():"creditForm"===e?t.saveCredit():"agentForm"===e?t.saveAgent():"typeForm"===e?t.saveType():"confirmForm"===e&&t.saveConfirmMin()})},saveAgent:function(){var e=this,t=this.dialog.isInsert?"添加":"编辑",a=this;this.$confirm("确定"+t+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(e.dialog.isInsert?(r=a.dialog.form,l({url:"/agent/addAgent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(r)})):function(e){return l({url:"/agent/updateAgent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(a.dialog.form)).then(function(e){0===e.data.code?a.$message({message:t+"成功",type:"success"}):(t=t+"失败，"+e.data.msg,a.$message.error(t)),a.refresh(),a.closeDialog()})})},saveBalance:function(){var e=this,t=this;this.$confirm("确定修改"+this.settings.userName+"账户余额吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,r=t.settings.balanceForm;r.remain<0&&(r.remain=Math.abs(r.remain)),r.id=t.settings.id(e.settings.balanceForm.remain>=0?(a=r,l({url:"/agent/addAgentRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})):function(e){return l({url:"/agent/subtractAgentRemain",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(r)).then(function(e){0===e.data.code?t.$message({message:e.data.msg,type:"success"}):t.$message.error(e.data.msg),t.refresh(),t.closeSettingsDialog()})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){var a=this;this.$nextTick(function(){a.$refs[t].clearValidate(),a.$refs[t].resetFields()}),Q()(e).forEach(function(t){var a=J()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")})},handleEdit:function(e,t){var a=this;Q()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.id=t.id,this.dialog.form.userName=t.userName,this.dialog.form.password=t.password,this.dialog.form.passwordNew=t.passwordNew,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},l({url:"/agent/deleteAgent",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},changeStatus:function(e){var t,a=this;(t={id:e.id,status:e.status},l({url:"/agent/changeAgentStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeSettings:function(e){this.settings.visible=!0,this.settings.userName=e.userName,this.settings.id=e.id},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm")},queryCountryPageList:function(){var e=this;return new b.a(function(t){k({type:"country"}).then(function(t){0===t.data.code&&(e.countryOptions=[],t.data.data.forEach(function(t,a){e.countryOptions.push({label:t.name,value:t.value})}))})})},addCpinfo:function(){this.dialog.visible=!0},beforeCloseDialog:function(){this.$refs.ruleForm.resetFields()}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"代理商ID或账户名",prop:"id"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"国家",prop:"country"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){return e.addCpinfo()}}},[e._v("添加代理商")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"密码"}},[a("span",[e._v(e._s(t.row.userPass))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"代理商ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{label:"余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-rs"}),e._v(" "),a("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(Number(t.row.remain/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"国家"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.changeSettings(t.row)}}},[e._v("设置")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加代理商",modal:!1,visible:e.dialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"代理商名称","label-width":e.dialog.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{autocomplete:"new-password"},model:{value:e.dialog.form.userName,callback:function(t){e.$set(e.dialog.form,"userName",t)},expression:"dialog.form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.dialog.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"new-password"},model:{value:e.dialog.form.password,callback:function(t){e.$set(e.dialog.form,"password",t)},expression:"dialog.form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.dialog.formLabelWidth,prop:"passwordNew"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.passwordNew,callback:function(t){e.$set(e.dialog.form,"passwordNew",t)},expression:"dialog.form.passwordNew"}})],1),e._v(" "),this.dialog.isInsert?a("el-form-item",{attrs:{label:"所属国家","label-width":e.dialog.formLabelWidth,prop:"checkCountry"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.country,callback:function(t){e.$set(e.dialog.form,"country",t)},expression:"dialog.form.country"}},e._l(this.countryOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置",modal:!1,visible:e.settings.visible,width:"27rem"},on:{"update:visible":function(t){return e.$set(e.settings,"visible",t)},closed:e.closeSettingsDialog}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(e){}},model:{value:e.settings.activeName,callback:function(t){e.$set(e.settings,"activeName",t)},expression:"settings.activeName"}},[a("el-tab-pane",{attrs:{label:"余额调整",name:"first"}},[a("el-form",{ref:"balanceForm",attrs:{model:e.settings.balanceForm,rules:e.settings.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.password,callback:function(t){e.$set(e.settings.balanceForm,"password",t)},expression:"settings.balanceForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[a("el-input",{attrs:{type:"password"},model:{value:e.settings.balanceForm.verifyCode,callback:function(t){e.$set(e.settings.balanceForm,"verifyCode",t)},expression:"settings.balanceForm.verifyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"余额(-/+)",prop:"remain"}},[a("el-col",{attrs:{span:10}},[a("el-input",{model:{value:e.settings.balanceForm.remain,callback:function(t){e.$set(e.settings.balanceForm,"remain",t)},expression:"settings.balanceForm.remain"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"修改说明",prop:"notes"}},[a("el-input",{model:{value:e.settings.balanceForm.notes,callback:function(t){e.$set(e.settings.balanceForm,"notes",t)},expression:"settings.balanceForm.notes"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("balanceForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("balanceForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var oe={name:"payTypeList",data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1===t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fullscreenLoading:!0,tableData:[],types:[],testPayVisible:!1,Successdialog:!1,isDisabled:!1,Sencond:10,testPayUrl:"",testPayNumber:"",page:{pageSize:10,total:0,cur:1},type:[],dialog:{isInsert:!0,visible:!1,form:{name:"",outName:"",params:"",feeFix:"",feeRate:"",sort:"",types:"",workTime:"",range:"",currency:"",thirdRange:""}},dialogTest:{isInsert:!0,visible:!1,form:{appId:"",amount:"",type:"",payTypeId:""}},searchForm:{name:"",stauts:"",type:[],types:""},rulesTest:{Name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],Params:[{required:!0,message:"请输入接口参数",trigger:"blur"}],FeeFix:[{validator:e,trigger:"blur"}],FeeRate:[{validator:e,trigger:"blur"}],Type:[{type:"array",required:!0,message:"请至少选择一种方式",trigger:"change"}],Currency:[{required:!0,message:"请选择货币种类",trigger:"change"}],Range:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],ThirdRange:[{required:!0,message:"请输入上游单笔限额",trigger:"blur"}]},rules:{out_trade_no:[{required:!0,message:"",trigger:"blur"}],payUrl:[{required:!0,message:"",trigger:"blur"}]}}},created:function(){var e=this;return x()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.refresh();case 1:case"end":return t.stop()}},t,e)}))()},methods:{refresh:function(){var e,t=this;this.searchForm.types=this.type.sort(function(e,t){return e-t}).join(","),(e={page:this.page.cur,limit:this.page.pageSize,status:this.searchForm.status,name:this.searchForm.name,types:this.searchForm.types},l({url:"/paytype/queryPayTypePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":I(a)},pageChange:function(e){this.page.cur=e,this.refresh()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.status?"success-row":"warning-row"},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.name=t.name,this.dialog.form.outName=t.outName,this.dialog.form.params=t.params,this.dialog.form.status=t.status,this.dialog.form.feeRate=t.feeRate,this.dialog.form.sort=t.sort,this.dialog.form.workTime=t.workTime,this.dialog.form.range=t.range,this.dialog.form.currency=t.currency,this.dialog.form.thirdRange=t.thirdRange,this.dialog.form.types=t.types,this.type=""===t.types||void 0===t.types?[]:t.types.indexOf(",")>0?t.types.replaceAll("1","银行卡").replaceAll("2","电子钱包").replaceAll("3","UPI").replaceAll("7","HTML").split(","):[t.types],this.dialog.form.feeFix=Number(t.feeFix/100).toFixed(2),this.dialog.visible=!0,this.dialog.isInsert=!1},handlePayTest:function(e,t){if(1===t.status){t.types.split(",")[0],t.range.split("-")[0],t.currency;var a=t.id;this.dialogTest.form.payTypeId=a,this.dialogTest.visible=!0}else this.$message({message:"该商户未启用！",type:"warning"})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除通道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},l({url:"/paytype/deletePayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;r.dialog.form.types=r.type.toString().replace("银行卡","1").replace("电子钱包","2").replace("UPI","3").replace("HTML","7")(t.dialog.isInsert?(e=r.dialog.form,l({url:"/paytype/addPayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})):function(e){return l({url:"/paytype/updatePayType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(r.dialog.form)).then(function(e){0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.type=[],r.refresh(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){var e=this.dialog.form;Q()(e).forEach(function(t){var a=J()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),e.stauts=-1,this.type=[],this.dialog.visible=!1,this.dialog.isInsert=!0},search:function(){this.page.cur=1,this.refresh()},testPay:function(){var e=this;e.testPayUrl="",e.testPayNumber="",axios({method:"post",url:"https://geepay.site/appclient/testPay.do",data:"appId="+this.dialogTest.form.appId+"&amount="+this.dialogTest.form.amount+"&type="+this.dialogTest.form.type+"&payTypeId="+this.dialogTest.form.payTypeId}).then(function(t){var a=t.data;""!==a?a.toString().startsWith("http")?(e.$message("获得支付链接成功"),e.testPayUrl=a,e.Successdialog=!0):(e.testPayNumber=a,e.Successdialog=!0):e.$message("未找到合适通道")}).catch(function(e){console.log(e)})},getSencond:function(e){var t=this,a=window.setInterval(function(){--t.Sencond,0===t.Sencond&&(window.clearInterval(a),window.open(e))},1e3)},sendMsg:function(){window.close()},returnPayUrl:function(){window.open(this.testPayUrl)},changeStatus:function(e){var t,a=this;(t={id:e.id,status:e.status},l({url:"/paytype/changePayTypeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"商户",prop:"name"}},[a("el-input",{attrs:{placeholder:"通道ID或名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"银行卡",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电子钱包",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"UPI",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"PIX",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"CLABE",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"HTML",value:"7"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialog.visible=!0}}},[e._v("添加通道")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"配置参数"}},[a("span",[e._v(e._s(t.row.params))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"通道ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outName",label:"别名"}}),e._v(" "),a("el-table-column",{attrs:{label:"手续费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",size:"small"}},[e._v(e._s(Number(t.row.feeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.feeRate).toFixed(2))+"%\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{label:"充值方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.types&&-1!=t.row.types.indexOf("1")?a("el-tag",{attrs:{size:"mini"}},[e._v("银行卡")]):e._e(),e._v(" "),t.row.types&&-1!=t.row.types.indexOf("2")?a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("电子钱包")]):e._e(),e._v(" "),t.row.types&&-1!=t.row.types.indexOf("3")?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("UPI\n        ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单笔限额",prop:"range"}}),e._v(" "),a("el-table-column",{attrs:{label:"工作时间",prop:"workTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"货币类型",prop:"currency"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handlePayTest(t.$index,t.row)}}},[e._v("支付测试")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"通道信息",visible:e.dialog.visible},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-dialog",{attrs:{title:"提示",visible:e.Successdialog,"show-close":!1,"close-on-click-modal":!0,"close-on-press-escape":!1,width:"30%",center:""},on:{"update:visible":function(t){e.Successdialog=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Successdialog=!1}}},[e._v("立即关闭")])],1)]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.dialog.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"通道名称",prop:"name"}},[a("el-input",{model:{value:e.dialog.form.name,callback:function(t){e.$set(e.dialog.form,"name",t)},expression:"dialog.form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通道别名",prop:"outName"}},[a("el-input",{model:{value:e.dialog.form.outName,callback:function(t){e.$set(e.dialog.form,"outName",t)},expression:"dialog.form.outName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口参数",prop:"params"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.dialog.form.params,callback:function(t){e.$set(e.dialog.form,"params",t)},expression:"dialog.form.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（固定）",prop:"feeFix"}},[a("el-input",{model:{value:e.dialog.form.feeFix,callback:function(t){e.$set(e.dialog.form,"feeFix",t)},expression:"dialog.form.feeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（费率）",prop:"feeRate"}},[a("el-input",{model:{value:e.dialog.form.feeRate,callback:function(t){e.$set(e.dialog.form,"feeRate",t)},expression:"dialog.form.feeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权重",prop:"sort"}},[a("el-input-number",{attrs:{min:0},model:{value:e.dialog.form.sort,callback:function(t){e.$set(e.dialog.form,"sort",t)},expression:"dialog.form.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"充值方式",prop:"type"}},[a("el-checkbox-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-checkbox",{attrs:{label:"银行卡",name:"type"}},[e._v("银行卡")]),e._v(" "),a("el-checkbox",{attrs:{label:"电子钱包",name:"type"}},[e._v("电子钱包")]),e._v(" "),a("el-checkbox",{attrs:{label:"UPI",name:"type"}},[e._v("UPI")]),e._v(" "),a("el-checkbox",{attrs:{label:"HTML",name:"type"}},[e._v("HTML")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工作时间",prop:"workTime"}},[a("el-input",{model:{value:e.dialog.form.workTime,callback:function(t){e.$set(e.dialog.form,"workTime",t)},expression:"dialog.form.workTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单笔限额",prop:"range"}},[e.dialog.isInsert?e._e():a("el-tag",{attrs:{type:"info"}},[e._v("上游："+e._s(e.dialog.form.thirdRange))]),e._v(" "),a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.range,callback:function(t){e.$set(e.dialog.form,"range",t)},expression:"dialog.form.range"}})],1),e._v(" "),e.dialog.isInsert?a("el-form-item",{attrs:{label:"上游限额",prop:"thirdRange"}},[a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.thirdRange,callback:function(t){e.$set(e.dialog.form,"thirdRange",t)},expression:"dialog.form.thirdRange"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"货币类型",prop:"currency"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialog.form.currency,callback:function(t){e.$set(e.dialog.form,"currency",t)},expression:"dialog.form.currency"}},[a("el-option",{attrs:{label:"INR",value:"INR"}}),e._v(" "),a("el-option",{attrs:{label:"MXN",value:"MXN"}}),e._v(" "),a("el-option",{attrs:{label:"BRL",value:"BRL"}}),e._v(" "),a("el-option",{attrs:{label:"USD",value:"USD"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"通道信息",visible:e.dialogTest.visible},on:{"update:visible":function(t){return e.$set(e.dialogTest,"visible",t)}}},[a("el-dialog",{attrs:{title:"提示",visible:e.Successdialog,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,modal:!1,width:"30%",center:""},on:{"update:visible":function(t){e.Successdialog=t}}},[e.testPayUrl?a("span",{staticStyle:{"font-size":"16px"}},[e._v("获取到支付链接："),a("span",{staticStyle:{color:"#01AAED"}},[e._v(e._s(e.testPayUrl))])]):e._e(),e._v(" "),e.testPayNumber?a("span",{staticStyle:{"font-size":"16px"}},[e._v("获取到转账账号:"+e._s(e.testPayNumber))]):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Successdialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.returnPayUrl()}}},[e._v("立即跳转")])],1)]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.dialogTest.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"测试商户Id"}},[a("el-input",{model:{value:e.dialogTest.form.appId,callback:function(t){e.$set(e.dialogTest.form,"appId",t)},expression:"dialogTest.form.appId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"金额"}},[a("el-input",{model:{value:e.dialogTest.form.amount,callback:function(t){e.$set(e.dialogTest.form,"amount",t)},expression:"dialogTest.form.amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.dialogTest.form.type,callback:function(t){e.$set(e.dialogTest.form,"type",t)},expression:"dialogTest.form.type"}},[a("el-option",{attrs:{label:"银行卡",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电子钱包",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"UPI",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"PIX",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"HTML",value:"7"}})],1)],1)],1),e._v(" "),a("el-button",{on:{click:function(t){e.dialogTest.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.testPay()}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var ie={name:"withdrawTypeList",data:function(){var e=function(e,t,a){"number"!=typeof t?null!=t&&-1===t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fullscreenLoading:!0,tableData:[],page:{pageSize:10,total:0,cur:1},dialog:{isInsert:!0,visible:!1,form:{name:"",outName:"",params:"",feeFix:"",feeRate:"",sort:"",types:"",workTime:"",range:"",currency:"",thirdRange:""}},type:[],searchForm:{name:"",stauts:"",type:[],types:""},rules:{name:[{required:!0,message:"请输入通道名称",trigger:"blur"}],outName:[{required:!0,message:"请输入通道别名",trigger:"blur"}],params:[{required:!0,message:"请输入接口参数",trigger:"blur"}],feeFix:[{validator:e,trigger:"blur"}],feeRate:[{validator:e,trigger:"blur"}],currency:[{required:!0,message:"请选择货币种类",trigger:"change"}],range:[{required:!0,message:"请输入单笔限额",trigger:"blur"}],thirdRange:[{required:!0,message:"请输入上游单笔限额",trigger:"blur"}]}}},created:function(){var e=this;return x()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.refresh();case 1:case"end":return t.stop()}},t,e)}))()},methods:{refresh:function(){var e,t=this;this.searchForm.types=this.searchForm.type.sort(function(e,t){return e-t}).join(","),(e={page:this.page.cur,limit:this.page.pageSize,status:this.searchForm.status,name:this.searchForm.name,types:this.searchForm.types},l({url:"/withdrawtype/queryWithdrawTypePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.count)})},dateFormat:function(e,t){var a=e[t.property];return void 0===a||null==a?"":I(a)},pageChange:function(e){this.page.cur=e,this.refresh()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.status?"success-row":"warning-row"},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.name=t.name,this.dialog.form.outName=t.outName,this.dialog.form.params=t.params,this.dialog.form.status=t.status,this.dialog.form.feeRate=t.feeRate,this.dialog.form.sort=t.sort,this.dialog.form.workTime=t.workTime,this.dialog.form.range=t.range,this.dialog.form.currency=t.currency,this.dialog.form.thirdRange=t.thirdRange,this.dialog.form.types=t.types,this.type=t.types.replace("1","银行卡").replace("2","电子钱包").replace("3","UPI").split(","),this.dialog.form.feeFix=Number(t.feeFix/100).toFixed(2),this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除通道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},l({url:"/withdrawtype/deleteWithdrawType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.refresh()})})},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;r.dialog.form.types=r.type.toString().replace("银行卡","1").replace("电子钱包","2").replace("UPI","3")(t.dialog.isInsert?(e=r.dialog.form,l({url:"/withdrawtype/addWithdrawType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})):function(e){return l({url:"/withdrawtype/updateWithdrawType",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(r.dialog.form)).then(function(e){0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.refresh(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields(),this.type=[]},closeDialog:function(){var e=this.dialog.form;Q()(e).forEach(function(t){var a=J()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),e.stauts=-1,this.type=[],this.dialog.visible=!1,this.dialog.isInsert=!0},search:function(){this.page.cur=1,this.refresh()},changeStatus:function(e){var t,a=this;(t={id:e.id,status:e.status},l({url:"/withdrawtype/changeWithdrawTypeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"商户",prop:"name"}},[a("el-input",{attrs:{placeholder:"通道ID或名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"银行卡",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电子钱包",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"UPI",value:"3"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialog.visible=!0}}},[e._v("添加通道")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"配置参数"}},[a("span",[e._v(e._s(t.row.params))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"通道ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outName",label:"通道别名"}}),e._v(" "),a("el-table-column",{attrs:{label:"手续费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(Number(t.row.feeFix/100).toFixed(2))+"+"+e._s(Number(100*t.row.feeRate).toFixed(2))+"%\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{label:"提现方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=t.row.types.indexOf("1")?a("el-tag",{attrs:{size:"mini"}},[e._v("银行卡")]):e._e(),e._v(" "),-1!=t.row.types.indexOf("2")?a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("电子钱包")]):e._e(),e._v(" "),-1!=t.row.types.indexOf("3")?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("UPI")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单笔限额",prop:"range"}}),e._v(" "),a("el-table-column",{attrs:{label:"工作时间",prop:"worktime"}}),e._v(" "),a("el-table-column",{attrs:{label:"货币类型",prop:"currency"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.page.total,"current-page":e.page.cur},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"通道信息",visible:e.dialog.visible},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.dialog.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"通道名称",prop:"name"}},[a("el-input",{model:{value:e.dialog.form.name,callback:function(t){e.$set(e.dialog.form,"name",t)},expression:"dialog.form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通道别名",prop:"outName"}},[a("el-input",{model:{value:e.dialog.form.outName,callback:function(t){e.$set(e.dialog.form,"outName",t)},expression:"dialog.form.outName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口参数",prop:"params"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.dialog.form.params,callback:function(t){e.$set(e.dialog.form,"params",t)},expression:"dialog.form.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（固定）",prop:"feeFix"}},[a("el-input",{model:{value:e.dialog.form.feeFix,callback:function(t){e.$set(e.dialog.form,"feeFix",t)},expression:"dialog.form.feeFix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费（费率）",prop:"feeRate"}},[a("el-input",{model:{value:e.dialog.form.feeRate,callback:function(t){e.$set(e.dialog.form,"feeRate",t)},expression:"dialog.form.feeRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权重",prop:"sort"}},[a("el-input-number",{attrs:{min:0},model:{value:e.dialog.form.sort,callback:function(t){e.$set(e.dialog.form,"sort",t)},expression:"dialog.form.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提现方式",prop:"type"}},[a("el-checkbox-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-checkbox",{attrs:{label:"银行卡",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"电子钱包",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"UPI",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工作时间",prop:"workTime"}},[a("el-input",{model:{value:e.dialog.form.workTime,callback:function(t){e.$set(e.dialog.form,"workTime",t)},expression:"dialog.form.workTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单笔限额",prop:"range"}},[e.dialog.isInsert?e._e():a("el-tag",{attrs:{type:"info"}},[e._v("上游："+e._s(e.dialog.form.thirdRange))]),e._v(" "),a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.range,callback:function(t){e.$set(e.dialog.form,"range",t)},expression:"dialog.form.range"}})],1),e._v(" "),e.dialog.isInsert?a("el-form-item",{attrs:{label:"上游限额",prop:"thirdRange"}},[a("el-input",{attrs:{placeholder:"例：100-500000"},model:{value:e.dialog.form.thirdRange,callback:function(t){e.$set(e.dialog.form,"thirdRange",t)},expression:"dialog.form.thirdRange"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"货币类型",prop:"currency"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialog.form.currency,callback:function(t){e.$set(e.dialog.form,"currency",t)},expression:"dialog.form.currency"}},[a("el-option",{attrs:{label:"INR",value:"INR"}}),e._v(" "),a("el-option",{attrs:{label:"BRL",value:"BRL"}}),e._v(" "),a("el-option",{attrs:{label:"MXN",value:"MXN"}}),e._v(" "),a("el-option",{attrs:{label:"IDR",value:"IDR"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var ne={name:"cpInfoTotalStatistics",data:function(){return{fullscreenLoading:!1,createTime:[],searchForm:{id:null,appId:"",statDay:"",page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){var t=void 0;return t=this.pickerOptionsStartCreate?new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1:Date.now()-864e5,e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",formLabelWidth:120,sending:!1}},created:function(){this.queryCpInfoStatisticsPageList()},methods:{queryCpInfoStatisticsPageList:function(){var e=this;return this.fullscreenLoading=!0,new b.a(function(t){var a;(a=e.searchForm,l({url:"/cpinfo/queryCpInfoStatisticsPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],o=!0,s=!1,i=void 0;try{for(var l,n=v()(a);!(o=(l=n.next()).done);o=!0){var c=l.value;c.totalPay=N(c.totalPay),c.totalPayFee=N(c.totalPayFee),c.totalWithdraw=N(c.totalWithdraw),c.totalWithdrawFee=N(c.totalWithdrawFee),r.push(c)}}catch(e){s=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw i}}e.tableData=r,e.fullscreenLoading=!1}})})},search:function(){this.searchForm.page=1,this.queryCpInfoStatisticsPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[]},pageChange:function(e){this.searchForm.page=e,this.queryCpInfoStatisticsPageList()}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appId"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.appId,callback:function(t){e.$set(e.searchForm,"appId",t)},expression:"searchForm.appId"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPay",label:"总代收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPayFee",label:"代收手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPayNum",label:"代收笔数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalWithdraw",label:"总代付",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalWithdrawFee",label:"代付手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalWithdrawNum",label:"代付笔数",align:"center"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var de={name:"cpInfoDailyStatistics",data:function(){return{fullscreenLoading:!1,createTime:[],appIdsStr:"",searchForm:{id:null,appIds:[],statDays:[],page:1,limit:10,rowIndex:0},tableData:[],total:0,pickerOptionsStartCreate:{},pickerOptionsEndCreate:{disabledDate:function(e){if(this.pickerOptionsStartCreate)var t=new Date(this.pickerOptionsStartCreate).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",formLabelWidth:120,sending:!1}},watch:{tableData:{handler:function(e,t){this.$nextTick(function(){var e=document.getElementsByClassName("el-table__footer-wrapper")[0];e.setAttribute("style",""),e.getElementsByTagName("tr")[0].childNodes.forEach(function(e){e.setAttribute("style",";font-size:0.8rem;font-weight: bold")})})},immediate:!0,deep:!0}},created:function(){this.queryCpStatPageList()},methods:{queryCpStatPageList:function(){var e=this;this.fullscreenLoading=!0;var t=/^,|，| $/,a=String(e.appIdsStr);return""!==a?t.test(a)?e.searchForm.appIds=a.split(t):(e.searchForm.appIds=[],e.searchForm.appIds.push(a)):e.searchForm.appIds=null,new b.a(function(t){var a;(a=e.searchForm,l({url:"/cpstat/queryCpStatPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],o=!0,s=!1,i=void 0;try{for(var l,n=v()(a);!(o=(l=n.next()).done);o=!0){var c=l.value;c.payAmount=N(c.payAmount),c.payFee=N(c.payFee),c.withdrawAmount=N(c.withdrawAmount),c.withdrawFee=N(c.withdrawFee),r.push(c)}}catch(e){s=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw i}}e.tableData=r,e.fullscreenLoading=!1}})})},handleSizeChange:function(e){this.searchForm.limit=e,this.queryCpStatPageList()},search:function(){this.searchForm.page=1,this.queryCpStatPageList()},resetForm:function(e){this.$refs[e].resetFields(),this.createTime=[],"searchForm"===e&&(this.appIdsStr="",this.searchForm.appIds=[],this.searchForm.statDays=[])},pageChange:function(e){this.searchForm.page=e,this.queryCpStatPageList()},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(0!==t){if(1!==t){var o=a.map(function(t){return Number(t[e.property])});o.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=o.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]+=" ")}}else r[t]="合计"}),r[2]=Number(r[2]).toFixed(2),r[3]=Number(r[3]).toFixed(2),r[5]=Number(r[5]).toFixed(2),r[6]=Number(r[6]).toFixed(2),r[8]=Number(r[2]-r[3]-r[5]-r[6]).toFixed(2),r}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"商户Id",prop:"appIds"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.appIdsStr,callback:function(t){e.appIdsStr=t},expression:"appIdsStr"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"日期",prop:"statDay"}},[a("el-date-picker",{attrs:{type:"dates",placeholder:"选择日期","value-format":"yyyyMMdd",multiple:""},model:{value:e.searchForm.statDays,callback:function(t){e.$set(e.searchForm,"statDays",t)},expression:"searchForm.statDays"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{size:"medium",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini","show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"appId",label:"商户Id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statDay",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payAmount",label:"总代收",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payFee",label:"代收手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"代收笔数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"总代付",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawFee",label:"代付手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawNum",label:"代付笔数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"核算",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Number(t.row.payAmount-t.row.payFee-t.row.withdrawAmount-t.row.withdrawFee).toFixed(2))+"\n          ")]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)]],2)},staticRenderFns:[]};var me={name:"userList",data:function(){var e=this,t=function(e,t,a){"number"!=typeof t?null!=t&&-1==t.indexOf(" ")?isNaN(t)?a(new Error("必须是数字!")):a():a(new Error("必须是数字!")):a()};return{fullscreenLoading:!0,searchForm:{userName:"",page:1,limit:10},total:0,dialog:{isInsert:!0,visible:!1,formLabelWidth:"150px",form:{id:"",userName:"",password:"",passwordNew:"",role:""},rules:{UserName:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],UserPass:[{required:!0,message:"请输入账号密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.dialog.form.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.dialog.form.UserPass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],SubRatio:[{required:!0,message:"请输入",trigger:"blur"}],RemainDelayDay:[{required:!0,message:"请输入",trigger:"blur"}],AgentpayFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],AgentpayFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.payFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],AgentwithdrawFeeFix:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeFix?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}],AgentwithdrawFeeRate:[{validator:t,trigger:"blur"},{validator:function(t,a,r){a<=e.dialog.form.withdrawFeeRate?r():r(new Error("代理商费用应小于商户!"))},trigger:"blur"}]}},settings:{visible:!1,activeName:"first",userName:"",appId:0,payFix:0,payRate:0,withdrawFix:0,withdrawRate:0,balanceForm:{password:"",Verifycode:"",remain:0,Notes:""},creditForm:{password:"",Verifycode:"",remain:"0"},agentForm:{UserName:""},typeForm:{payType:0,withdrawType:0},rules:{UserName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],Verifycode:[{required:!0,message:"请输入验证码",trigger:"blur"}],remain:[{required:!0,message:"请输入余额变动值",trigger:"blur"},{validator:t,trigger:"blur"}],country:[{required:!0,message:"请选择一个国家",trigger:"blur"},{validator:t,trigger:"blur"}]},payTypeOptions:[],withdrawTypeOptions:[]},tableData:[]}},created:function(){this.queryUserPageList(),this.queryRoleSelectList()},methods:{queryUserPageList:function(){var e,t=this;(e=t.searchForm,l({url:"/user/queryUserPageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){t.fullscreenLoading=!1,0===e.data.code&&(t.tableData=e.data.data,t.total=e.data.count)})},refresh:function(){},pageChange:function(e){this.searchForm.page=e,this.queryUserPageList()},search:function(){this.searchForm.page=1,this.queryUserPageList()},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"ruleForm"===e&&t.saveUser()})},saveUser:function(){var e=this,t=this.dialog.isInsert?"添加":"编辑",a=this;this.$confirm("确定"+t+"账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(e.dialog.isInsert?(r=a.dialog.form,l({url:"/user/addUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(r)})):function(e){return l({url:"/user/updateUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(a.dialog.form)).then(function(e){0===e.data.code?(a.$message({message:t+"成功",type:"success"}),a.queryUserPageList()):(t=t+"失败，"+e.data.msg,a.$message.error(t)),a.closeDialog()})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){this.dialog.visible=!1,this.dialog.isInsert=!0,this.commonCloseDialog(this.dialog.form,"ruleForm")},commonCloseDialog:function(e,t){Q()(e).forEach(function(t){var a=J()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.form.platformId=""},handleEdit:function(e,t){var a=this;Q()(t).forEach(function(e){a.dialog.form.hasOwnProperty(e)&&(a.dialog.form[e]=t[e])}),this.dialog.form.id=t.userId,this.dialog.form.userName=t.username,this.dialog.form.password=t.password,this.dialog.form.passwordNew=t.password,this.dialog.form.role=t.role,this.dialog.visible=!0,this.dialog.isInsert=!1},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.userId},l({url:"/user/deleteUser",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.queryUserPageList()})})},changeStatus:function(e){var t,a=this;(t={id:e.userId,status:e.status},l({url:"/user/changeStatus",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(t)})).then(function(e){0===e.data.code?a.$message({message:"修改成功",type:"success"}):a.$message.error("修改失败"),a.refresh()})},changeSettings:function(e){if(this.settings.visible=!0,e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var t=e.DefaultPayTypeId.split("、"),a=[],r=0;r<t.length;r++)a.push(t[r]+"");this.settings.typeForm.payType=a}else this.settings.typeForm.payType=[];if(e.DefaultPayTypeId.length>0&&0!==e.DefaultPayTypeId){for(var o=e.DefaultWithdrawTypeId.split("、"),s=[],i=0;i<o.length;i++)s.push(o[i]+"");this.settings.typeForm.withdrawType=s}else this.settings.typeForm.withdrawType=[];this.settings.userName=e.UserName,this.settings.appId=e.appId,this.settings.payFeeFix=e.payFeeFix,this.settings.payFeeRate=e.payFeeRate,this.settings.withdrawFeeFix=e.withdrawFeeFix,this.settings.withdrawFeeRate=e.withdrawFeeRate},closeSettingsDialog:function(){this.settings.activeName="first",this.settings.visible=!1,this.commonCloseDialog(this.settings.balanceForm,"balanceForm"),this.commonCloseDialog(this.settings.creditForm,"creditForm"),this.commonCloseDialog(this.settings.agentForm,"agentForm"),this.commonCloseDialog(this.settings.typeForm,"typeForm")},queryRoleSelectList:function(){var e=this;return new b.a(function(t){var a;l({url:"/role/queryRoleSelectList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)}).then(function(t){0===t.data.code&&(e.roleOptions=[],t.data.data.forEach(function(t,a){e.roleOptions.push({label:t.rolename,value:t.id})}))})})},addUser:function(){this.dialog.visible=!0}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"用户",prop:"userName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){return e.addUser()}}},[e._v("添加用户")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"密码"}},[a("span",[e._v(e._s(t.row.password))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logintime",label:"上次登陆时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"启用/禁用账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:1==t.row.status?"禁用":"启用",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":-1},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",modal:!1,visible:e.dialog.visible,width:"24rem"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,"status-icon":"",rules:e.dialog.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"用户账号","label-width":e.dialog.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.userName,callback:function(t){e.$set(e.dialog.form,"userName",t)},expression:"dialog.form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.dialog.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.password,callback:function(t){e.$set(e.dialog.form,"password",t)},expression:"dialog.form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.dialog.formLabelWidth,prop:"passwordNew"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialog.form.passwordNew,callback:function(t){e.$set(e.dialog.form,"passwordNew",t)},expression:"dialog.form.passwordNew"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属角色","label-width":e.dialog.formLabelWidth,prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.dialog.form.role,callback:function(t){e.$set(e.dialog.form,"role",t)},expression:"dialog.form.role"}},[a("el-option",{staticStyle:{color:"#8492a6","font-size":"13px"},attrs:{label:"请选择",value:""}}),e._v(" "),e._l(this.roleOptions,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])})],2)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var fe={name:"roleList",data:function(){return{fullscreenLoading:!1,direction:"rtl",searchForm:{id:null,roleNo:"",roleName:"",page:1,limit:10,rowIndex:0},dialog:{isInsert:!0,visible:!1,form:{id:null,roleNo:"",roleName:"",details:""}},showRoleMenuDrawer:!1,roleMenuDrawerData:{roleId:""},selectedMenu:[],successDialog:!1,tableData:[],total:0,dateStart:"",dateEnd:"",pickerOptionsStart:{},pickerOptionsEnd:{disabledDate:function(e){if(this.dateStart)var t=new Date(this.dateStart).valueOf()-864e5+1;else t=Date.now()-864e5;return e&&e.valueOf()<t}},notifyBtnSwitch:"disabled",sendNotifyMsgForm:{id:"",url:"",notifyData:"",notifyResp:"",notifyAnalyze:""},formLabelWidth:120,sending:!1,rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleNo:[{required:!0,message:"请输入角色Level",trigger:"blur"}]},roleMenuData:[],defaultProps:{children:"children",label:"label"},roleMenuRoleNo:"",roleLevel:""}},created:function(){this.queryRolePageList(),this.queryRoleMenuTreeList()},methods:{queryRolePageList:function(){var e=this;return this.fullscreenLoading=!0,new b.a(function(t){var a;(a=e.searchForm,l({url:"/role/queryRolePageList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)})).then(function(t){if(0===t.data.code){var a=t.data.data;e.total=t.data.count;var r=[],o=!0,s=!1,i=void 0;try{for(var l,n=v()(a);!(o=(l=n.next()).done);o=!0){var c=l.value;r.push(c)}}catch(e){s=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw i}}e.tableData=r,e.fullscreenLoading=!1}})})},queryRoleMenuTreeList:function(){var e=this;return this.fullscreenLoading=!0,new b.a(function(t){var a;l({url:"/permission/queryPermissionTreeList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(a)}).then(function(t){if(0===t.data.code){var a=t.data.data;e.$nextTick(function(){e.roleMenuData=a})}})})},search:function(){this.searchForm.page=1,this.searchForm.limit=10,this.queryRolePageList()},pageChange:function(e){this.searchForm.page=e,this.queryRolePageList()},handleEdit:function(e,t){this.dialog.form.id=t.id,this.dialog.form.roleNo=t.roleNo,this.dialog.form.roleName=t.roleName,this.dialog.form.details=t.details,this.dialog.visible=!0,this.dialog.isInsert=!1},submitForm:function(e){var t=this,a=this.dialog.isInsert?"添加":"编辑";this.dialog.isInsert;this.dialog.isInsert&&delete this.dialog.form.id;var r=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确定"+a+"通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(t.dialog.isInsert?(e=r.dialog.form,l({url:"/role/addRole",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})):function(e){return l({url:"/role/updateRole",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})}(r.dialog.form)).then(function(e){0===e.data.code?r.$message({message:a+"成功",type:"success"}):r.$message.error(a+"失败"),r.type=[],r.queryRolePageList(),r.closeDialog()})}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){var e=this.dialog.form;Q()(e).forEach(function(t){var a=J()(e[t]);"number"===a&&(e[t]=0),"string"===a&&(e[t]="")}),this.dialog.visible=!1,this.dialog.isInsert=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除通道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},l({url:"/role/deleteRole",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code?a.$message({message:"删除成功",type:"success"}):a.$message.error("删除失败"),a.queryRolePageList()})})},openRoleMenuDrawer:function(e,t){this.roleMenuRoleNo=t.roleNo,this.selectedMenu=[],this.queryRoleMenuSelectByRoleId(t.roleNo),this.showRoleMenuDrawer=!0},closeRoleMenuDrawer:function(){this.showRoleMenuDrawer=!1},queryRoleMenuSelectByRoleId:function(){var e,t=this;(e={role:t.roleMenuRoleNo},l({url:"/permission/getMenuListSelectByRoleId",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=[],r=e.data.data;t.$nextTick(function(){var e=!0,o=!1,s=void 0;try{for(var i,l=v()(r);!(e=(i=l.next()).done);e=!0){var n=i.value;a.push({id:n})}}catch(e){o=!0,s=e}finally{try{!e&&l.return&&l.return()}finally{if(o)throw s}}t.$refs.tree.setCheckedNodes(a)})}})},updateRoleMenu:function(){var e,t=this.$refs.tree.getCheckedKeys(),a=this;(e={roleNo:a.roleMenuRoleNo,permissionIds:t.join(",")},l({url:"/rolepermission/updateRolePermission",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){0===e.data.code&&a.closeRoleMenuDrawer()})}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.roleName,callback:function(t){e.$set(e.searchForm,"roleName",t)},expression:"searchForm.roleName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"Level",prop:"roleNo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.searchForm.roleNo,callback:function(t){e.$set(e.searchForm,"roleNo",t)},expression:"searchForm.roleNo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",[a("el-row",[a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialog.visible=!0}}},[e._v("添加角色")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleNo",label:"Level"}}),e._v(" "),a("el-table-column",{attrs:{prop:"details",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n            ")]),e._v(" "),1!==t.row.roleNo?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.openRoleMenuDrawer(t.$index,t.row)}}},[e._v("分配菜单\n            ")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"角色信息",visible:e.dialog.visible},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)},closed:e.closeDialog}},[a("el-dialog",{attrs:{title:"提示",visible:e.successDialog,"show-close":!1,"close-on-click-modal":!0,"close-on-press-escape":!1,width:"30%",center:""},on:{"update:visible":function(t){e.successDialog=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.successDialog=!1}}},[e._v("立即关闭")])],1)]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.dialog.form,rules:e.rules,width:"24rem","label-width":"6rem"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{model:{value:e.dialog.form.roleName,callback:function(t){e.$set(e.dialog.form,"roleName",t)},expression:"dialog.form.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Level",prop:"roleNo"}},[a("el-input",{model:{value:e.dialog.form.roleNo,callback:function(t){e.$set(e.dialog.form,"roleNo",t)},expression:"dialog.form.roleNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"details"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.dialog.form.details,callback:function(t){e.$set(e.dialog.form,"details",t)},expression:"dialog.form.details"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"medium",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n              立即创建\n            ")]),e._v(" "),a("el-button",{attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置\n            ")])],1)],1)],1)],1),e._v(" "),a("div",[a("el-drawer",{attrs:{title:"菜单分配",visible:e.showRoleMenuDrawer,direction:e.direction,size:"40%"},on:{"update:visible":function(t){e.showRoleMenuDrawer=t}}},[a("div",{staticStyle:{width:"100%",height:"100%",padding:"20px"}},[[a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-tree",{ref:"tree",attrs:{data:e.roleMenuData,"show-checkbox":"","node-key":"id",props:e.defaultProps,"default-expand-all":!0,"check-strictly":!1}}),e._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.updateRoleMenu}},[e._v("提交")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)]],2)])],1)]],2)},staticRenderFns:[]};var ge={name:"channelTotalStatistics",data:function(){return{fullscreenLoading:!0,searchForm:{payTypeId:"",page:1,limit:10},payTypeStaticticsTableData:[],total:0,payTypeOptions:[]}},created:function(){var e=this;return x()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.queryPayLogStaticticsByPayType(),e.queryAllPaytypeList();case 2:case"end":return t.stop()}},t,e)}))()},methods:{queryPayLogStaticticsByPayType:function(){var e,t=this;(e=t.searchForm,l({url:"/paylog/payTypeStatictics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=e.data.data;t.total=e.data.count,t.payTypeStaticticsTableData=[];var r=!0,o=!1,s=void 0;try{for(var i,l=v()(a);!(r=(i=l.next()).done);r=!0){var n=i.value;n.payAmount=N(n.payAmount),n.payFee=N(n.payFee),n.withdrawAmount=N(n.withdrawAmount),n.withdrawFee=N(n.withdrawFee),n.remain=N(n.remain),t.payTypeStaticticsTableData.push(n)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}})},pageChange:function(e){this.searchForm.page=e,this.queryPayLogStaticticsByPayType()},queryAllPaytypeList:function(){var e=this;R().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,o=!1,s=void 0;try{for(var i,l=v()(a);!(r=(i=l.next()).done);r=!0){var n=i.value;e.payTypeOptions.push({label:n.name,value:n.id})}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}})},search:function(){this.queryPayLogStaticticsByPayType()},resetForm:function(e){this.$refs[e].resetFields()}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{span:4}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.searchForm.payTypeId,callback:function(t){e.$set(e.searchForm,"payTypeId",t)},expression:"searchForm.payTypeId"}},e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.payTypeStaticticsTableData,size:"mini"}},[a("el-table-column",{attrs:{prop:"payTypeId",label:"通道id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payAmount",label:"代收总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payFee",label:"代收总手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"代收单数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"代付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawFee",label:"代付手续费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawNum",label:"代付单数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remain",label:"通道余额"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.searchForm.page},on:{"current-change":e.pageChange}})],1)]],2)},staticRenderFns:[]};var ye={name:"channelDailyStatistics",data:function(){return{fullscreenLoading:!0,searchForm:{payTypeIds:[],statDays:[],page:1,limit:10},payTypeStaticticsTableData:[],total:0,payTypeOptions:[]}},watch:{tableData:{handler:function(e,t){this.$nextTick(function(){var e=document.getElementsByClassName("el-table__footer-wrapper")[0];e.setAttribute("style",""),e.getElementsByTagName("tr")[0].childNodes.forEach(function(e){e.setAttribute("style",";font-size:0.8rem;font-weight: bold")})})},immediate:!0,deep:!0}},created:function(){var e=this;return x()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getChannelDailyStatistics(),e.queryAllPaytypeList();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getChannelDailyStatistics:function(){var e,t=this;(e=t.searchForm,l({url:"/channel/getChannelDailyStatistics",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.a.stringify(e)})).then(function(e){if(0===e.data.code){var a=e.data.data;t.total=e.data.count,t.payTypeStaticticsTableData=[];var r=!0,o=!1,s=void 0;try{for(var i,l=v()(a);!(r=(i=l.next()).done);r=!0){var n=i.value;n.payAmount=Number(.01*n.payAmount).toFixed(2),n.payFee=Number(.01*n.payFee).toFixed(2),n.withdrawAmount=Number(.01*n.withdrawAmount).toFixed(2),n.withdrawFee=Number(.01*n.withdrawFee).toFixed(2)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}t.payTypeStaticticsTableData=a}})},pageChange:function(e){this.searchForm.page=e,this.getChannelDailyStatistics()},queryAllPaytypeList:function(){var e=this;R().then(function(t){if(0===t.data.code){e.payTypeOptions=[];var a=t.data.data,r=!0,o=!1,s=void 0;try{for(var i,l=v()(a);!(r=(i=l.next()).done);r=!0){var n=i.value;e.payTypeOptions.push({label:n.name,value:n.id})}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}})},tableStatistics:function(e){return e.payAmount-e.payFee-e.withdrawAmount-e.withdrawFee},search:function(){this.getChannelDailyStatistics()},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.payTypeIds=[],this.searchForm.statDays=[]},handleSizeChange:function(e){this.searchForm.limit=e,this.getChannelDailyStatistics()},getSummaries:function(e){var t=e.columns,a=e.data,r=[];return t.forEach(function(e,t){if(0!==t){if(1!==t&&2!==t){var o=a.map(function(t){return Number(t[e.property])});o.every(function(e){return isNaN(e)})?r[t]="N/A":(r[t]=o.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),r[t]+=" ")}}else r[t]="合计"}),r[3]=Number(r[3]).toFixed(2),r[4]=Number(r[4]).toFixed(2),r[5]=Number(r[5]).toFixed(2),r[6]=Number(r[6]).toFixed(2),r[7]=Number(r[3]-r[4]-r[5]-r[6]).toFixed(2),r}}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"通道",prop:"payTypeIds"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",multiple:""},model:{value:e.searchForm.payTypeIds,callback:function(t){e.$set(e.searchForm,"payTypeIds",t)},expression:"searchForm.payTypeIds"}},e._l(this.payTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.label))])])}),1)],1)],1),e._v(" "),a("el-col",{staticClass:"form-search",attrs:{xl:3,lg:6,md:6,sm:8,xs:24}},[a("el-form-item",{attrs:{label:"日期",prop:"statDay"}},[a("el-date-picker",{attrs:{type:"dates",placeholder:"选择日期","value-format":"yyyyMMdd",multiple:""},model:{value:e.searchForm.statDays,callback:function(t){e.$set(e.searchForm,"statDays",t)},expression:"searchForm.statDays"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"search-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"grid"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.payTypeStaticticsTableData,size:"mini","show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{prop:"channelId",label:"通道id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"通道名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statDay",label:"日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payAmount",label:"代收总金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payFee",label:"代收总手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawAmount",label:"代付金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"withdrawFee",label:"代付手续费",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"核算",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Number(t.row.payAmount-t.row.payFee-t.row.withdrawAmount-t.row.withdrawFee).toFixed(2))+"\n          ")]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"5px",height:"100%"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-size":e.searchForm.limit,"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1)]],2)},staticRenderFns:[]};var we={el:"#app",name:"index",components:{Home:P,PayLogList:z,WithdrawLogList:U,OperaLogList:X,MoneyLogList:K,CpInfoList:a("VU/8")(ee,te,!1,function(e){a("Kkgl")},null,null).exports,AgentList:a("VU/8")(ae,re,!1,function(e){a("gB6C")},"data-v-6153b7f9",null).exports,PayTypeList:a("VU/8")(oe,se,!1,function(e){a("xVJ8")},"data-v-b928bb20",null).exports,WithdrawTypeList:a("VU/8")(ie,le,!1,function(e){a("RVN3")},"data-v-03cd0b60",null).exports,CpInfoTotalStatistics:a("VU/8")(ne,ce,!1,function(e){a("xYGd")},"data-v-20ce12d2",null).exports,CpInfoDailyStatistics:a("VU/8")(de,ue,!1,function(e){a("wyfn")},"data-v-76a9eb2a",null).exports,UserList:a("VU/8")(me,pe,!1,function(e){a("7YlK")},"data-v-211fecdb",null).exports,RoleList:a("VU/8")(fe,he,!1,function(e){a("tRTp")},"data-v-2bf5017b",null).exports,ChannelTotalStatistics:a("VU/8")(ge,ve,!1,function(e){a("jGYZ")},"data-v-effe7e5e",null).exports,ChannelDailyStatistics:a("VU/8")(ye,be,!1,function(e){a("Me+y")},"data-v-08f1e7f4",null).exports},created:function(){this.editableTabs=[],this.addTabs({id:1,permissName:"首页",pValue:"home"})},data:function(){return{fullscreenLoading:!0,iframeSrc:"./homeNew.html",isCollapse:!1,iframe:[],clientHeight:0,asideWidth:"12rem",tabsValues:"1",editableTabs:[],tabIndex:2,heightClass:{height:"937px"}}},watch:{clientHeight:function(){this.changeFixed(this.clientHeight)},editableTabs:{handler:function(e,t){1===e.length&&"home"===e[0].name&&(this.tabsValues="home")},deep:!0,immediate:!0}},mounted:function(){var e,t=this;l({url:"/permission/getMenuList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(function(e){0===e.data.code&&(t.iframe=e.data.data)}),t.clientHeight=""+document.documentElement.clientHeight,t.$refs.elmain.$el.style.height=t.clientHeight+"px",t.$refs.elaside.$el.style.height=t.clientHeight+"px",window.onresize=function(){t.clientHeight=""+document.documentElement.clientHeight}},methods:{changeFixed:function(e){this.$refs.elaside.$el.style.height=e+"px",this.heightClass={height:e+"px"}},ShowNavMenu:function(){this.isCollapse=!this.isCollapse},getIframeSrc:function(e){this.iframeSrc=e},checkoutLogin:function(){top.location.href="/login.jsp"},handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a,content:""}),this.editableTabsValue=a}if("remove"===t){var r=this.editableTabs,o=this.editableTabsValue;o===e&&r.forEach(function(t,a){if(t.name===e){var s=r[a+1]||r[a-1];s&&(o=s.name)}}),this.editableTabsValue=o,this.editableTabs=r.filter(function(t){return t.name!==e})}},addTabs:function(e){var t=this,a=(e.pType,e.permissName),r=e.pValue;if(null!=r){var o=!0,s=!1,i=void 0;try{for(var l,n=v()(this.editableTabs);!(o=(l=n.next()).done);o=!0){if(l.value.name===r)return void(this.tabsValues=r)}}catch(e){s=!0,i=e}finally{try{!o&&n.return&&n.return()}finally{if(s)throw i}}this.editableTabs.push(function(e,t,a,r){return{title:e,name:t,content:a,show:r}}(a,r,r,!0))}this.$nextTick(function(){t.tabsValues=r})},isClosable:function(e){return"home"!==e.name}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"app",style:e.heightClass,attrs:{id:"app"}},[a("el-container",[a("el-aside",{ref:"elaside",attrs:{width:e.asideWidth}},[a("el-scrollbar",{staticStyle:{width:"100%",height:"100%","overflow-x":"hidden"}},[e.isCollapse?e._e():a("div",{staticClass:"top-info"},[a("div",{staticClass:"top-info__image"},[a("el-image",{attrs:{src:"./src/assets/topstand.png",fit:"cover"}})],1),e._v(" "),a("div",{staticClass:"top-info-right"},[a("div",[e._v("TOPSTAND")]),e._v(" "),a("div",[e._v("PAYMENT")])])]),e._v(" "),a("el-menu",{attrs:{"collapse-transition":!1,"default-active":"1",collapse:e.isCollapse}},[a("el-menu-item",{attrs:{index:"0"},on:{click:function(t){return e.getIframeSrc("./homeNew.html")}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},on:{click:function(t){return e.addTabs({id:1,permissName:"首页",pValue:"home"})}},slot:"title"},[e._v("首页")])]),e._v(" "),e._l(e.iframe,function(t){return a("el-submenu",{key:t.id,staticClass:"submenu-hover",attrs:{index:t.permissName}},[a("template",{slot:"title"},[a("i",{class:t.pType,attrs:{slot:"title"},slot:"title"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.permissName))])]),e._v(" "),a("el-menu-item-group",e._l(t.children,function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.permissName},on:{click:function(a){return e.addTabs(t)}}},[e._v("\n                "+e._s(t.permissName)+"\n              ")])}),1)],2)})],2)],1)],1),e._v(" "),a("el-container",[a("el-header",[a("div",{staticClass:"page-nav-header"},[a("div",{staticClass:"header__left",on:{click:e.ShowNavMenu}},[e.isCollapse?a("i",{staticClass:"el-icon-s-unfold",on:{click:function(t){e.asideWidth="12rem"}}}):a("i",{staticClass:"el-icon-s-fold",on:{click:function(t){e.asideWidth="4rem"}}})]),e._v(" "),a("div",{staticClass:"header__right"},[a("el-dropdown",[a("div",{staticClass:"header__right-info",staticStyle:{cursor:"pointer"}},[a("i",{staticClass:"el-icon-user-solid"}),e._v(" "),a("label",{attrs:{id:"username"}}),e._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.checkoutLogin.apply(null,arguments)}}},[e._v("退出登录")])],1)],1)],1)])]),e._v(" "),a("el-main",{ref:"elmain",staticClass:"el-main",staticStyle:{"padding-bottom":"40px"}},[a("el-row",[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit},model:{value:e.tabsValues,callback:function(t){e.tabsValues=t},expression:"tabsValues"}},e._l(e.editableTabs,function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a(e.content,{tag:"component"})],1)}),1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Fe=a("VU/8")(we,_e,!1,function(e){a("lU7Q"),a("9sed")},"data-v-49e23a87",null).exports,xe=h.a.prototype.push;h.a.prototype.push=function(e){return xe.call(this,e).catch(function(e){return e})},r.default.use(h.a);var Ce=[{path:"/",name:"home",redirect:"/login"},{path:"/login",name:"Login",component:m},{path:"/index",name:"Index",component:Fe}],ke=new h.a({mode:"history",routes:Ce}),Se=a("zL8q"),Te=a.n(Se);a("rAyg"),a("tvR6"),a("PX8F");r.default.use(Te.a),r.default.config.productionTip=!0,new r.default({el:"#app",router:ke,render:function(e){return e(f)}})},PX8F:function(e,t){},RVN3:function(e,t){},UQ6X:function(e,t){},V46G:function(e,t){},eavT:function(e,t){},gB6C:function(e,t){},jGYZ:function(e,t){},lU7Q:function(e,t){},rAyg:function(e,t){},sjUr:function(e,t){},tRTp:function(e,t){},tvR6:function(e,t){},uXPX:function(e,t){},wyfn:function(e,t){},xVJ8:function(e,t){},xYGd:function(e,t){},"z+5J":function(e,t){},z8E8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.918c01f0ea9b66e57d75.js.map