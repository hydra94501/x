import{d as se,h as p,a0 as Pe,k as Ue,a2 as Oe,a3 as $e,l as ze,m as ce,u as Le,a as we,ac as Ee,ad as He,t as _,af as We,ag as je,aD as M,w as Ge,b as Ke,c as qe,I as Ie,aE as fe,aF as me,aG as Qe,az as pe,an as ge,ax as ve,as as C,ah as Je,s as ie,v as Xe,x as Ye,y as he,z as o,A as d,O as D,S as Ze,N as et,aH as tt,G as F,P as W,aI as nt,aJ as at,T as be,Q as lt,aK as ut,D as it}from"./index-4e4cc9b7.js";import{c as ot,d as rt}from"./index-056fe9eb.js";import{_ as st,a as dt,b as ct,c as ft}from"./Spin-2deb43aa.js";import"./get-slot-1efb97e5.js";const mt=se({name:"Add",render(){return p("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),pt=se({name:"Remove",render(){return p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},p("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function gt(t){const{textColorDisabled:s}=t;return{iconColorDisabled:s}}const vt=Pe({name:"InputNumber",common:Ue,peers:{Button:Oe,Input:$e},self:gt}),ht=vt;function bt(t){return t==null||typeof t=="string"&&t.trim()===""?null:Number(t)}function _t(t){return t.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(t)||/^\.\d+$/.test(t))}function oe(t){return t==null?!0:!Number.isNaN(t)}function _e(t,s){return typeof t!="number"?"":s===void 0?String(t):t.toFixed(s)}function re(t){if(t===null)return null;if(typeof t=="number")return t;{const s=Number(t);return Number.isNaN(s)?null:s}}const yt=ze([ce("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),ce("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),ye=800,xe=100,xt=Object.assign(Object.assign({},we.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),wt=se({name:"InputNumber",props:xt,setup(t){const{mergedBorderedRef:s,mergedClsPrefixRef:y,mergedRtlRef:B}=Le(t),g=we("InputNumber","-input-number",yt,ht,t,y),{localeRef:w}=Ee("InputNumber"),i=He(t),{mergedSizeRef:j,mergedDisabledRef:P,mergedStatusRef:S}=i,r=_(null),G=_(null),T=_(null),U=_(t.defaultValue),Q=We(t,"value"),h=je(Q,U),I=_(""),O=e=>{const n=String(e).split(".")[1];return n?n.length:0},J=e=>{const n=[t.min,t.max,t.step,e].map(l=>l===void 0?0:O(l));return Math.max(...n)},a=M(()=>{const{placeholder:e}=t;return e!==void 0?e:w.value.placeholder}),u=M(()=>{const e=re(t.step);return e!==null?e===0?1:Math.abs(e):1}),b=M(()=>{const e=re(t.min);return e!==null?e:null}),m=M(()=>{const e=re(t.max);return e!==null?e:null}),V=()=>{const{value:e}=h;if(oe(e)){const{format:n,precision:l}=t;n?I.value=n(e):e===null||l===void 0||O(e)>l?I.value=_e(e,void 0):I.value=_e(e,l)}else I.value=String(e)};V();const N=e=>{const{value:n}=h;if(e===n){V();return}const{"onUpdate:value":l,onUpdateValue:f,onChange:x}=t,{nTriggerFormInput:k,nTriggerFormChange:R}=i;x&&C(x,e),f&&C(f,e),l&&C(l,e),U.value=e,k(),R()},v=({offset:e,doUpdateIfValid:n,fixPrecision:l,isInputing:f})=>{const{value:x}=I;if(f&&_t(x))return!1;const k=(t.parse||bt)(x);if(k===null)return n&&N(null),null;if(oe(k)){const R=O(k),{precision:H}=t;if(H!==void 0&&H<R&&!l)return!1;let A=Number.parseFloat((k+e).toFixed(H??J(k)));if(oe(A)){const{value:le}=m,{value:ue}=b;if(le!==null&&A>le){if(!n||f)return!1;A=le}if(ue!==null&&A<ue){if(!n||f)return!1;A=ue}return t.validator&&!t.validator(A)?!1:(n&&N(A),A)}}return!1},X=M(()=>v({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),$=M(()=>{const{value:e}=h;if(t.validator&&e===null)return!1;const{value:n}=u;return v({offset:-n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),z=M(()=>{const{value:e}=h;if(t.validator&&e===null)return!1;const{value:n}=u;return v({offset:+n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Y(e){const{onFocus:n}=t,{nTriggerFormFocus:l}=i;n&&C(n,e),l()}function Z(e){var n,l;if(e.target===((n=r.value)===null||n===void 0?void 0:n.wrapperElRef))return;const f=v({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(f!==!1){const R=(l=r.value)===null||l===void 0?void 0:l.inputElRef;R&&(R.value=String(f||"")),h.value===f&&V()}else V();const{onBlur:x}=t,{nTriggerFormBlur:k}=i;x&&C(x,e),k(),Je(()=>{V()})}function ee(e){const{onClear:n}=t;n&&C(n,e)}function c(){const{value:e}=z;if(!e){ae();return}const{value:n}=h;if(n===null)t.validator||N(de());else{const{value:l}=u;v({offset:l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function te(){const{value:e}=$;if(!e){ne();return}const{value:n}=h;if(n===null)t.validator||N(de());else{const{value:l}=u;v({offset:-l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Ve=Y,ke=Z;function de(){if(t.validator)return null;const{value:e}=b,{value:n}=m;return e!==null?Math.max(0,e):n!==null?Math.min(0,n):0}function Se(e){ee(e),N(null)}function Te(e){var n,l,f;!((n=T.value)===null||n===void 0)&&n.$el.contains(e.target)&&e.preventDefault(),!((l=G.value)===null||l===void 0)&&l.$el.contains(e.target)&&e.preventDefault(),(f=r.value)===null||f===void 0||f.activate()}let L=null,E=null,K=null;function ne(){K&&(window.clearTimeout(K),K=null),L&&(window.clearInterval(L),L=null)}let q=null;function ae(){q&&(window.clearTimeout(q),q=null),E&&(window.clearInterval(E),E=null)}function Ne(){ne(),K=window.setTimeout(()=>{L=window.setInterval(()=>{te()},xe)},ye),me("mouseup",document,ne,{once:!0})}function Ae(){ae(),q=window.setTimeout(()=>{E=window.setInterval(()=>{c()},xe)},ye),me("mouseup",document,ae,{once:!0})}const Be=()=>{E||c()},Me=()=>{L||te()};function Re(e){var n,l;if(e.key==="Enter"){if(e.target===((n=r.value)===null||n===void 0?void 0:n.wrapperElRef))return;v({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((l=r.value)===null||l===void 0||l.deactivate())}else if(e.key==="ArrowUp"){if(!z.value||t.keyboard.ArrowUp===!1)return;e.preventDefault(),v({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&c()}else if(e.key==="ArrowDown"){if(!$.value||t.keyboard.ArrowDown===!1)return;e.preventDefault(),v({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&te()}}function Ce(e){I.value=e,t.updateValueOnInput&&!t.format&&!t.parse&&t.precision===void 0&&v({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Ge(h,()=>{V()});const De={focus:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.blur()},select:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.select()}},Fe=Ke("InputNumber",B,y);return Object.assign(Object.assign({},De),{rtlEnabled:Fe,inputInstRef:r,minusButtonInstRef:G,addButtonInstRef:T,mergedClsPrefix:y,mergedBordered:s,uncontrolledValue:U,mergedValue:h,mergedPlaceholder:a,displayedValueInvalid:X,mergedSize:j,mergedDisabled:P,displayedValue:I,addable:z,minusable:$,mergedStatus:S,handleFocus:Ve,handleBlur:ke,handleClear:Se,handleMouseDown:Te,handleAddClick:Be,handleMinusClick:Me,handleAddMousedown:Ae,handleMinusMousedown:Ne,handleKeyDown:Re,handleUpdateDisplayedValue:Ce,mergedTheme:g,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:qe(()=>{const{self:{iconColorDisabled:e}}=g.value,[n,l,f,x]=Qe(e);return{textColorTextDisabled:`rgb(${n}, ${l}, ${f})`,opacityDisabled:`${x}`}})})},render(){const{mergedClsPrefix:t,$slots:s}=this,y=()=>p(ve,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>pe(s["minus-icon"],()=>[p(ge,{clsPrefix:t},{default:()=>p(pt,null)})])}),B=()=>p(ve,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>pe(s["add-icon"],()=>[p(ge,{clsPrefix:t},{default:()=>p(mt,null)})])});return p("div",{class:[`${t}-input-number`,this.rtlEnabled&&`${t}-input-number--rtl`]},p(Ie,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var g;return this.showButton&&this.buttonPlacement==="both"?[y(),fe(s.prefix,w=>w?p("span",{class:`${t}-input-number-prefix`},w):null)]:(g=s.prefix)===null||g===void 0?void 0:g.call(s)},suffix:()=>{var g;return this.showButton?[fe(s.suffix,w=>w?p("span",{class:`${t}-input-number-suffix`},w):null),this.buttonPlacement==="right"?y():null,B()]:(g=s.suffix)===null||g===void 0?void 0:g.call(s)}}))}}),It={class:"bgd-page"},Vt={style:{"margin-bottom":"20px"}},kt={class:"search-box"},Bt={__name:"Settlement",setup(t){const s=_([{title:"订单号",key:"id",align:"center",minWidth:90},{title:"商户Id",key:"appId",align:"center"},{title:"结算金额",key:"faitAmount",align:"center"},{title:"结算汇率",key:"rate",align:"center"},{title:"usdt金额",key:"uAmount",align:"center"},{title:"账户号",key:"account",align:"center",minWidth:"300px"},{title:"订单状态",key:"status",align:"center",render:a=>{const b={1:"结算完成",0:"待处理","-1":"驳回"}[a.status]||"",m=a.status===1?"success":a.status===0?"warning":"error";return p(be,{type:m,bordered:!1},{default:()=>b})}},{title:"财务状态",key:"financeStatus",align:"center",render:a=>{const b={1:"审核通过",0:"待审核"}[a.financeStatus]||"",m=a.financeStatus===1?"success":"warning";return p(be,{type:m,bordered:!1},{default:()=>b})}},{title:"创建时间",key:"createTime",align:"center",render:a=>a.createTime?a.createTime:"-"},{title:"完成时间",key:"finishTime",align:"center",render:a=>a.finishTime?a.finishTime:"-"}]),y=_(!0),B=_(0),g=a=>a.id,w={faitAmount:[{required:!0,message:"请输入申请金额"}],account:[{required:!0,message:"请输入法币地址"}]};ie({totalWithdrawAmount:0,totalWithdrawNum:0,totalWithdrawSuccessAmount:0,totalWithdrawSuccessFee:0,totalWithdrawSuccessNum:0,totalWithdrawProcessAmount:0,totalWithdrawFailAmount:0});const i=ie({appId:null,status:null,account:null,startCreateTime:null,endCreateTime:null,startFinishTime:null,endFinishTime:null,country:null,page:0,limit:10}),j=_([]),P=_(null),S=_(!1),r=ie({faitAmount:"100.00",account:null}),G=async()=>{P.value.validate(async a=>{if(a)return console.log("表单验证提交错误");const b={faitAmount:parseFloat(r.faitAmount)*100,account:r.account},m=await rt(b);console.log("申请结算",m),m.code==0?(window.$message.success("申请成功！"),S.value=!1,r.faitAmount=0,r.account=""):window.$message.error(m.msg)})},T=async()=>{y.value=!0;const a=await ot(i);console.log("结算列表",a),j.value=a.data.list.map(u=>(u.faitAmount=Ze(u.faitAmount),u)),a.data.statistics?B.value=a.data.statistics.totalAllNum:B.value=0,y.value=!1};function U(a){/^\d*\.?\d{0,2}$/.test(a)&&(r.faitAmount=a)}const Q=()=>{S.value=!0,r.faitAmount=0,r.account=""},h=a=>{i.page=a,T()},I=a=>{i.size=a,i.page=1,T()};function O(){for(const a in i)i[a]=null;i.page=1,i.limit=10,i.rowIndex=0,T()}function J(){i.page=1,i.limit=10,i.rowIndex=0,T()}return T(),(a,u)=>{const b=Ie,m=lt,V=dt,N=et,v=ct,X=ft,$=st,z=ut,Y=wt,Z=it,ee=tt;return Xe(),Ye("div",It,[he("div",Vt,[o(D(W),{size:"medium",type:"info",onClick:Q},{default:d(()=>[F("申请结算")]),_:1})]),he("div",kt,[o(N,{ref_key:"formRef",ref:P,"label-width":90,model:i,inline:"",class:"search-form",size:"medium","label-placement":"left"},{default:d(()=>[o(m,{label:"账户号"},{default:d(()=>[o(b,{value:i.account,"onUpdate:value":u[0]||(u[0]=c=>i.account=c),placeholder:"账户号"},null,8,["value"])]),_:1}),o(m,{label:"订单状态"},{default:d(()=>[o(V,{value:i.status,"onUpdate:value":u[1]||(u[1]=c=>i.status=c),options:[{label:"结算完成",value:"1"},{label:"待处理",value:"0"},{label:"驳回",value:"-1"}],"value-field":"value","label-field":"label"},null,8,["value"])]),_:1}),o(m,{label:"财务状态"},{default:d(()=>[o(V,{value:i.financeStatus,"onUpdate:value":u[2]||(u[2]=c=>i.financeStatus=c),options:[{label:"请选择",value:""},{label:"审核完成",value:"1"},{label:"待审核",value:"0"}],"value-field":"value","label-field":"label"},null,8,["value"])]),_:1}),o(m,{label:""},{default:d(()=>[o(D(W),{size:"medium",style:{"margin-right":"10px"},onClick:O},{default:d(()=>[F("清空")]),_:1}),o(D(W),{size:"medium",type:"info",onClick:J},{default:d(()=>[F("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),o($,{show:y.value},{description:d(()=>[F("加载中...")]),default:d(()=>[o(v,{columns:s.value,data:j.value,"row-key":g,"single-line":!1,id:"dataTable"},null,8,["columns","data"]),o(X,{style:{margin:"18px 0"},"show-size-picker":"","show-quick-jumper":"","page-sizes":[10,20,50,100],page:i.page,"onUpdate:page":[u[3]||(u[3]=c=>i.page=c),h],"page-count":B.value,"onUpdate:pageSize":I},null,8,["page","page-count"])]),_:1},8,["show"]),o(ee,{show:S.value,"onUpdate:show":u[8]||(u[8]=c=>S.value=c),class:"nnnn-modal"},{default:d(()=>[o(Z,{style:{width:"600px"},title:"申请结算",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{"header-extra":d(()=>[o(z,{size:"22",color:"#5a5f63",onClick:u[4]||(u[4]=c=>S.value=!1)},{default:d(()=>[o(D(nt))]),_:1})]),footer:d(()=>[o(D(W),{style:{"margin-right":"10px"},onClick:u[7]||(u[7]=c=>S.value=!1)},{default:d(()=>[F("取消")]),_:1}),o(D(W),{type:"primary",onClick:at(G,["prevent"])},{default:d(()=>[F("确 认")]),_:1},8,["onClick"])]),default:d(()=>[o(N,{ref_key:"formRef",ref:P,"label-width":120,model:r,rules:w,size:"medium","label-placement":"left"},{default:d(()=>[o(m,{label:"申请法币金额",path:"faitAmount"},{default:d(()=>[o(Y,{value:r.faitAmount,"onUpdate:value":[u[5]||(u[5]=c=>r.faitAmount=c),U],placeholder:"输入申请法币金额",maxlength:20,precision:2},null,8,["value"])]),_:1}),o(m,{label:"USDT地址",path:"account"},{default:d(()=>[o(b,{value:r.account,"onUpdate:value":u[6]||(u[6]=c=>r.account=c),placeholder:"输入USDT地址",maxlength:200},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])])}}};export{Bt as default};
