import{b as B}from"./index-056fe9eb.js";import{t as w,s as T,v as D,x as $,y as f,z as a,A as n,O as y,U as R,S as c,M as x,N as q,P as C,G as m,H as g,T as h,h as U,I as K,Q as O}from"./index-4e4cc9b7.js";import{_ as Q,a as j,b as E,c as G}from"./Spin-2deb43aa.js";import{_ as L}from"./DatePicker-896a5640.js";import"./get-slot-1efb97e5.js";const J={class:"bgd-page"},X={class:"search-box"},Y={class:"data-statistics"},Z={class:"grid-content"},tt={class:"grid-content"},et={class:"grid-content"},at={class:"grid-content"},lt={class:"grid-content"},dt={__name:"OutMoney",setup(st){const I=w([{title:"订单号",key:"id",width:100},{title:"下游订单号",key:"orderId"},{title:"第三方订单号",key:"transactionNum"},{title:"金额",key:"amount"},{title:"商户手续费",key:"platformFee"},{title:"到账类型",key:"type"},{title:"订单状态",key:"status",render:s=>U(h,{style:{marginRight:"6px"},type:s.status==="成功"?"success":"warning",bordered:!1},{default:()=>s.status})},{title:"回调状态",key:"syncCnt",render:s=>{let t=s.syncCnt;t=t===1?"同步成功":t===0?"未回调":"同步失败 "+t*-1+" 次";let r="";return t==="同步成功"?r="success":t==="未回调"?r="warning":r="error",U(h,{type:r,style:{marginRight:"6px"},bordered:!1},{default:()=>t})}},{title:"创建时间",key:"createTime",width:160,render:s=>s.createTime?s.createTime:"-"},{title:"提现时间",key:"withdrawTime",width:160,render:s=>s.withdrawTime?s.withdrawTime:"-"}]),N=w(!0),k=w(0),z=s=>s.id,p=w(null),v=w(null),o=T({totalWithdrawAmount:0,totalWithdrawNum:0,totalWithdrawSuccessAmount:0,totalWithdrawSuccessFee:0,totalWithdrawSuccessNum:0,totalWithdrawProcessAmount:0,totalWithdrawFailAmount:0,rate:"0%"}),e=T({id:null,appId:null,orderId:null,bankCardNo:null,pixKey:null,cpf:null,transactionNum:null,withdrawTypeId:null,type:null,status:null,syncCnt:null,confirmStatus:null,country:null,page:1,limit:10,rowIndex:0});T({totalWithdrawAmount:0,totalWithdrawNum:0,totalWithdrawSuccessAmount:0,totalWithdrawSuccessFee:0,totalWithdrawSuccessNum:0,totalWithdrawProcessAmount:0,totalWithdrawFailAmount:0});const F=w([]),W=async()=>{e.startCreateTime=p.value?p.value[0]:"",e.endCreateTime=p.value?p.value[1]:"",e.startWithdrawTime=v.value?v.value[0]:"",e.endWithdrawTime=v.value?v.value[1]:"",N.value=!0;const s=await B(e);F.value=s.data.list.map(u=>{u.type=R(u),u.amount=c(u.amount),u.platformFee=c(u.platformFee),u.thirdFee=c(u.thirdFee);var l=u.status;return l=l===2?"成功":l===-2?"失败":l===-1?"失败重试":l===0?"待处理":"处理中",u.status=l,u.createTime=x(u.createTime),u.withdrawTime=x(u.withdrawTime),u});const t=s.data.statictics;console.log("出款管理",s);var _=s.data.statictics.totalWithdrawSuccessNum,d=s.data.statictics.totalWithdrawNum;d!==0?o.rate=Math.floor(Number(_)/Number(d)*100).toFixed(2)+"%":o.rate="总单数为0";var r=t.totalWithdrawAmount;o.totalWithdrawAmount=c(r);var i=t.totalWithdrawSuccessAmount;o.totalWithdrawSuccessAmount=c(i);var b=t.totalWithdrawSuccessFee;o.totalWithdrawSuccessFee=c(b);var _=t.totalWithdrawSuccessNum;o.totalWithdrawSuccessNum=_;var S=t.totalWithdrawProcessAmount;o.totalWithdrawProcessAmount=c(S);var A=t.totalWithdrawFailAmount;o.totalWithdrawFailAmount=c(A);var d=t.totalWithdrawNum;d!==0?o.rate=Math.floor(Number(_)/Number(d)*100).toFixed(2)+"%":o.rate="总单数为0",k.value=d,N.value=!1},M=s=>{e.page=s,W()},P=s=>{e.size=s,e.page=1,W()};function H(){for(const s in e)e[s]=null;p.value=null,v.value=null,e.page=1,e.limit=10,e.rowIndex=0,W()}function V(){e.page=1,e.limit=10,e.rowIndex=0,W()}return W(),(s,t)=>{const r=K,i=O,b=j,_=L,S=q,A=E,d=G,u=Q;return D(),$("div",J,[f("div",X,[a(S,{ref:"formRef","label-width":90,model:e,inline:"",class:"search-form",size:"medium","label-placement":"left"},{default:n(()=>[a(i,{label:"系统订单号"},{default:n(()=>[a(r,{value:e.id,"onUpdate:value":t[0]||(t[0]=l=>e.id=l),placeholder:"系统订单号"},null,8,["value"])]),_:1}),a(i,{label:"商户订单号"},{default:n(()=>[a(r,{value:e.orderId,"onUpdate:value":t[1]||(t[1]=l=>e.orderId=l),placeholder:"商户订单号"},null,8,["value"])]),_:1}),a(i,{label:"三方订单号"},{default:n(()=>[a(r,{value:e.transactionNum,"onUpdate:value":t[2]||(t[2]=l=>e.transactionNum=l),placeholder:"三方订单号"},null,8,["value"])]),_:1}),a(i,{label:"订单状态"},{default:n(()=>[a(b,{value:e.status,"onUpdate:value":t[3]||(t[3]=l=>e.status=l),options:[{label:"成功",value:"1"},{label:"待处理",value:"0"},{label:"失败",value:"-1"}],"value-field":"value","label-field":"label"},null,8,["value"])]),_:1}),a(i,{label:"实际状态"},{default:n(()=>[a(b,{value:e.status1,"onUpdate:value":t[4]||(t[4]=l=>e.status1=l),options:[{label:"成功",value:"1"},{label:"待处理",value:"0"},{label:"失败",value:"-1"}],"value-field":"value","label-field":"label"},null,8,["value"])]),_:1}),a(i,{label:"同步状态"},{default:n(()=>[a(b,{value:e.syncCnt,"onUpdate:value":t[5]||(t[5]=l=>e.syncCnt=l),options:[{label:"同步成功",value:"1"},{label:"未回调",value:"0"},{label:"失败重试",value:"-1"}],"value-field":"value","label-field":"label"},null,8,["value"])]),_:1}),a(i,{label:"金额"},{default:n(()=>[a(r,{value:e.amount,"onUpdate:value":t[6]||(t[6]=l=>e.amount=l),placeholder:"金额"},null,8,["value"])]),_:1}),a(i,{label:"创建时间"},{default:n(()=>[a(_,{"formatted-value":p.value,"onUpdate:formattedValue":t[7]||(t[7]=l=>p.value=l),type:"datetimerange",clearable:"","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"300px"}},null,8,["formatted-value"])]),_:1}),a(i,{label:"代付时间"},{default:n(()=>[a(_,{"formatted-value":v.value,"onUpdate:formattedValue":t[8]||(t[8]=l=>v.value=l),type:"datetimerange",clearable:"","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"300px"}},null,8,["formatted-value"])]),_:1}),a(i,{label:""},{default:n(()=>[a(y(C),{size:"medium",style:{"margin-right":"10px"},onClick:H},{default:n(()=>[m("清空")]),_:1}),a(y(C),{size:"medium",type:"info",onClick:V},{default:n(()=>[m("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),f("div",Y,[f("div",Z,[a(y(h),{type:"success"},{default:n(()=>[m("提单总额："+g(o.totalWithdrawAmount),1)]),_:1})]),f("div",tt,[a(y(h),{type:"success"},{default:n(()=>[m("成功总额："+g(o.totalWithdrawSuccessAmount),1)]),_:1})]),f("div",et,[a(y(h),{type:"success"},{default:n(()=>[m("成功手续费："+g(o.totalWithdrawSuccessFee),1)]),_:1})]),f("div",at,[a(y(h),{type:"success"},{default:n(()=>[m("成功订单数："+g(o.totalWithdrawSuccessNum),1)]),_:1})]),f("div",lt,[a(y(h),{type:"success"},{default:n(()=>[m("成功率："+g(o.rate),1)]),_:1})])]),a(u,{show:N.value},{description:n(()=>[m("加载中...")]),default:n(()=>[a(A,{columns:I.value,data:F.value,"row-key":z,"single-line":!1,id:"dataTable"},null,8,["columns","data"]),a(d,{style:{margin:"18px 0"},"show-size-picker":"","show-quick-jumper":"","page-sizes":[10,20,50,100],page:e.page,"onUpdate:page":[t[9]||(t[9]=l=>e.page=l),M],"page-count":k.value,"onUpdate:pageSize":P},null,8,["page","page-count"])]),_:1},8,["show"])])}}};export{dt as default};
